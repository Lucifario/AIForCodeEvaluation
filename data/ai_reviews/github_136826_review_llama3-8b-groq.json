{
  "source_item_id": 136826,
  "source_type": "github",
  "generator_model_id": "llama3-8b-groq",
  "generation_timestamp": "2025-10-26T13:34:30.030127",
  "input_code_language": "java",
  "input_code_snippet": "/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0; you may not use this file except in compliance with the Elastic License\n * 2.0.\n */\n\npackage org.elasticsearch.xpack.core.action;\n\nimport org.elasticsearch.action.support.master.AcknowledgedRequest;\nimport org.elasticsearch.common.io.stream.StreamInput;\nimport org.elasticsearch.common.io.stream.StreamOutput;\nimport org.elasticsearch.xcontent.ConstructingObjectParser;\nimport org.elasticsearch.xcontent.ParseField;\nimport org.elasticsearch.xcontent.ToXContent;\nimport org.elasticsearch.xcontent.ToXContentObject;\nimport org.elasticsearch.xcontent.XContentBuilder;\n\nimport java.io.IOException;\nimport java.util.Objects;\n\npublic class SetResetModeActionRequest extends AcknowledgedRequest<SetResetModeActionRequest> implements ToXContentObject {\n    public static SetResetModeActionRequest enabled() {\n        return new SetResetModeActionRequest(true, false);\n    }\n\n    public static SetResetModeActionRequest disabled(boolean deleteMetadata) {\n        return new SetResetModeActionRequest(false, deleteMetadata);\n    }\n\n    private final boolean enabled;\n    private final boolean deleteMetadata;\n\n    private static final ParseField ENABLED = new ParseField(\"enabled\");\n    private static final ParseField DELETE_METADATA = new ParseField(\"delete_metadata\");\n    public static final ConstructingObjectParser<SetResetModeActionRequest, Void> PARSER = new ConstructingObjectParser<>(\n        \"set_reset_mode_action_request\",\n        a -> new SetResetModeActionRequest((Boolean) a[0], (Boolean) a[1])\n    );\n\n    static {\n        PARSER.declareBoolean(ConstructingObjectParser.constructorArg(), ENABLED);\n        PARSER.declareBoolean(ConstructingObjectParser.optionalConstructorArg(), DELETE_METADATA);\n    }\n\n    SetResetModeActionRequest(boolean enabled, Boolean deleteMetadata) {\n        super(TRAPPY_IMPLICIT_DEFAULT_MASTER_NODE_TIMEOUT, DEFAULT_ACK_TIMEOUT);\n        this.enabled = enabled;\n        this.deleteMetadata = deleteMetadata != null && deleteMetadata;\n    }\n\n    public SetResetModeActionRequest(StreamInput in) throws IOException {\n        super(in);\n        this.enabled = in.readBoolean();\n        this.deleteMetadata = in.readBoolean();\n    }\n\n    public boolean isEnabled() {\n        return enabled;\n    }\n\n    public boolean shouldDeleteMetadata() {\n        return deleteMetadata;\n    }\n\n    @Override\n    public void writeTo(StreamOutput out) throws IOException {\n        super.writeTo(out);\n        out.writeBoolean(enabled);\n        out.writeBoolean(deleteMetadata);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(enabled, deleteMetadata);\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) {\n            return true;\n        }\n        if (obj == null || obj.getClass() != getClass()) {\n            return false;\n        }\n        SetResetModeActionRequest other = (SetResetModeActionRequest) obj;\n        return Objects.equals(enabled, other.enabled) && Objects.equals(deleteMetadata, other.deleteMetadata);\n    }\n\n    @Override\n    public XContentBuilder toXContent(XContentBuilder builder, ToXContent.Params params) throws IOException {\n        builder.startObject();\n        builder.field(ENABLED.getPreferredName(), enabled);\n        if (enabled == false) {\n            builder.field(DELETE_METADATA.getPreferredName(), deleteMetadata);\n        }\n        builder.endObject();\n        return builder;\n    }\n}\n",
  "raw_llm_output": "{\n  \"bugs_found\": [\n      {\n         \"explanation\": \"In the constructor SetResetModeActionRequest(boolean enabled, Boolean deleteMetadata), the deleteMetadata parameter is not checked for null before being assigned to this.deleteMetadata. This might lead to a NullPointerException if deleteMetadata is null.\",\n         \"suggested_fix\": \"this.deleteMetadata = deleteMetadata != null && deleteMetadata;\"\n      },\n      {\n         \"explanation\": \"The toXContent method does not handle the case when enabled is true. It only adds the deleteMetadata field when enabled is false. This might lead to incomplete data being written to the XContentBuilder.\",\n         \"suggested_fix\": \"builder.field(DELETE_METADATA.getPreferredName(), deleteMetadata);\"\n      }\n   ],\n   \"no_bugs_reasoning\": \"\"\n}",
  "parsed_llm_output": {
    "bugs_found": [
      {
        "explanation": "In the constructor SetResetModeActionRequest(boolean enabled, Boolean deleteMetadata), the deleteMetadata parameter is not checked for null before being assigned to this.deleteMetadata. This might lead to a NullPointerException if deleteMetadata is null.",
        "suggested_fix": "this.deleteMetadata = deleteMetadata != null && deleteMetadata;"
      },
      {
        "explanation": "The toXContent method does not handle the case when enabled is true. It only adds the deleteMetadata field when enabled is false. This might lead to incomplete data being written to the XContentBuilder.",
        "suggested_fix": "builder.field(DELETE_METADATA.getPreferredName(), deleteMetadata);"
      }
    ],
    "no_bugs_reasoning": ""
  },
  "error": null
}