{"sample_id": "Math_102", "model": "mistral-nemo", "code_context": "/*\n * Licensed to the Apache Software Foundation (ASF) under one or more\n * contributor license agreements.  See the NOTICE file distributed with\n * this work for additional information regarding copyright ownership.\n * The ASF licenses this file to You under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with\n * the License.  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.apache.commons.math.stat.inference;\n\nimport org.apache.commons.math.MathException;\nimport org.apache.commons.math.distribution.ChiSquaredDistribution;\nimport org.apache.commons.math.distribution.ChiSquaredDistributionImpl;\nimport org.apache.commons.math.distribution.DistributionFactory;\n\n/**\n * Implements Chi-Square test statistics defined in the\n * {@link UnknownDistributionChiSquareTest} interface.\n *\n * @version $Revision$ $Date$\n */\npublic class ChiSquareTestImpl implements UnknownDistributionChiSquareTest {\n\n    /** Distribution used to compute inference statistics. */\n    private ChiSquaredDistribution distribution;\n  \n    /**\n     * Construct a ChiSquareTestImpl \n     */\n    public ChiSquareTestImpl() {\n        this(new ChiSquaredDistributionImpl(1.0));\n    }\n\n    /**\n     * Create a test instance using the given distribution for computing\n     * inference statistics.\n     * @param x distribution used to compute inference statistics.\n     * @since 1.2\n     */\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\n        super();\n        setDistribution(x);\n    }\n     /**\n     * {@inheritDoc}\n     * <p><strong>Note: </strong>This implementation rescales the \n     * <code>expected</code> array if necessary to ensure that the sum of the\n     * expected and observed counts are equal.</p>\n     * \n     * @param observed array of observed frequency counts\n     * @param expected array of expected frequency counts\n     * @return chi-square test statistic\n     * @throws IllegalArgumentException if preconditions are not met\n     * or length is less than 2\n     */\n    public double chiSquare(double[] expected, long[] observed)\n        throws IllegalArgumentException {\n        if ((expected.length < 2) || (expected.length != observed.length)) {\n            throw new IllegalArgumentException(\n                    \"observed, expected array lengths incorrect\");\n        }\n        if (!isPositive(expected) || !isNonNegative(observed)) {\n            throw new IllegalArgumentException(\n                \"observed counts must be non-negative and expected counts must be postive\");\n        }\n        double sumSq = 0.0d;\n        double dev = 0.0d;\n        for (int i = 0; i < observed.length; i++) {\n                dev = ((double) observed[i] - expected[i]);\n                sumSq += dev * dev / expected[i];\n        }\n        return sumSq;\n    }\n\n    /**\n     * {@inheritDoc}\n     * <p><strong>Note: </strong>This implementation rescales the \n     * <code>expected</code> array if necessary to ensure that the sum of the\n     * expected and observed counts are equal.</p>\n     * \n     * @param observed array of observed frequency counts\n     * @param expected array of exptected frequency counts\n     * @return p-value\n     * @throws IllegalArgumentException if preconditions are not met\n     * @throws MathException if an error occurs computing the p-value\n     */\n    public double chiSquareTest(double[] expected, long[] observed)\n        throws IllegalArgumentException, MathException {\n        distribution.setDegreesOfFreedom(expected.length - 1.0);\n        return 1.0 - distribution.cumulativeProbability(\n            chiSquare(expected, observed));\n    }\n\n    /**\n     * {@inheritDoc}\n     * <p><strong>Note: </strong>This implementation rescales the \n     * <code>expected</code> array if necessary to ensure that the sum of the\n     * expected and observed counts are equal.</p>\n     * \n     * @param observed array of observed frequency counts\n     * @param expected array of exptected frequency counts\n     * @param alpha significance level of the test\n     * @return true iff null hypothesis can be rejected with confidence\n     * 1 - alpha\n     * @throws IllegalArgumentException if preconditions are not met\n     * @throws MathException if an error occurs performing the test\n     */\n    public boolean chiSquareTest(double[] expected, long[] observed, \n            double alpha) throws IllegalArgumentException, MathException {\n        if ((alpha <= 0) || (alpha > 0.5)) {\n            throw new IllegalArgumentException(\n                    \"bad significance level: \" + alpha);\n        }\n        return (chiSquareTest(expected, observed) < alpha);\n    }\n    \n    /**\n     * @param counts array representation of 2-way table\n     * @return chi-square test statistic\n     * @throws IllegalArgumentException if preconditions are not met\n     */\n    public double chiSquare(long[][] counts) throws IllegalArgumentException {\n        \n        checkArray(counts);\n        int nRows = counts.length;\n        int nCols = counts[0].length;\n        \n        // compute row, column and total sums\n        double[] rowSum = new double[nRows];\n        double[] colSum = new double[nCols];\n        double total = 0.0d;\n        for (int row = 0; row < nRows; row++) {\n            for (int col = 0; col < nCols; col++) {\n                rowSum[row] += (double) counts[row][col];\n                colSum[col] += (double) counts[row][col];\n                total += (double) counts[row][col];\n            }\n        }\n        \n        // compute expected counts and chi-square\n        double sumSq = 0.0d;\n        double expected = 0.0d;\n        for (int row = 0; row < nRows; row++) {\n            for (int col = 0; col < nCols; col++) {\n                expected = (rowSum[row] * colSum[col]) / total;\n                sumSq += (((double) counts[row][col] - expected) * \n                        ((double) counts[row][col] - expected)) / expected; \n            }\n        } \n        return sumSq;\n    }\n\n    /**\n     * @param counts array representation of 2-way table\n     * @return p-value\n     * @throws IllegalArgumentException if preconditions are not met\n     * @throws MathException if an error occurs computing the p-value\n     */\n    public double chiSquareTest(long[][] counts)\n    throws IllegalArgumentException, MathException {\n        checkArray(counts);\n        double df = ((double) counts.length -1) * ((double) counts[0].length - 1);\n        distribution.setDegreesOfFreedom(df);\n        return 1 - distribution.cumulativeProbability(chiSquare(counts));\n    }\n\n    /**\n     * @param counts array representation of 2-way table\n     * @param alpha significance level of the test\n     * @return true iff null hypothesis can be rejected with confidence\n     * 1 - alpha\n     * @throws IllegalArgumentException if preconditions are not met\n     * @throws MathException if an error occurs performing the test\n     */\n    public boolean chiSquareTest(long[][] counts, double alpha)\n    throws IllegalArgumentException, MathException {\n        if ((alpha <= 0) || (alpha > 0.5)) {\n            throw new IllegalArgumentException(\"bad significance level: \" + alpha);\n        }\n        return (chiSquareTest(counts) < alpha);\n    }\n    \n    /**\n     * @param observed1 array of observed frequency counts of the first data set\n     * @param observed2 array of observed frequency counts of the second data set\n     * @return chi-square test statistic\n     * @throws IllegalArgumentException if preconditions are not met\n     */\n    public double chiSquareDataSetsComparison(long[] observed1, long[] observed2)\n        throws IllegalArgumentException {\n        \n        // Make sure lengths are same\n        if ((observed1.length < 2) || (observed1.length != observed2.length)) {\n            throw new IllegalArgumentException(\n                    \"oberved1, observed2 array lengths incorrect\");\n        }\n        // Ensure non-negative counts\n        if (!isNonNegative(observed1) || !isNonNegative(observed2)) {\n            throw new IllegalArgumentException(\n                \"observed counts must be non-negative\");\n        }\n        // Compute and compare count sums\n        long countSum1 = 0;\n        long countSum2 = 0;\n        boolean unequalCounts = false;\n        double weight = 0.0;\n        for (int i = 0; i < observed1.length; i++) {\n            countSum1 += observed1[i];\n            countSum2 += observed2[i];   \n        }\n        // Ensure neither sample is uniformly 0\n        if (countSum1 * countSum2 == 0) {\n            throw new IllegalArgumentException(\n             \"observed counts cannot all be 0\"); \n        }\n        // Compare and compute weight only if different\n        unequalCounts = (countSum1 != countSum2);\n        if (unequalCounts) {\n            weight = Math.sqrt((double) countSum1 / (double) countSum2);\n        }\n        // Compute ChiSquare statistic\n        double sumSq = 0.0d;\n        double dev = 0.0d;\n        double obs1 = 0.0d;\n        double obs2 = 0.0d;\n        for (int i = 0; i < observed1.length; i++) {\n            if (observed1[i] == 0 && observed2[i] == 0) {\n                throw new IllegalArgumentException(\n                        \"observed counts must not both be zero\");\n            } else {\n                obs1 = (double) observed1[i];\n                obs2 = (double) observed2[i];\n                if (unequalCounts) { // apply weights\n                    dev = obs1/weight - obs2 * weight;\n                } else {\n                    dev = obs1 - obs2;\n                }\n                sumSq += (dev * dev) / (obs1 + obs2);\n            }\n        }\n        return sumSq;\n    }\n\n    /**\n     * @param observed1 array of observed frequency counts of the first data set\n     * @param observed2 array of observed frequency counts of the second data set\n     * @return p-value\n     * @throws IllegalArgumentException if preconditions are not met\n     * @throws MathException if an error occurs computing the p-value\n     */\n    public double chiSquareTestDataSetsComparison(long[] observed1, long[] observed2)\n        throws IllegalArgumentException, MathException {\n        distribution.setDegreesOfFreedom((double) observed1.length - 1);\n        return 1 - distribution.cumulativeProbability(\n                chiSquareDataSetsComparison(observed1, observed2));\n    }\n\n    /**\n     * @param observed1 array of observed frequency counts of the first data set\n     * @param observed2 array of observed frequency counts of the second data set\n     * @param alpha significance level of the test\n     * @return true iff null hypothesis can be rejected with confidence\n     * 1 - alpha\n     * @throws IllegalArgumentException if preconditions are not met\n     * @throws MathException if an error occurs performing the test\n     */\n    public boolean chiSquareTestDataSetsComparison(long[] observed1, long[] observed2,\n            double alpha) throws IllegalArgumentException, MathException {\n        if ((alpha <= 0) || (alpha > 0.5)) {\n            throw new IllegalArgumentException(\n                    \"bad significance level: \" + alpha);\n        }\n        return (chiSquareTestDataSetsComparison(observed1, observed2) < alpha);\n    }\n\n    /**\n     * Checks to make sure that the input long[][] array is rectangular,\n     * has at least 2 rows and 2 columns, and has all non-negative entries,\n     * throwing IllegalArgumentException if any of these checks fail.\n     * \n     * @param in input 2-way table to check\n     * @throws IllegalArgumentException if the array is not valid\n     */\n    private void checkArray(long[][] in) throws IllegalArgumentException {\n        \n        if (in.length < 2) {\n            throw new IllegalArgumentException(\"Input table must have at least two rows\");\n        }\n        \n        if (in[0].length < 2) {\n            throw new IllegalArgumentException(\"Input table must have at least two columns\");\n        }    \n        \n        if (!isRectangular(in)) {\n            throw new IllegalArgumentException(\"Input table must be rectangular\");\n        }\n        \n        if (!isNonNegative(in)) {\n            throw new IllegalArgumentException(\"All entries in input 2-way table must be non-negative\");\n        }\n        \n    }\n    \n    //---------------------  Protected methods ---------------------------------\n    /**\n     * Gets a DistributionFactory to use in creating ChiSquaredDistribution instances.\n     * @deprecated inject ChiSquaredDistribution instances directly instead of\n     *             using a factory.\n     */\n    protected DistributionFactory getDistributionFactory() {\n        return DistributionFactory.newInstance();\n    }\n    \n    //---------------------  Private array methods -- should find a utility home for these\n    \n    /**\n     * Returns true iff input array is rectangular.\n     * \n     * @param in array to be tested\n     * @return true if the array is rectangular\n     * @throws NullPointerException if input array is null\n     * @throws ArrayIndexOutOfBoundsException if input array is empty\n     */\n    private boolean isRectangular(long[][] in) {\n        for (int i = 1; i < in.length; i++) {\n            if (in[i].length != in[0].length) {\n                return false;\n            }\n        }  \n        return true;\n    }\n    \n    /**\n     * Returns true iff all entries of the input array are > 0.\n     * Returns true if the array is non-null, but empty\n     * \n     * @param in array to be tested\n     * @return true if all entries of the array are positive\n     * @throws NullPointerException if input array is null\n     */\n    private boolean isPositive(double[] in) {\n        for (int i = 0; i < in.length; i ++) {\n            if (in[i] <= 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    \n    /**\n     * Returns true iff all entries of the input array are >= 0.\n     * Returns true if the array is non-null, but empty\n     * \n     * @param in array to be tested\n     * @return true if all entries of the array are non-negative\n     * @throws NullPointerException if input array is null\n     */\n    private boolean isNonNegative(long[] in) {\n        for (int i = 0; i < in.length; i ++) {\n            if (in[i] < 0) {\n                return false;\n            }\n        }\n        return true;\n    }\n    \n    /**\n     * Returns true iff all entries of (all subarrays of) the input array are >= 0.\n     * Returns true if the array is non-null, but empty\n     * \n     * @param in array to be tested\n     * @return true if all entries of the array are non-negative\n     * @throws NullPointerException if input array is null\n     */\n    private boolean isNonNegative(long[][] in) {\n        for (int i = 0; i < in.length; i ++) {\n            for (int j = 0; j < in[i].length; j++) {\n                if (in[i][j] < 0) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n \n    /**\n     * Modify the distribution used to compute inference statistics.\n     * \n     * @param value\n     *            the new distribution\n     * @since 1.2\n     */\n    public void setDistribution(ChiSquaredDistribution value) {\n        distribution = value;\n    }\n}\n", "review": {"response": "[{\"code\": \"for (int row = 0; row < nRows; row++) {\\n            for (int col = 0; col < nCols; col++) {\\n                rowSum[row] += (double) counts[row][col];\\n                colSum[col] += (double) counts[row][col];\\n                total += (double) counts[row][col];\\n            }\\n        }\\n        \\n        // compute expected counts and chi-square\\n        double sumSq = 0.0d;\\n        double expected = 0.0d;\\n        for (int row = 0; row < nRows; row++) {\\n            for (int col = 0; col < nCols; col++) {\\n                expected = total * rowSum[row] * colSum[col] / (nRows * nCols);\\n                sumSq += ((double) counts[row][col] - expected) * ((double) counts[row][col] - expected) / expected;\\n            }\\n        }\\n        return sumSq;\"}, {\"message\": \"Potential bug: Division by zero is possible in the chiSquare method when expected is zero. This can happen if the observed counts are all zero for a particular category.\"}, {\"code\": \"if ((alpha <= 0) || (alpha > 0.5)) {\\n            throw new IllegalArgumentException(\\n                    \\\"bad significance level: \\\" + alpha);\\n        }\\n        return (chiSquareTest(expected, observed) < alpha);\"}, {\"message\": \"Potential bug: The chiSquareTest method may return incorrect results if the input alpha value is not between 0 and 0.5 (exclusive). The method should validate the input alpha value and throw an IllegalArgumentException if it is not within the expected range.\"}, {\"code\": \"if ((expected.length < 2) || (expected.length != observed.length)) {\\n            throw new IllegalArgumentException(\\n                    \\\"observed, expected array lengths incorrect\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\n                \\\"observed counts must be non-negative and expected counts must be postive\\\");\\n        }\\n        double sumSq = 0.0d;\\n        double dev = 0.0d;\\n        for (int i = 0; i < observed.length; i++) {\\n                dev = ((double) observed[i] - expected[i]);\\n                sumSq += dev * dev / expected[i];\\n        }\\n        return sumSq;\"}, {\"message\": \"Potential bug: Division by zero is possible in the chiSquare method when expected[i] is zero. This can happen if the expected count for a particular category is zero. The method should check for this case and handle it appropriately.\"}, {\"code\": \"distribution.setDegreesOfFreedom(expected.length - 1.0);\\n        return 1.0 - distribution.cumulativeProbability(\\n            chiSquare(expected, observed));\"}, {\"message\": \"Potential bug: The chiSquareTest method may return incorrect results if the input expected array has a length of 1. In this case, the degrees of freedom should be set to 0, not 0.0. The method should check for this case and handle it appropriately.\"}, {\"code\": \"checkArray(counts);\\n        int nRows = counts.length;\\n        int nCols = counts[0].length;\\n\\n        // compute row, column and total sums\\n        double[] rowSum = new double[nRows];\\n        double[] colSum = new double[nCols];\\n        double total = 0.0d;\\n        for (int row = 0; row < nRows; row++) {\\n            for (int col = 0; col < nCols; col++) {\\n                rowSum[row] += (double) counts[row][col];\\n                colSum[col] += (double) counts[row][col];\\n                total += (double) counts[row][col];\\n            }\\n        }\\n\\n        // compute expected counts and chi-square\\n        double sumSq = 0.0d;\\n        double expected = 0.0d;\\n        for (int row = 0; row < nRows; row++) {\\n            for (int col = 0; col < nCols; col++) {\\n                expected = total * rowSum[row] * colSum[col] / (nRows * nCols);\\n                sumSq += ((double) counts[row][col] - expected) * ((double) counts[row][col] - expected) / expected;\\n            }\\n        }\\n        return sumSq;\"}, {\"message\": \"Potential bug: The chiSquare method may return incorrect results if the input counts array is null or has inconsistent dimensions. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n        return chiSquare(new double[counts.length], new long[counts.length]);\"}, {\"message\": \"Potential bug: The chiSquare method may return incorrect results if the input counts array is not 2-dimensional. The method should check for this case and handle it appropriately.\"}, {\"code\": \"private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\"}, {\"message\": \"Potential bug: The checkArray method may throw an IllegalArgumentException with an incorrect error message if the input counts array is null or has inconsistent dimensions. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\"}, {\"message\": \"Potential bug: The isPositive and isNonNegative methods may return incorrect results if the input arrays contain NaN or Infinity values. The methods should check for these cases and handle them appropriately.\"}, {\"code\": \"public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\"}, {\"message\": \"Potential bug: The ChiSquareTestImpl class may not behave as expected if the distribution is not set using the setDistribution method. The class should ensure that the distribution is set to a valid value before using it in other methods.\"}, {\"code\": \"public double chiSquareTest(double[] expected, long[] observed)\\n        throws IllegalArgumentException, MathException {\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha)\\n        throws IllegalArgumentException, MathException {\\n    public double chiSquare(long[][] counts)\\n        throws IllegalArgumentException {\\n    public double chiSquare(double[] expected, long[] observed)\\n        throws IllegalArgumentException {\\n\"}, {\"message\": \"Potential bug: The ChiSquareTestImpl class may not behave as expected if the chiSquareTest method is called with inconsistent input types. The class should ensure that the input types are consistent before using them in other methods.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\"}, {\"message\": \"Potential bug: The UnknownDistributionChiSquareTest interface may not behave as expected if the getInstance method is called with inconsistent input types. The interface should ensure that the input types are consistent before using them in other methods.\"}, {\"code\": \"public double chiSquareTest(double[] expected, long[] observed) {\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        boolean result = chiSquareTest(expected, observed, alpha);\\n        return result;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        double chiSq = chiSquare(counts);\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        double chiSq = chiSquare(expected, observed);\\n        return chiSq;\\n    }\"}, {\"message\": \"Potential bug: The ChiSquareTestImpl class may not behave as expected if the chiSquareTest and chiSquare methods are called with inconsistent input types. The class should ensure that the input types are consistent before using them in other methods.\"}, {\"code\": \"public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\"}, {\"message\": \"Potential bug: The ChiSquareTestImpl class may not behave as expected if the chiSquareTest and chiSquare methods are called with inconsistent input types. The class should ensure that the input types are consistent before using them in other methods. Additionally, the chiSquareTest method may return incorrect results if the input alpha value is not between 0 and 1 (exclusive). The method should validate the input alpha value and throw an IllegalArgumentException if it is not within the expected range.\"}, {\"code\": \"public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\"}, {\"message\": \"Potential bug: The chiSquareTest and chiSquare methods may return incorrect results if the input arrays contain NaN or Infinity values. The methods should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\"}, {\"message\": \"Potential bug: The UnknownDistributionChiSquareTest interface may not behave as expected if the getInstance method is called with inconsistent input types. The interface should ensure that the input types are consistent before using them in other methods.\"}, {\"code\": \"public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n\"}, {\"message\": \"Potential bug: The main method may not behave as expected if the input arrays contain NaN or Infinity values. The method should check for these cases and handle them appropriately.\"}, {\"code\": \"public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\n            System.out.println(\\\"Error: \\\" + e.getMessage());\\n        }\\n    }\\n    public double chiSquareTest(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = chiSquare(expected, observed);\\n        double pValue = 1.0 - distribution.cumulativeProbability(chiSq);\\n        return pValue;\\n    }\\n    public boolean chiSquareTest(double[] expected, long[] observed, double alpha) {\\n        if (alpha <= 0 || alpha > 1) {\\n            throw new IllegalArgumentException(\\\"Invalid significance level\\\");\\n        }\\n        double pValue = chiSquareTest(expected, observed);\\n        return pValue < alpha;\\n    }\\n    public double chiSquare(long[][] counts) {\\n        if (counts == null || counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"Invalid 2D array\\\");\\n        }\\n        double chiSq = 0.0;\\n        double total = 0.0;\\n        double[] rowSums = new double[counts.length];\\n        double[] colSums = new double[counts[0].length];\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                rowSums[i] += counts[i][j];\\n                colSums[j] += counts[i][j];\\n                total += counts[i][j];\\n            }\\n        }\\n        for (int i = 0; i < counts.length; i++) {\\n            for (int j = 0; j < counts[0].length; j++) {\\n                double expected = (total * rowSums[i] * colSums[j]) / (counts.length * counts[0].length);\\n                chiSq += Math.pow(counts[i][j] - expected, 2) / expected;\\n            }\\n        }\\n        return chiSq;\\n    }\\n    public double chiSquare(double[] expected, long[] observed) {\\n        if (expected.length != observed.length) {\\n            throw new IllegalArgumentException(\\\"Inconsistent array lengths\\\");\\n        }\\n        if (!isPositive(expected) || !isNonNegative(observed)) {\\n            throw new IllegalArgumentException(\\\"Invalid input values\\\");\\n        }\\n        double chiSq = 0.0;\\n        for (int i = 0; i < expected.length; i++) {\\n            chiSq += Math.pow(observed[i] - expected[i], 2) / expected[i];\\n        }\\n        return chiSq;\\n    }\\n    private boolean isPositive(double[] expected) {\\n        for (double d : expected) {\\n            if (d <= 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private boolean isNonNegative(long[] observed) {\\n        for (long l : observed) {\\n            if (l < 0) {\\n                return false;\\n            }\\n        }\\n        return true;\\n    }\\n    private void checkArray(long[][] counts) {\\n        if (counts == null) {\\n            throw new IllegalArgumentException(\\\"null counts\\\");\\n        }\\n        if (counts.length < 2 || counts.length != counts[0].length) {\\n            throw new IllegalArgumentException(\\\"counts array must be 2-dimensional\\\");\\n        }\\n        for (int i = 1; i < counts.length; i++) {\\n            if (counts[i].length != counts[0].length) {\\n                throw new IllegalArgumentException(\\\"inconsistent dimensions\\\");\\n            }\\n        }\\n    }\\n    private ChiSquaredDistribution distribution;\\n    public ChiSquareTestImpl() {\\n        this(new ChiSquaredDistributionImpl(1.0));\\n    }\\n    public ChiSquareTestImpl(ChiSquaredDistribution x) {\\n        super();\\n        setDistribution(x);\\n    }\\n    public void setDistribution(ChiSquaredDistribution x) {\\n        this.distribution = x;\\n    }\\n    public ChiSquaredDistribution getDistribution() {\\n        return this.distribution;\\n    }\\n    public UnknownDistributionChiSquareTest getInstance() {\\n        return new ChiSquareTestImpl();\\n    }\\n    public UnknownDistributionChiSquareTest getInstance(ChiSquaredDistribution x) {\\n        return new ChiSquareTestImpl(x);\\n    }\\n    public static void main(String[] args) {\\n        UnknownDistributionChiSquareTest test = new ChiSquareTestImpl();\\n        double[] expected = {10.0, 20.0, 30.0};\\n        long[] observed = {15.0, 22.0, 35.0};\\n        double alpha = 0.05;\\n        try {\\n            boolean result = test.chiSquareTest(expected, observed, alpha);\\n            System.out.println(\\\"Result: \\\" + result);\\n        } catch (IllegalArgumentException | MathException e) {\\"}}