{
  "project": "Lang",
  "bug_id": 19,
  "buggy_compiled": true,
  "fixed_compiled": true,
  "buggy_metadata": {
    "classes.modified": [
      "org.apache.commons.lang3.text.translate.NumericEntityUnescaper"
    ],
    "tests.trigger": [
      "org.apache.commons.lang3.text.translate.NumericEntityUnescaperTest::testUnfinishedEntity",
      "org.apache.commons.lang3.text.translate.NumericEntityUnescaperTest::testOutOfBounds"
    ],
    "dir.src.classes": [
      "src/main/java"
    ]
  },
  "fixed_metadata": {
    "classes.modified": [
      "org.apache.commons.lang3.text.translate.NumericEntityUnescaper"
    ],
    "tests.trigger": [
      "org.apache.commons.lang3.text.translate.NumericEntityUnescaperTest::testUnfinishedEntity",
      "org.apache.commons.lang3.text.translate.NumericEntityUnescaperTest::testOutOfBounds"
    ],
    "dir.src.classes": [
      "src/main/java"
    ]
  },
  "diff": "diff --git a/data/defects4j_bugs/Lang_19b/.defects4j.config b/data/defects4j_bugs/Lang_19f/.defects4j.config\nindex 26c6194..7332dd2 100644\n--- a/data/defects4j_bugs/Lang_19b/.defects4j.config\n+++ b/data/defects4j_bugs/Lang_19f/.defects4j.config\n@@ -1,3 +1,3 @@\n #File automatically generated by Defects4J\n pid=Lang\n-vid=19b\n+vid=19f\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/HEAD b/data/defects4j_bugs/Lang_19f/.git/HEAD\nindex ab04269..7852c20 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/HEAD\n+++ b/data/defects4j_bugs/Lang_19f/.git/HEAD\n@@ -1 +1 @@\n-e4aac7c06ca1eb93fbb709497532529174cdade1\n+0590db1f7b3139dee4faf7a74df575443803f180\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/index b/data/defects4j_bugs/Lang_19f/.git/index\nindex 8919db3..f4adb5b 100644\nBinary files a/data/defects4j_bugs/Lang_19b/.git/index and b/data/defects4j_bugs/Lang_19f/.git/index differ\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/logs/HEAD b/data/defects4j_bugs/Lang_19f/.git/logs/HEAD\nindex 3a6bfe1..9c982c1 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/logs/HEAD\n+++ b/data/defects4j_bugs/Lang_19f/.git/logs/HEAD\n@@ -1,9 +1,9 @@\n-0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425247 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n-eb4d185c675e12bd72b4e40250883274b18104d1 8914d7f617f78aae8c85405856283c98d4e43990 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425247 -0700\tcheckout: moving from master to 8914d7f617f78aae8c85405856283c98d4e43990\n-8914d7f617f78aae8c85405856283c98d4e43990 2472c617fe1c0c41fecb0b45962715225392f9cb defects4j <defects4j@localhost> 1761425247 -0700\tcommit: D4J_Lang_19_POST_FIX_REVISION\n-2472c617fe1c0c41fecb0b45962715225392f9cb 566e2f38fe85e5b99b4ae89ee6624b881b9141b0 defects4j <defects4j@localhost> 1761425247 -0700\tcommit: D4J_Lang_19_POST_FIX_COMPILABLE\n-566e2f38fe85e5b99b4ae89ee6624b881b9141b0 e0160a093d711a4edc01c6914f5b84d039e917f3 defects4j <defects4j@localhost> 1761425250 -0700\tcommit: D4J_Lang_19_FIXED_VERSION\n-e0160a093d711a4edc01c6914f5b84d039e917f3 e4aac7c06ca1eb93fbb709497532529174cdade1 defects4j <defects4j@localhost> 1761425250 -0700\tcommit: D4J_Lang_19_BUGGY_VERSION\n-e4aac7c06ca1eb93fbb709497532529174cdade1 2472c617fe1c0c41fecb0b45962715225392f9cb defects4j <defects4j@localhost> 1761425250 -0700\tcheckout: moving from e4aac7c06ca1eb93fbb709497532529174cdade1 to D4J_Lang_19_POST_FIX_REVISION\n-2472c617fe1c0c41fecb0b45962715225392f9cb cc56f09ef54dbed4aca083cf46a4663e36e66f23 defects4j <defects4j@localhost> 1761425251 -0700\tcommit: D4J_Lang_19_PRE_FIX_REVISION\n-cc56f09ef54dbed4aca083cf46a4663e36e66f23 e4aac7c06ca1eb93fbb709497532529174cdade1 defects4j <defects4j@localhost> 1761425251 -0700\tcheckout: moving from cc56f09ef54dbed4aca083cf46a4663e36e66f23 to D4J_Lang_19_BUGGY_VERSION\n+0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425251 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n+eb4d185c675e12bd72b4e40250883274b18104d1 8914d7f617f78aae8c85405856283c98d4e43990 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425251 -0700\tcheckout: moving from master to 8914d7f617f78aae8c85405856283c98d4e43990\n+8914d7f617f78aae8c85405856283c98d4e43990 9c51ff0764f71b7f3e5540dbca3c47e4618556f4 defects4j <defects4j@localhost> 1761425251 -0700\tcommit: D4J_Lang_19_POST_FIX_REVISION\n+9c51ff0764f71b7f3e5540dbca3c47e4618556f4 e492ce137f8aca8d69721d84a7233eb783fb7e3c defects4j <defects4j@localhost> 1761425251 -0700\tcommit: D4J_Lang_19_POST_FIX_COMPILABLE\n+e492ce137f8aca8d69721d84a7233eb783fb7e3c 0590db1f7b3139dee4faf7a74df575443803f180 defects4j <defects4j@localhost> 1761425254 -0700\tcommit: D4J_Lang_19_FIXED_VERSION\n+0590db1f7b3139dee4faf7a74df575443803f180 690105b3401206900fe7639f1392afe6332b0a9a defects4j <defects4j@localhost> 1761425254 -0700\tcommit: D4J_Lang_19_BUGGY_VERSION\n+690105b3401206900fe7639f1392afe6332b0a9a 9c51ff0764f71b7f3e5540dbca3c47e4618556f4 defects4j <defects4j@localhost> 1761425254 -0700\tcheckout: moving from 690105b3401206900fe7639f1392afe6332b0a9a to D4J_Lang_19_POST_FIX_REVISION\n+9c51ff0764f71b7f3e5540dbca3c47e4618556f4 f521019ac16b09911732c0aab8e31f74a9d14d1f defects4j <defects4j@localhost> 1761425254 -0700\tcommit: D4J_Lang_19_PRE_FIX_REVISION\n+f521019ac16b09911732c0aab8e31f74a9d14d1f 0590db1f7b3139dee4faf7a74df575443803f180 defects4j <defects4j@localhost> 1761425254 -0700\tcheckout: moving from f521019ac16b09911732c0aab8e31f74a9d14d1f to D4J_Lang_19_FIXED_VERSION\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/logs/refs/heads/master b/data/defects4j_bugs/Lang_19f/.git/logs/refs/heads/master\nindex 4ad9bd5..156e853 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/logs/refs/heads/master\n+++ b/data/defects4j_bugs/Lang_19f/.git/logs/refs/heads/master\n@@ -1 +1 @@\n-0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425247 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n+0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425251 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/logs/refs/remotes/origin/HEAD b/data/defects4j_bugs/Lang_19f/.git/logs/refs/remotes/origin/HEAD\nindex 4ad9bd5..156e853 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/logs/refs/remotes/origin/HEAD\n+++ b/data/defects4j_bugs/Lang_19f/.git/logs/refs/remotes/origin/HEAD\n@@ -1 +1 @@\n-0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425247 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n+0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425251 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\ndiff --git a/data/defects4j_bugs/Lang_19f/.git/objects/05/90db1f7b3139dee4faf7a74df575443803f180 b/data/defects4j_bugs/Lang_19f/.git/objects/05/90db1f7b3139dee4faf7a74df575443803f180\nnew file mode 100644\nindex 0000000..e088f82\nBinary files /dev/null and b/data/defects4j_bugs/Lang_19f/.git/objects/05/90db1f7b3139dee4faf7a74df575443803f180 differ\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/objects/56/6e2f38fe85e5b99b4ae89ee6624b881b9141b0 b/data/defects4j_bugs/Lang_19b/.git/objects/56/6e2f38fe85e5b99b4ae89ee6624b881b9141b0\ndeleted file mode 100644\nindex cf7028e..0000000\n--- a/data/defects4j_bugs/Lang_19b/.git/objects/56/6e2f38fe85e5b99b4ae89ee6624b881b9141b0\n+++ /dev/null\n@@ -1,2 +0,0 @@\n-x\u0001MN0\u0010\u0005`>/\u0019m,!\u013f\u0014\u0014J;\u02de\tMPjO`\u0001\u063d\u001e\u03e7{Hx\u0016\u0011M9`*<,\u0451\\9HZ\u0001HQy\u0007\u0006d\u000f\n-a\u0015SE\u0001\u001c\u0011kW\u001bE\u000f6\u0699>_=\u039c|n7\u001a\u0007BK\u0013Q{?z-ALnCz\u063cn\u007fR\u007fK\n\\ No newline at end of file\ndiff --git a/data/defects4j_bugs/Lang_19f/.git/objects/69/0105b3401206900fe7639f1392afe6332b0a9a b/data/defects4j_bugs/Lang_19f/.git/objects/69/0105b3401206900fe7639f1392afe6332b0a9a\nnew file mode 100644\nindex 0000000..1af6a8a\nBinary files /dev/null and b/data/defects4j_bugs/Lang_19f/.git/objects/69/0105b3401206900fe7639f1392afe6332b0a9a differ\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/objects/24/72c617fe1c0c41fecb0b45962715225392f9cb b/data/defects4j_bugs/Lang_19f/.git/objects/9c/51ff0764f71b7f3e5540dbca3c47e4618556f4\nsimilarity index 74%\nrename from data/defects4j_bugs/Lang_19b/.git/objects/24/72c617fe1c0c41fecb0b45962715225392f9cb\nrename to data/defects4j_bugs/Lang_19f/.git/objects/9c/51ff0764f71b7f3e5540dbca3c47e4618556f4\nindex 513713b..4d9956b 100644\nBinary files a/data/defects4j_bugs/Lang_19b/.git/objects/24/72c617fe1c0c41fecb0b45962715225392f9cb and b/data/defects4j_bugs/Lang_19f/.git/objects/9c/51ff0764f71b7f3e5540dbca3c47e4618556f4 differ\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/objects/cc/56f09ef54dbed4aca083cf46a4663e36e66f23 b/data/defects4j_bugs/Lang_19b/.git/objects/cc/56f09ef54dbed4aca083cf46a4663e36e66f23\ndeleted file mode 100644\nindex 0b791f1..0000000\nBinary files a/data/defects4j_bugs/Lang_19b/.git/objects/cc/56f09ef54dbed4aca083cf46a4663e36e66f23 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/objects/e0/160a093d711a4edc01c6914f5b84d039e917f3 b/data/defects4j_bugs/Lang_19b/.git/objects/e0/160a093d711a4edc01c6914f5b84d039e917f3\ndeleted file mode 100644\nindex 67a39ea..0000000\nBinary files a/data/defects4j_bugs/Lang_19b/.git/objects/e0/160a093d711a4edc01c6914f5b84d039e917f3 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_19f/.git/objects/e4/92ce137f8aca8d69721d84a7233eb783fb7e3c b/data/defects4j_bugs/Lang_19f/.git/objects/e4/92ce137f8aca8d69721d84a7233eb783fb7e3c\nnew file mode 100644\nindex 0000000..7f0b25b\nBinary files /dev/null and b/data/defects4j_bugs/Lang_19f/.git/objects/e4/92ce137f8aca8d69721d84a7233eb783fb7e3c differ\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/objects/e4/aac7c06ca1eb93fbb709497532529174cdade1 b/data/defects4j_bugs/Lang_19b/.git/objects/e4/aac7c06ca1eb93fbb709497532529174cdade1\ndeleted file mode 100644\nindex af11d7d..0000000\nBinary files a/data/defects4j_bugs/Lang_19b/.git/objects/e4/aac7c06ca1eb93fbb709497532529174cdade1 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_19f/.git/objects/f5/21019ac16b09911732c0aab8e31f74a9d14d1f b/data/defects4j_bugs/Lang_19f/.git/objects/f5/21019ac16b09911732c0aab8e31f74a9d14d1f\nnew file mode 100644\nindex 0000000..7317bf2\n--- /dev/null\n+++ b/data/defects4j_bugs/Lang_19f/.git/objects/f5/21019ac16b09911732c0aab8e31f74a9d14d1f\n@@ -0,0 +1,3 @@\n+x\u0001K\n+0\u0010a9E. L\u0263 \n+\u0015QQ\u0010w!N|Vj\u00037\u001f\"Fe`9X\u04c6D`\u0003M\u0007\u000bZ\u0006~\u0014YU9wj}6l-BR2\u0469`(\u04bbAv\u000br\u066dt;2;jr\f\u001e@w\u001fTq\u0019Wq]\u001d\u00171Co6k\u0001|$J\n\\ No newline at end of file\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_BUGGY_VERSION b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_BUGGY_VERSION\nindex ab04269..f787b20 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_BUGGY_VERSION\n+++ b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_BUGGY_VERSION\n@@ -1 +1 @@\n-e4aac7c06ca1eb93fbb709497532529174cdade1\n+690105b3401206900fe7639f1392afe6332b0a9a\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_FIXED_VERSION b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_FIXED_VERSION\nindex eb38343..7852c20 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_FIXED_VERSION\n+++ b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_FIXED_VERSION\n@@ -1 +1 @@\n-e0160a093d711a4edc01c6914f5b84d039e917f3\n+0590db1f7b3139dee4faf7a74df575443803f180\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_POST_FIX_COMPILABLE b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_POST_FIX_COMPILABLE\nindex 44729cb..8fbf5cb 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_POST_FIX_COMPILABLE\n+++ b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_POST_FIX_COMPILABLE\n@@ -1 +1 @@\n-566e2f38fe85e5b99b4ae89ee6624b881b9141b0\n+e492ce137f8aca8d69721d84a7233eb783fb7e3c\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_POST_FIX_REVISION b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_POST_FIX_REVISION\nindex f6df115..072a633 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_POST_FIX_REVISION\n+++ b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_POST_FIX_REVISION\n@@ -1 +1 @@\n-2472c617fe1c0c41fecb0b45962715225392f9cb\n+9c51ff0764f71b7f3e5540dbca3c47e4618556f4\ndiff --git a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_PRE_FIX_REVISION b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_PRE_FIX_REVISION\nindex 965875b..2efc8fd 100644\n--- a/data/defects4j_bugs/Lang_19b/.git/refs/tags/D4J_Lang_19_PRE_FIX_REVISION\n+++ b/data/defects4j_bugs/Lang_19f/.git/refs/tags/D4J_Lang_19_PRE_FIX_REVISION\n@@ -1 +1 @@\n-cc56f09ef54dbed4aca083cf46a4663e36e66f23\n+f521019ac16b09911732c0aab8e31f74a9d14d1f\ndiff --git a/data/defects4j_bugs/Lang_19b/src/main/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.java b/data/defects4j_bugs/Lang_19f/src/main/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.java\nindex 68891ac..3d4c238 100644\n--- a/data/defects4j_bugs/Lang_19b/src/main/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.java\n+++ b/data/defects4j_bugs/Lang_19f/src/main/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.java\n@@ -37,7 +37,7 @@ public class NumericEntityUnescaper extends CharSequenceTranslator {\n     public int translate(CharSequence input, int index, Writer out) throws IOException {\n         int seqEnd = input.length();\n         // Uses -2 to ensure there is something after the &#\n-        if(input.charAt(index) == '&' && index < seqEnd - 1 && input.charAt(index + 1) == '#') {\n+        if(input.charAt(index) == '&' && index < seqEnd - 2 && input.charAt(index + 1) == '#') {\n             int start = index + 2;\n             boolean isHex = false;\n \n@@ -47,11 +47,16 @@ public class NumericEntityUnescaper extends CharSequenceTranslator {\n                 isHex = true;\n \n                 // Check there's more than just an x after the &#\n+                if(start == seqEnd) {\n+                    return 0;\n+                }\n             }\n \n             int end = start;\n             // Note that this supports character codes without a ; on the end\n-            while(input.charAt(end) != ';') \n+            while(end < seqEnd && ( (input.charAt(end) >= '0' && input.charAt(end) <= '9') ||\n+                                    (input.charAt(end) >= 'a' && input.charAt(end) <= 'f') ||\n+                                    (input.charAt(end) >= 'A' && input.charAt(end) <= 'F') ) )\n             {\n                 end++;\n             }\n@@ -76,8 +81,9 @@ public class NumericEntityUnescaper extends CharSequenceTranslator {\n                 out.write(entityValue);\n             }\n \n+            boolean semiNext = (end != seqEnd) && (input.charAt(end) == ';');\n \n-            return 2 + (end - start) + (isHex ? 1 : 0) + 1;\n+            return 2 + (end - start) + (isHex ? 1 : 0) + (semiNext ? 1 : 0);\n         }\n         return 0;\n     }\ndiff --git a/data/defects4j_bugs/Lang_19b/target/classes/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.class b/data/defects4j_bugs/Lang_19f/target/classes/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.class\nindex 4861f35..3c14f41 100644\nBinary files a/data/defects4j_bugs/Lang_19b/target/classes/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.class and b/data/defects4j_bugs/Lang_19f/target/classes/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.class differ\n",
  "source_files_path": "data/defects4j_bugs/Lang_19_source"
}