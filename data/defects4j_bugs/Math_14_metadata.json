{
  "project": "Math",
  "bug_id": 14,
  "buggy_compiled": true,
  "fixed_compiled": true,
  "buggy_metadata": {
    "classes.modified": [
      "org.apache.commons.math3.optim.nonlinear.vector.jacobian.AbstractLeastSquaresOptimizer",
      "org.apache.commons.math3.optim.nonlinear.vector.Weight"
    ],
    "tests.trigger": [
      "org.apache.commons.math3.fitting.PolynomialFitterTest::testLargeSample"
    ],
    "dir.src.classes": [
      "src/main/java"
    ]
  },
  "fixed_metadata": {
    "classes.modified": [
      "org.apache.commons.math3.optim.nonlinear.vector.jacobian.AbstractLeastSquaresOptimizer",
      "org.apache.commons.math3.optim.nonlinear.vector.Weight"
    ],
    "tests.trigger": [
      "org.apache.commons.math3.fitting.PolynomialFitterTest::testLargeSample"
    ],
    "dir.src.classes": [
      "src/main/java"
    ]
  },
  "diff": "diff --git a/data/defects4j_bugs/Math_14b/.defects4j.config b/data/defects4j_bugs/Math_14f/.defects4j.config\nindex 7e89751..0c5ffab 100644\n--- a/data/defects4j_bugs/Math_14b/.defects4j.config\n+++ b/data/defects4j_bugs/Math_14f/.defects4j.config\n@@ -1,3 +1,3 @@\n #File automatically generated by Defects4J\n pid=Math\n-vid=14b\n+vid=14f\ndiff --git a/data/defects4j_bugs/Math_14b/.git/HEAD b/data/defects4j_bugs/Math_14f/.git/HEAD\nindex c7f52ad..f3b6fc4 100644\n--- a/data/defects4j_bugs/Math_14b/.git/HEAD\n+++ b/data/defects4j_bugs/Math_14f/.git/HEAD\n@@ -1 +1 @@\n-8d55062d09da8c2a22d119d9bde6c29eebee738a\n+3c8a69d1139dec50632c8818277bf16dfd713fce\ndiff --git a/data/defects4j_bugs/Math_14b/.git/index b/data/defects4j_bugs/Math_14f/.git/index\nindex f37d118..c749b6a 100644\nBinary files a/data/defects4j_bugs/Math_14b/.git/index and b/data/defects4j_bugs/Math_14f/.git/index differ\ndiff --git a/data/defects4j_bugs/Math_14b/.git/logs/HEAD b/data/defects4j_bugs/Math_14f/.git/logs/HEAD\nindex 69a1145..f8c9a89 100644\n--- a/data/defects4j_bugs/Math_14b/.git/logs/HEAD\n+++ b/data/defects4j_bugs/Math_14f/.git/logs/HEAD\n@@ -1,9 +1,9 @@\n-0000000000000000000000000000000000000000 ab9b0b0c2d0913e7f2a894650255564a40b05277 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425590 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-math.git\n-ab9b0b0c2d0913e7f2a894650255564a40b05277 b07ecae3d60c4f0233f1a1d97eb35d4a678f39aa Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425590 -0700\tcheckout: moving from master to b07ecae3d60c4f0233f1a1d97eb35d4a678f39aa\n-b07ecae3d60c4f0233f1a1d97eb35d4a678f39aa 6966687e87998e6bc44320e15cdc741a1e0a1c14 defects4j <defects4j@localhost> 1761425591 -0700\tcommit: D4J_Math_14_POST_FIX_REVISION\n-6966687e87998e6bc44320e15cdc741a1e0a1c14 50d0d0edfbac3e2edfe14a4d4f7180daaba57fa7 defects4j <defects4j@localhost> 1761425591 -0700\tcommit: D4J_Math_14_POST_FIX_COMPILABLE\n-50d0d0edfbac3e2edfe14a4d4f7180daaba57fa7 8689b07589994a5a7e1716fa9b5dcb6d4a37f487 defects4j <defects4j@localhost> 1761425594 -0700\tcommit: D4J_Math_14_FIXED_VERSION\n-8689b07589994a5a7e1716fa9b5dcb6d4a37f487 8d55062d09da8c2a22d119d9bde6c29eebee738a defects4j <defects4j@localhost> 1761425594 -0700\tcommit: D4J_Math_14_BUGGY_VERSION\n-8d55062d09da8c2a22d119d9bde6c29eebee738a 6966687e87998e6bc44320e15cdc741a1e0a1c14 defects4j <defects4j@localhost> 1761425594 -0700\tcheckout: moving from 8d55062d09da8c2a22d119d9bde6c29eebee738a to D4J_Math_14_POST_FIX_REVISION\n-6966687e87998e6bc44320e15cdc741a1e0a1c14 7c479d3e751e070931b7fe0ecb7b71c113ccd05f defects4j <defects4j@localhost> 1761425594 -0700\tcommit: D4J_Math_14_PRE_FIX_REVISION\n-7c479d3e751e070931b7fe0ecb7b71c113ccd05f 8d55062d09da8c2a22d119d9bde6c29eebee738a defects4j <defects4j@localhost> 1761425594 -0700\tcheckout: moving from 7c479d3e751e070931b7fe0ecb7b71c113ccd05f to D4J_Math_14_BUGGY_VERSION\n+0000000000000000000000000000000000000000 ab9b0b0c2d0913e7f2a894650255564a40b05277 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425594 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-math.git\n+ab9b0b0c2d0913e7f2a894650255564a40b05277 b07ecae3d60c4f0233f1a1d97eb35d4a678f39aa Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425594 -0700\tcheckout: moving from master to b07ecae3d60c4f0233f1a1d97eb35d4a678f39aa\n+b07ecae3d60c4f0233f1a1d97eb35d4a678f39aa f957ae63d1cbf18381552e86e69d02e57f319dae defects4j <defects4j@localhost> 1761425595 -0700\tcommit: D4J_Math_14_POST_FIX_REVISION\n+f957ae63d1cbf18381552e86e69d02e57f319dae 0a83bb149e333360a2a2456dd5d83b03e7a8bc42 defects4j <defects4j@localhost> 1761425595 -0700\tcommit: D4J_Math_14_POST_FIX_COMPILABLE\n+0a83bb149e333360a2a2456dd5d83b03e7a8bc42 3c8a69d1139dec50632c8818277bf16dfd713fce defects4j <defects4j@localhost> 1761425598 -0700\tcommit: D4J_Math_14_FIXED_VERSION\n+3c8a69d1139dec50632c8818277bf16dfd713fce 880276381ef59f6c1b2b6afdcce0fbb0a10b2a83 defects4j <defects4j@localhost> 1761425598 -0700\tcommit: D4J_Math_14_BUGGY_VERSION\n+880276381ef59f6c1b2b6afdcce0fbb0a10b2a83 f957ae63d1cbf18381552e86e69d02e57f319dae defects4j <defects4j@localhost> 1761425598 -0700\tcheckout: moving from 880276381ef59f6c1b2b6afdcce0fbb0a10b2a83 to D4J_Math_14_POST_FIX_REVISION\n+f957ae63d1cbf18381552e86e69d02e57f319dae e400892c4f9d1de85ba171f85fc8fd688c525eb4 defects4j <defects4j@localhost> 1761425598 -0700\tcommit: D4J_Math_14_PRE_FIX_REVISION\n+e400892c4f9d1de85ba171f85fc8fd688c525eb4 3c8a69d1139dec50632c8818277bf16dfd713fce defects4j <defects4j@localhost> 1761425598 -0700\tcheckout: moving from e400892c4f9d1de85ba171f85fc8fd688c525eb4 to D4J_Math_14_FIXED_VERSION\ndiff --git a/data/defects4j_bugs/Math_14b/.git/logs/refs/heads/master b/data/defects4j_bugs/Math_14f/.git/logs/refs/heads/master\nindex 82ab1d8..73d9afc 100644\n--- a/data/defects4j_bugs/Math_14b/.git/logs/refs/heads/master\n+++ b/data/defects4j_bugs/Math_14f/.git/logs/refs/heads/master\n@@ -1 +1 @@\n-0000000000000000000000000000000000000000 ab9b0b0c2d0913e7f2a894650255564a40b05277 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425590 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-math.git\n+0000000000000000000000000000000000000000 ab9b0b0c2d0913e7f2a894650255564a40b05277 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425594 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-math.git\ndiff --git a/data/defects4j_bugs/Math_14b/.git/logs/refs/remotes/origin/HEAD b/data/defects4j_bugs/Math_14f/.git/logs/refs/remotes/origin/HEAD\nindex 82ab1d8..73d9afc 100644\n--- a/data/defects4j_bugs/Math_14b/.git/logs/refs/remotes/origin/HEAD\n+++ b/data/defects4j_bugs/Math_14f/.git/logs/refs/remotes/origin/HEAD\n@@ -1 +1 @@\n-0000000000000000000000000000000000000000 ab9b0b0c2d0913e7f2a894650255564a40b05277 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425590 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-math.git\n+0000000000000000000000000000000000000000 ab9b0b0c2d0913e7f2a894650255564a40b05277 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425594 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-math.git\ndiff --git a/data/defects4j_bugs/Math_14f/.git/objects/0a/83bb149e333360a2a2456dd5d83b03e7a8bc42 b/data/defects4j_bugs/Math_14f/.git/objects/0a/83bb149e333360a2a2456dd5d83b03e7a8bc42\nnew file mode 100644\nindex 0000000..7dc71d0\nBinary files /dev/null and b/data/defects4j_bugs/Math_14f/.git/objects/0a/83bb149e333360a2a2456dd5d83b03e7a8bc42 differ\ndiff --git a/data/defects4j_bugs/Math_14f/.git/objects/3c/8a69d1139dec50632c8818277bf16dfd713fce b/data/defects4j_bugs/Math_14f/.git/objects/3c/8a69d1139dec50632c8818277bf16dfd713fce\nnew file mode 100644\nindex 0000000..b5fa855\nBinary files /dev/null and b/data/defects4j_bugs/Math_14f/.git/objects/3c/8a69d1139dec50632c8818277bf16dfd713fce differ\ndiff --git a/data/defects4j_bugs/Math_14b/.git/objects/50/d0d0edfbac3e2edfe14a4d4f7180daaba57fa7 b/data/defects4j_bugs/Math_14b/.git/objects/50/d0d0edfbac3e2edfe14a4d4f7180daaba57fa7\ndeleted file mode 100644\nindex 5aa46ce..0000000\nBinary files a/data/defects4j_bugs/Math_14b/.git/objects/50/d0d0edfbac3e2edfe14a4d4f7180daaba57fa7 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Math_14b/.git/objects/69/66687e87998e6bc44320e15cdc741a1e0a1c14 b/data/defects4j_bugs/Math_14b/.git/objects/69/66687e87998e6bc44320e15cdc741a1e0a1c14\ndeleted file mode 100644\nindex 5449fbb..0000000\nBinary files a/data/defects4j_bugs/Math_14b/.git/objects/69/66687e87998e6bc44320e15cdc741a1e0a1c14 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Math_14b/.git/objects/7c/479d3e751e070931b7fe0ecb7b71c113ccd05f b/data/defects4j_bugs/Math_14b/.git/objects/7c/479d3e751e070931b7fe0ecb7b71c113ccd05f\ndeleted file mode 100644\nindex 7ea3681..0000000\n--- a/data/defects4j_bugs/Math_14b/.git/objects/7c/479d3e751e070931b7fe0ecb7b71c113ccd05f\n+++ /dev/null\n@@ -1 +0,0 @@\n-x\u0001j\u00021\u0010ayd6 A-\u0016\u000b0;;eM_\u000f\u007fv;W\u001f'\u0002C&\u0011\tHh\u0002(dnc\f\u00031gJ[fWrJek9RM\f\u00062\u0005\u0001\u0005tSiL\u0003/~r\u001dG]{\u0004\u00182e\u0010\u000eV\u0007u[|)R\u0002X\u078fq}to\u0007\u0004pIc\n\\ No newline at end of file\ndiff --git a/data/defects4j_bugs/Math_14b/.git/objects/86/89b07589994a5a7e1716fa9b5dcb6d4a37f487 b/data/defects4j_bugs/Math_14b/.git/objects/86/89b07589994a5a7e1716fa9b5dcb6d4a37f487\ndeleted file mode 100644\nindex 70d32df..0000000\nBinary files a/data/defects4j_bugs/Math_14b/.git/objects/86/89b07589994a5a7e1716fa9b5dcb6d4a37f487 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Math_14f/.git/objects/88/0276381ef59f6c1b2b6afdcce0fbb0a10b2a83 b/data/defects4j_bugs/Math_14f/.git/objects/88/0276381ef59f6c1b2b6afdcce0fbb0a10b2a83\nnew file mode 100644\nindex 0000000..42d4354\nBinary files /dev/null and b/data/defects4j_bugs/Math_14f/.git/objects/88/0276381ef59f6c1b2b6afdcce0fbb0a10b2a83 differ\ndiff --git a/data/defects4j_bugs/Math_14b/.git/objects/8d/55062d09da8c2a22d119d9bde6c29eebee738a b/data/defects4j_bugs/Math_14b/.git/objects/8d/55062d09da8c2a22d119d9bde6c29eebee738a\ndeleted file mode 100644\nindex d8c2823..0000000\nBinary files a/data/defects4j_bugs/Math_14b/.git/objects/8d/55062d09da8c2a22d119d9bde6c29eebee738a and /dev/null differ\ndiff --git a/data/defects4j_bugs/Math_14f/.git/objects/e4/00892c4f9d1de85ba171f85fc8fd688c525eb4 b/data/defects4j_bugs/Math_14f/.git/objects/e4/00892c4f9d1de85ba171f85fc8fd688c525eb4\nnew file mode 100644\nindex 0000000..b175caa\nBinary files /dev/null and b/data/defects4j_bugs/Math_14f/.git/objects/e4/00892c4f9d1de85ba171f85fc8fd688c525eb4 differ\ndiff --git a/data/defects4j_bugs/Math_14f/.git/objects/f9/57ae63d1cbf18381552e86e69d02e57f319dae b/data/defects4j_bugs/Math_14f/.git/objects/f9/57ae63d1cbf18381552e86e69d02e57f319dae\nnew file mode 100644\nindex 0000000..646454b\nBinary files /dev/null and b/data/defects4j_bugs/Math_14f/.git/objects/f9/57ae63d1cbf18381552e86e69d02e57f319dae differ\ndiff --git a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_BUGGY_VERSION b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_BUGGY_VERSION\nindex c7f52ad..1bda310 100644\n--- a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_BUGGY_VERSION\n+++ b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_BUGGY_VERSION\n@@ -1 +1 @@\n-8d55062d09da8c2a22d119d9bde6c29eebee738a\n+880276381ef59f6c1b2b6afdcce0fbb0a10b2a83\ndiff --git a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_FIXED_VERSION b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_FIXED_VERSION\nindex 0a9d218..f3b6fc4 100644\n--- a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_FIXED_VERSION\n+++ b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_FIXED_VERSION\n@@ -1 +1 @@\n-8689b07589994a5a7e1716fa9b5dcb6d4a37f487\n+3c8a69d1139dec50632c8818277bf16dfd713fce\ndiff --git a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_POST_FIX_COMPILABLE b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_POST_FIX_COMPILABLE\nindex 7617825..52f0695 100644\n--- a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_POST_FIX_COMPILABLE\n+++ b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_POST_FIX_COMPILABLE\n@@ -1 +1 @@\n-50d0d0edfbac3e2edfe14a4d4f7180daaba57fa7\n+0a83bb149e333360a2a2456dd5d83b03e7a8bc42\ndiff --git a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_POST_FIX_REVISION b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_POST_FIX_REVISION\nindex d555125..5397592 100644\n--- a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_POST_FIX_REVISION\n+++ b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_POST_FIX_REVISION\n@@ -1 +1 @@\n-6966687e87998e6bc44320e15cdc741a1e0a1c14\n+f957ae63d1cbf18381552e86e69d02e57f319dae\ndiff --git a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_PRE_FIX_REVISION b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_PRE_FIX_REVISION\nindex 0ae0bbe..c2147a3 100644\n--- a/data/defects4j_bugs/Math_14b/.git/refs/tags/D4J_Math_14_PRE_FIX_REVISION\n+++ b/data/defects4j_bugs/Math_14f/.git/refs/tags/D4J_Math_14_PRE_FIX_REVISION\n@@ -1 +1 @@\n-7c479d3e751e070931b7fe0ecb7b71c113ccd05f\n+e400892c4f9d1de85ba171f85fc8fd688c525eb4\ndiff --git a/data/defects4j_bugs/Math_14b/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/Weight.java b/data/defects4j_bugs/Math_14f/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/Weight.java\nindex b8225ad..aa3299a 100644\n--- a/data/defects4j_bugs/Math_14b/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/Weight.java\n+++ b/data/defects4j_bugs/Math_14f/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/Weight.java\n@@ -40,10 +40,7 @@ public class Weight implements OptimizationData {\n      */\n     public Weight(double[] weight) {\n         final int dim = weight.length;\n-        weightMatrix = org.apache.commons.math3.linear.MatrixUtils.createRealMatrix(dim, dim);\n-        for (int i = 0; i < dim; i++) {\n-            weightMatrix.setEntry(i, i, weight[i]);\n-        }\n+        weightMatrix = new DiagonalMatrix(weight);\n     }\n \n     /**\ndiff --git a/data/defects4j_bugs/Math_14b/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.java b/data/defects4j_bugs/Math_14f/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.java\nindex d12ebea..ef52943 100644\n--- a/data/defects4j_bugs/Math_14b/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.java\n+++ b/data/defects4j_bugs/Math_14f/src/main/java/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.java\n@@ -264,7 +264,16 @@ public abstract class AbstractLeastSquaresOptimizer\n      * @return the square-root of the weight matrix.\n      */\n     private RealMatrix squareRoot(RealMatrix m) {\n+        if (m instanceof DiagonalMatrix) {\n+            final int dim = m.getRowDimension();\n+            final RealMatrix sqrtM = new DiagonalMatrix(dim);\n+            for (int i = 0; i < dim; i++) {\n+                sqrtM.setEntry(i, i, FastMath.sqrt(m.getEntry(i, i)));\n+            }\n+            return sqrtM;\n+        } else {\n             final EigenDecomposition dec = new EigenDecomposition(m);\n             return dec.getSquareRoot();\n+        }\n     }\n }\ndiff --git a/data/defects4j_bugs/Math_14b/target/classes/org/apache/commons/math3/optim/nonlinear/vector/Weight.class b/data/defects4j_bugs/Math_14f/target/classes/org/apache/commons/math3/optim/nonlinear/vector/Weight.class\nindex 5a57566..755dfb3 100644\nBinary files a/data/defects4j_bugs/Math_14b/target/classes/org/apache/commons/math3/optim/nonlinear/vector/Weight.class and b/data/defects4j_bugs/Math_14f/target/classes/org/apache/commons/math3/optim/nonlinear/vector/Weight.class differ\ndiff --git a/data/defects4j_bugs/Math_14b/target/classes/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.class b/data/defects4j_bugs/Math_14f/target/classes/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.class\nindex ad692f6..4f95721 100644\nBinary files a/data/defects4j_bugs/Math_14b/target/classes/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.class and b/data/defects4j_bugs/Math_14f/target/classes/org/apache/commons/math3/optim/nonlinear/vector/jacobian/AbstractLeastSquaresOptimizer.class differ\n",
  "source_files_path": "data/defects4j_bugs/Math_14_source"
}