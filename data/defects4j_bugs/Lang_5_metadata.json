{
  "project": "Lang",
  "bug_id": 5,
  "buggy_compiled": true,
  "fixed_compiled": true,
  "buggy_metadata": {
    "classes.modified": [
      "org.apache.commons.lang3.LocaleUtils"
    ],
    "tests.trigger": [
      "org.apache.commons.lang3.LocaleUtilsTest::testLang865"
    ],
    "dir.src.classes": [
      "src/main/java"
    ]
  },
  "fixed_metadata": {
    "classes.modified": [
      "org.apache.commons.lang3.LocaleUtils"
    ],
    "tests.trigger": [
      "org.apache.commons.lang3.LocaleUtilsTest::testLang865"
    ],
    "dir.src.classes": [
      "src/main/java"
    ]
  },
  "diff": "diff --git a/data/defects4j_bugs/Lang_5b/.defects4j.config b/data/defects4j_bugs/Lang_5f/.defects4j.config\nindex 8404690..eb5eb36 100644\n--- a/data/defects4j_bugs/Lang_5b/.defects4j.config\n+++ b/data/defects4j_bugs/Lang_5f/.defects4j.config\n@@ -1,3 +1,3 @@\n #File automatically generated by Defects4J\n pid=Lang\n-vid=5b\n+vid=5f\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/HEAD b/data/defects4j_bugs/Lang_5f/.git/HEAD\nindex 57c517f..fbff7ae 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/HEAD\n+++ b/data/defects4j_bugs/Lang_5f/.git/HEAD\n@@ -1 +1 @@\n-1fbcbf3d85abb8601f882b1b7a689c170582a60d\n+d423b4b690303b4e26de00e12c49f87cacc742b2\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/index b/data/defects4j_bugs/Lang_5f/.git/index\nindex 4e1fcb5..4344766 100644\nBinary files a/data/defects4j_bugs/Lang_5b/.git/index and b/data/defects4j_bugs/Lang_5f/.git/index differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/logs/HEAD b/data/defects4j_bugs/Lang_5f/.git/logs/HEAD\nindex aedf995..0b7c0bd 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/logs/HEAD\n+++ b/data/defects4j_bugs/Lang_5f/.git/logs/HEAD\n@@ -1,9 +1,9 @@\n-0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425046 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n-eb4d185c675e12bd72b4e40250883274b18104d1 4d46f014fb8ee44386feb5fec52509f35d0e36ea Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425046 -0700\tcheckout: moving from master to 4d46f014fb8ee44386feb5fec52509f35d0e36ea\n-4d46f014fb8ee44386feb5fec52509f35d0e36ea 34b68ae2576729e5b3402eb5bad4df447e3cd1ed defects4j <defects4j@localhost> 1761425046 -0700\tcommit: D4J_Lang_5_POST_FIX_REVISION\n-34b68ae2576729e5b3402eb5bad4df447e3cd1ed a000692d62321e7e98f2c69e1c9e51e389f15fa4 defects4j <defects4j@localhost> 1761425046 -0700\tcommit: D4J_Lang_5_POST_FIX_COMPILABLE\n-a000692d62321e7e98f2c69e1c9e51e389f15fa4 619b5cb4ef724c6a47c2418354f5a80ae28977af defects4j <defects4j@localhost> 1761425049 -0700\tcommit: D4J_Lang_5_FIXED_VERSION\n-619b5cb4ef724c6a47c2418354f5a80ae28977af 1fbcbf3d85abb8601f882b1b7a689c170582a60d defects4j <defects4j@localhost> 1761425049 -0700\tcommit: D4J_Lang_5_BUGGY_VERSION\n-1fbcbf3d85abb8601f882b1b7a689c170582a60d 34b68ae2576729e5b3402eb5bad4df447e3cd1ed defects4j <defects4j@localhost> 1761425049 -0700\tcheckout: moving from 1fbcbf3d85abb8601f882b1b7a689c170582a60d to D4J_Lang_5_POST_FIX_REVISION\n-34b68ae2576729e5b3402eb5bad4df447e3cd1ed 9887a77f7f1058da08e312018c051ad4f06ece04 defects4j <defects4j@localhost> 1761425049 -0700\tcommit: D4J_Lang_5_PRE_FIX_REVISION\n-9887a77f7f1058da08e312018c051ad4f06ece04 1fbcbf3d85abb8601f882b1b7a689c170582a60d defects4j <defects4j@localhost> 1761425049 -0700\tcheckout: moving from 9887a77f7f1058da08e312018c051ad4f06ece04 to D4J_Lang_5_BUGGY_VERSION\n+0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425050 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n+eb4d185c675e12bd72b4e40250883274b18104d1 4d46f014fb8ee44386feb5fec52509f35d0e36ea Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425050 -0700\tcheckout: moving from master to 4d46f014fb8ee44386feb5fec52509f35d0e36ea\n+4d46f014fb8ee44386feb5fec52509f35d0e36ea eb8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06 defects4j <defects4j@localhost> 1761425050 -0700\tcommit: D4J_Lang_5_POST_FIX_REVISION\n+eb8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06 0c14c8db66c1d087055d07d5c64d08c6c68c3330 defects4j <defects4j@localhost> 1761425050 -0700\tcommit: D4J_Lang_5_POST_FIX_COMPILABLE\n+0c14c8db66c1d087055d07d5c64d08c6c68c3330 d423b4b690303b4e26de00e12c49f87cacc742b2 defects4j <defects4j@localhost> 1761425053 -0700\tcommit: D4J_Lang_5_FIXED_VERSION\n+d423b4b690303b4e26de00e12c49f87cacc742b2 574d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b defects4j <defects4j@localhost> 1761425053 -0700\tcommit: D4J_Lang_5_BUGGY_VERSION\n+574d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b eb8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06 defects4j <defects4j@localhost> 1761425053 -0700\tcheckout: moving from 574d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b to D4J_Lang_5_POST_FIX_REVISION\n+eb8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06 5ffd16a337e132d8300ddbea21dbb5785fcd459d defects4j <defects4j@localhost> 1761425053 -0700\tcommit: D4J_Lang_5_PRE_FIX_REVISION\n+5ffd16a337e132d8300ddbea21dbb5785fcd459d d423b4b690303b4e26de00e12c49f87cacc742b2 defects4j <defects4j@localhost> 1761425053 -0700\tcheckout: moving from 5ffd16a337e132d8300ddbea21dbb5785fcd459d to D4J_Lang_5_FIXED_VERSION\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/logs/refs/heads/master b/data/defects4j_bugs/Lang_5f/.git/logs/refs/heads/master\nindex 270c079..2c69fb8 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/logs/refs/heads/master\n+++ b/data/defects4j_bugs/Lang_5f/.git/logs/refs/heads/master\n@@ -1 +1 @@\n-0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425046 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n+0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425050 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/logs/refs/remotes/origin/HEAD b/data/defects4j_bugs/Lang_5f/.git/logs/refs/remotes/origin/HEAD\nindex 270c079..2c69fb8 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/logs/refs/remotes/origin/HEAD\n+++ b/data/defects4j_bugs/Lang_5f/.git/logs/refs/remotes/origin/HEAD\n@@ -1 +1 @@\n-0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425046 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\n+0000000000000000000000000000000000000000 eb4d185c675e12bd72b4e40250883274b18104d1 Aayush Kumar <lucifario@Aayushs-MacBook-Pro.local> 1761425050 -0700\tclone: from /Users/lucifario/Documents/Code/AIForCodeReview/defects4j/project_repos/commons-lang.git\ndiff --git a/data/defects4j_bugs/Lang_5f/.git/objects/0c/14c8db66c1d087055d07d5c64d08c6c68c3330 b/data/defects4j_bugs/Lang_5f/.git/objects/0c/14c8db66c1d087055d07d5c64d08c6c68c3330\nnew file mode 100644\nindex 0000000..70f7e50\nBinary files /dev/null and b/data/defects4j_bugs/Lang_5f/.git/objects/0c/14c8db66c1d087055d07d5c64d08c6c68c3330 differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/objects/1f/bcbf3d85abb8601f882b1b7a689c170582a60d b/data/defects4j_bugs/Lang_5b/.git/objects/1f/bcbf3d85abb8601f882b1b7a689c170582a60d\ndeleted file mode 100644\nindex 4a6de30..0000000\nBinary files a/data/defects4j_bugs/Lang_5b/.git/objects/1f/bcbf3d85abb8601f882b1b7a689c170582a60d and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/objects/34/b68ae2576729e5b3402eb5bad4df447e3cd1ed b/data/defects4j_bugs/Lang_5b/.git/objects/34/b68ae2576729e5b3402eb5bad4df447e3cd1ed\ndeleted file mode 100644\nindex c390a5c..0000000\nBinary files a/data/defects4j_bugs/Lang_5b/.git/objects/34/b68ae2576729e5b3402eb5bad4df447e3cd1ed and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_5f/.git/objects/57/4d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b b/data/defects4j_bugs/Lang_5f/.git/objects/57/4d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b\nnew file mode 100644\nindex 0000000..51d7385\nBinary files /dev/null and b/data/defects4j_bugs/Lang_5f/.git/objects/57/4d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b differ\ndiff --git a/data/defects4j_bugs/Lang_5f/.git/objects/5f/fd16a337e132d8300ddbea21dbb5785fcd459d b/data/defects4j_bugs/Lang_5f/.git/objects/5f/fd16a337e132d8300ddbea21dbb5785fcd459d\nnew file mode 100644\nindex 0000000..5fd7b6e\nBinary files /dev/null and b/data/defects4j_bugs/Lang_5f/.git/objects/5f/fd16a337e132d8300ddbea21dbb5785fcd459d differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/objects/61/9b5cb4ef724c6a47c2418354f5a80ae28977af b/data/defects4j_bugs/Lang_5b/.git/objects/61/9b5cb4ef724c6a47c2418354f5a80ae28977af\ndeleted file mode 100644\nindex dbbd9a2..0000000\nBinary files a/data/defects4j_bugs/Lang_5b/.git/objects/61/9b5cb4ef724c6a47c2418354f5a80ae28977af and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/objects/98/87a77f7f1058da08e312018c051ad4f06ece04 b/data/defects4j_bugs/Lang_5b/.git/objects/98/87a77f7f1058da08e312018c051ad4f06ece04\ndeleted file mode 100644\nindex 02e5111..0000000\nBinary files a/data/defects4j_bugs/Lang_5b/.git/objects/98/87a77f7f1058da08e312018c051ad4f06ece04 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/objects/a0/00692d62321e7e98f2c69e1c9e51e389f15fa4 b/data/defects4j_bugs/Lang_5b/.git/objects/a0/00692d62321e7e98f2c69e1c9e51e389f15fa4\ndeleted file mode 100644\nindex 4562165..0000000\nBinary files a/data/defects4j_bugs/Lang_5b/.git/objects/a0/00692d62321e7e98f2c69e1c9e51e389f15fa4 and /dev/null differ\ndiff --git a/data/defects4j_bugs/Lang_5f/.git/objects/d4/23b4b690303b4e26de00e12c49f87cacc742b2 b/data/defects4j_bugs/Lang_5f/.git/objects/d4/23b4b690303b4e26de00e12c49f87cacc742b2\nnew file mode 100644\nindex 0000000..af8c05e\nBinary files /dev/null and b/data/defects4j_bugs/Lang_5f/.git/objects/d4/23b4b690303b4e26de00e12c49f87cacc742b2 differ\ndiff --git a/data/defects4j_bugs/Lang_5f/.git/objects/eb/8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06 b/data/defects4j_bugs/Lang_5f/.git/objects/eb/8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06\nnew file mode 100644\nindex 0000000..ce0fe8b\nBinary files /dev/null and b/data/defects4j_bugs/Lang_5f/.git/objects/eb/8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06 differ\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_BUGGY_VERSION b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_BUGGY_VERSION\nindex 57c517f..d2d1ccc 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_BUGGY_VERSION\n+++ b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_BUGGY_VERSION\n@@ -1 +1 @@\n-1fbcbf3d85abb8601f882b1b7a689c170582a60d\n+574d9cdbd847c70f88cc7d0d6ee0a3f0f90a1d2b\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_FIXED_VERSION b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_FIXED_VERSION\nindex 7d668ba..fbff7ae 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_FIXED_VERSION\n+++ b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_FIXED_VERSION\n@@ -1 +1 @@\n-619b5cb4ef724c6a47c2418354f5a80ae28977af\n+d423b4b690303b4e26de00e12c49f87cacc742b2\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_POST_FIX_COMPILABLE b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_POST_FIX_COMPILABLE\nindex ab3d287..bb352d9 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_POST_FIX_COMPILABLE\n+++ b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_POST_FIX_COMPILABLE\n@@ -1 +1 @@\n-a000692d62321e7e98f2c69e1c9e51e389f15fa4\n+0c14c8db66c1d087055d07d5c64d08c6c68c3330\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_POST_FIX_REVISION b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_POST_FIX_REVISION\nindex e8c3b1c..4503664 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_POST_FIX_REVISION\n+++ b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_POST_FIX_REVISION\n@@ -1 +1 @@\n-34b68ae2576729e5b3402eb5bad4df447e3cd1ed\n+eb8b62a7f02f3aa6bad0b9bad68b4acd0e3f2b06\ndiff --git a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_PRE_FIX_REVISION b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_PRE_FIX_REVISION\nindex ed1d5f9..95f7d8d 100644\n--- a/data/defects4j_bugs/Lang_5b/.git/refs/tags/D4J_Lang_5_PRE_FIX_REVISION\n+++ b/data/defects4j_bugs/Lang_5f/.git/refs/tags/D4J_Lang_5_PRE_FIX_REVISION\n@@ -1 +1 @@\n-9887a77f7f1058da08e312018c051ad4f06ece04\n+5ffd16a337e132d8300ddbea21dbb5785fcd459d\ndiff --git a/data/defects4j_bugs/Lang_5b/src/main/java/org/apache/commons/lang3/LocaleUtils.java b/data/defects4j_bugs/Lang_5f/src/main/java/org/apache/commons/lang3/LocaleUtils.java\nindex bc779d0..a7a6051 100644\n--- a/data/defects4j_bugs/Lang_5b/src/main/java/org/apache/commons/lang3/LocaleUtils.java\n+++ b/data/defects4j_bugs/Lang_5f/src/main/java/org/apache/commons/lang3/LocaleUtils.java\n@@ -94,6 +94,26 @@ public class LocaleUtils {\n             throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n         }\n         final char ch0 = str.charAt(0);\n+        if (ch0 == '_') {\n+            if (len < 3) {\n+                throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n+            }\n+            final char ch1 = str.charAt(1);\n+            final char ch2 = str.charAt(2);\n+            if (!Character.isUpperCase(ch1) || !Character.isUpperCase(ch2)) {\n+                throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n+            }\n+            if (len == 3) {\n+                return new Locale(\"\", str.substring(1, 3));\n+            }\n+            if (len < 5) {\n+                throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n+            }\n+            if (str.charAt(3) != '_') {\n+                throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n+            }\n+            return new Locale(\"\", str.substring(1, 3), str.substring(4));\n+        } else {\n             final char ch1 = str.charAt(1);\n             if (!Character.isLowerCase(ch0) || !Character.isLowerCase(ch1)) {\n                 throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n@@ -125,6 +145,7 @@ public class LocaleUtils {\n                 throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n             }\n             return new Locale(str.substring(0, 2), str.substring(3, 5), str.substring(6));\n+        }\n     }\n \n     //-----------------------------------------------------------------------\ndiff --git a/data/defects4j_bugs/Lang_5b/target/classes/org/apache/commons/lang3/LocaleUtils$SyncAvoid.class b/data/defects4j_bugs/Lang_5f/target/classes/org/apache/commons/lang3/LocaleUtils$SyncAvoid.class\nindex 254d438..e765a21 100644\nBinary files a/data/defects4j_bugs/Lang_5b/target/classes/org/apache/commons/lang3/LocaleUtils$SyncAvoid.class and b/data/defects4j_bugs/Lang_5f/target/classes/org/apache/commons/lang3/LocaleUtils$SyncAvoid.class differ\ndiff --git a/data/defects4j_bugs/Lang_5b/target/classes/org/apache/commons/lang3/LocaleUtils.class b/data/defects4j_bugs/Lang_5f/target/classes/org/apache/commons/lang3/LocaleUtils.class\nindex 42338c0..0d235c8 100644\nBinary files a/data/defects4j_bugs/Lang_5b/target/classes/org/apache/commons/lang3/LocaleUtils.class and b/data/defects4j_bugs/Lang_5f/target/classes/org/apache/commons/lang3/LocaleUtils.class differ\n",
  "source_files_path": "data/defects4j_bugs/Lang_5_source"
}