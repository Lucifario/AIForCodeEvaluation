{
  "id": 8017,
  "repository": "google/guava",
  "title": "Use more static imports.",
  "body": "Use more static imports.\n\nAlso, delete `Maps.keyFunction` and `valueFunction` in favor of method `Entry::getKey` and `Entry::getValue`.\n\nRELNOTES=n/a\n",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-09-23T17:51:10+00:00",
  "created_at": "2025-09-23T17:19:57+00:00",
  "updated_at": "2025-09-23T17:51:10+00:00",
  "author": "copybara-service[bot]",
  "reviewers": [],
  "base_sha": "3e1d0f4ff367a34910ecc8d3698bd16665ddf6bc",
  "head_sha": "643b5e801de308c1fcad6f4ebbf9436b99b22cd9",
  "review_comments": [],
  "pr_comments": [],
  "files_changed": [
    {
      "filename": "android/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -17,6 +17,7 @@\n package com.google.common.testing;\n \n import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n import static java.util.concurrent.TimeUnit.SECONDS;\n@@ -48,7 +49,6 @@\n import com.google.common.collect.ImmutableSortedMultiset;\n import com.google.common.collect.ImmutableSortedSet;\n import com.google.common.collect.ImmutableTable;\n-import com.google.common.collect.Iterators;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.MapDifference;\n import com.google.common.collect.Maps;\n@@ -242,7 +242,7 @@ private static MatchResult createMatchResult() {\n           .put(CharSink.class, NullByteSink.INSTANCE.asCharSink(UTF_8))\n           // All collections are immutable empty. So safe for any type parameter.\n           .put(Iterator.class, ImmutableSet.of().iterator())\n-          .put(PeekingIterator.class, Iterators.peekingIterator(ImmutableSet.of().iterator()))\n+          .put(PeekingIterator.class, peekingIterator(ImmutableSet.of().iterator()))\n           .put(ListIterator.class, ImmutableList.of().listIterator())\n           .put(Iterable.class, ImmutableSet.of())\n           .put(Collection.class, ImmutableList.of())"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/collect/IteratorsTest.java",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "patch": "@@ -29,6 +29,7 @@\n import static com.google.common.collect.Iterators.get;\n import static com.google.common.collect.Iterators.getLast;\n import static com.google.common.collect.Iterators.getOnlyElement;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Iterators.singletonIterator;\n import static com.google.common.collect.Iterators.tryFind;\n import static com.google.common.collect.Lists.newArrayList;\n@@ -1543,10 +1544,10 @@ public void testUnmodifiableIteratorShortCircuit() {\n   @SuppressWarnings({\"deprecation\", \"InlineMeInliner\"}) // test of a deprecated method\n   public void testPeekingIteratorShortCircuit() {\n     Iterator<String> nonpeek = Lists.newArrayList(\"a\", \"b\", \"c\").iterator();\n-    PeekingIterator<String> peek = Iterators.peekingIterator(nonpeek);\n+    PeekingIterator<String> peek = peekingIterator(nonpeek);\n     assertNotSame(peek, nonpeek);\n-    assertSame(peek, Iterators.peekingIterator(peek));\n-    assertSame(peek, Iterators.peekingIterator((Iterator<String>) peek));\n+    assertSame(peek, peekingIterator(peek));\n+    assertSame(peek, peekingIterator((Iterator<String>) peek));\n   }\n \n   public void testMergeSorted_stable_issue5773Example() {"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "patch": "@@ -68,7 +68,7 @@ protected Iterator<T> newTargetIterator() {\n       // make copy from master to verify later\n       targetList = Lists.newArrayList(master);\n       Iterator<T> iterator = targetList.iterator();\n-      return Iterators.peekingIterator(iterator);\n+      return peekingIterator(iterator);\n     }\n \n     @Override\n@@ -88,7 +88,7 @@ protected void verify(List<T> elements) {\n       @Override\n       protected Iterator<T> newTargetIterator() {\n         Iterator<T> iterator = unmodifiableList(list).iterator();\n-        return Iterators.peekingIterator(iterator);\n+        return peekingIterator(iterator);\n       }\n     }.test();\n   }\n@@ -115,15 +115,15 @@ public void testPeekingIteratorAcceptsNullElements() {\n   public void testPeekOnEmptyList() {\n     List<?> list = emptyList();\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertThrows(NoSuchElementException.class, () -> peekingIterator.peek());\n   }\n \n   public void testPeekDoesntChangeIteration() {\n     List<?> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"Should be able to peek() at first element\", \"A\", peekingIterator.peek());\n     assertEquals(\n@@ -151,7 +151,7 @@ public void testPeekDoesntChangeIteration() {\n   public void testCantRemoveAfterPeek() {\n     List<String> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<String> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"A\", peekingIterator.next());\n     assertEquals(\"B\", peekingIterator.peek());"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -105,7 +105,7 @@ public void testCatchingAsync() throws Exception {\n                 new AsyncFunction<Throwable, Class<?>>() {\n                   @Override\n                   public ListenableFuture<Class<?>> apply(Throwable input) {\n-                    return Futures.immediateFuture(input.getClass());\n+                    return immediateFuture(input.getClass());\n                   }\n                 },\n                 directExecutor());"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableList.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -256,7 +256,7 @@ public static <E> ImmutableList<E> copyOf(Collection<? extends E> elements) {\n     if (elements instanceof ImmutableCollection) {\n       @SuppressWarnings(\"unchecked\") // all supported methods are covariant\n       ImmutableList<E> list = ((ImmutableCollection<E>) elements).asList();\n-      return list.isPartialView() ? ImmutableList.asImmutableList(list.toArray()) : list;\n+      return list.isPartialView() ? asImmutableList(list.toArray()) : list;\n     }\n     return construct(elements.toArray());\n   }"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableMap.java",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "patch": "@@ -661,8 +661,7 @@ static <V> void sortEntries(\n         V value = (V) requireNonNull(alternatingKeysAndValues[2 * i + 1]);\n         entries[i] = new AbstractMap.SimpleImmutableEntry<Object, V>(key, value);\n       }\n-      Arrays.sort(\n-          entries, 0, size, Ordering.from(valueComparator).onResultOf(Maps.<V>valueFunction()));\n+      Arrays.sort(entries, 0, size, Ordering.from(valueComparator).onResultOf(Entry::getValue));\n       for (int i = 0; i < size; i++) {\n         alternatingKeysAndValues[2 * i] = entries[i].getKey();\n         alternatingKeysAndValues[2 * i + 1] = entries[i].getValue();"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableMapEntrySet.java",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "patch": "@@ -16,6 +16,8 @@\n \n package com.google.common.collect;\n \n+import static com.google.common.collect.ImmutableList.asImmutableList;\n+\n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n@@ -38,7 +40,7 @@ static final class RegularEntrySet<K, V> extends ImmutableMapEntrySet<K, V> {\n     private final transient ImmutableList<Entry<K, V>> entries;\n \n     RegularEntrySet(ImmutableMap<K, V> map, Entry<K, V>[] entries) {\n-      this(map, ImmutableList.asImmutableList(entries));\n+      this(map, asImmutableList(entries));\n     }\n \n     RegularEntrySet(ImmutableMap<K, V> map, ImmutableList<Entry<K, V>> entries) {"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableRangeMap.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "patch": "@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkElementIndex;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Maps.immutableEntry;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static java.util.Collections.sort;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -293,7 +294,7 @@ public ImmutableMap<Range<K>, V> asMapOfRanges() {\n       return ImmutableMap.of();\n     }\n     RegularImmutableSortedSet<Range<K>> rangeSet =\n-        new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+        new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n     return new ImmutableSortedMap<>(rangeSet, values);\n   }\n "
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableRangeSet.java",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "patch": "@@ -19,6 +19,8 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterables.getOnlyElement;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_HIGHER;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_LOWER;\n import static com.google.common.collect.SortedLists.KeyPresentBehavior.ANY_PRESENT;\n@@ -309,7 +311,7 @@ public ImmutableSet<Range<C>> asRanges() {\n     if (ranges.isEmpty()) {\n       return ImmutableSet.of();\n     }\n-    return new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+    return new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n   }\n \n   @Override\n@@ -829,8 +831,8 @@ Builder<C> combine(Builder<C> builder) {\n     public ImmutableRangeSet<C> build() {\n       ImmutableList.Builder<Range<C>> mergedRangesBuilder =\n           new ImmutableList.Builder<>(ranges.size());\n-      sort(ranges, Range.rangeLexOrdering());\n-      PeekingIterator<Range<C>> peekingItr = Iterators.peekingIterator(ranges.iterator());\n+      sort(ranges, rangeLexOrdering());\n+      PeekingIterator<Range<C>> peekingItr = peekingIterator(ranges.iterator());\n       while (peekingItr.hasNext()) {\n         Range<C> range = peekingItr.next();\n         while (peekingItr.hasNext()) {"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableSet.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "patch": "@@ -19,6 +19,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.CollectPreconditions.checkNonnegative;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.ObjectArrays.checkElementNotNull;\n import static java.lang.Math.max;\n import static java.util.Objects.requireNonNull;\n@@ -378,7 +379,7 @@ public ImmutableList<E> asList() {\n   }\n \n   ImmutableList<E> createAsList() {\n-    return ImmutableList.asImmutableList(toArray());\n+    return asImmutableList(toArray());\n   }\n \n   /*"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/ImmutableSortedSet.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -18,6 +18,7 @@\n \n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.ObjectArrays.checkElementsNotNull;\n import static java.lang.System.arraycopy;\n import static java.util.Arrays.sort;\n@@ -381,8 +382,7 @@ static <E> ImmutableSortedSet<E> construct(\n       // large array relative to the number of elements, so we cap the ratio.\n       contents = Arrays.copyOf(contents, uniques);\n     }\n-    return new RegularImmutableSortedSet<>(\n-        ImmutableList.asImmutableList(contents, uniques), comparator);\n+    return new RegularImmutableSortedSet<>(asImmutableList(contents, uniques), comparator);\n   }\n \n   /**"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/Maps.java",
      "status": "modified",
      "additions": 2,
      "deletions": 27,
      "changes": 29,
      "patch": "@@ -91,31 +91,6 @@\n public final class Maps {\n   private Maps() {}\n \n-  private enum EntryFunction implements Function<Entry<?, ?>, @Nullable Object> {\n-    KEY {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getKey();\n-      }\n-    },\n-    VALUE {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getValue();\n-      }\n-    };\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <K extends @Nullable Object> Function<Entry<K, ?>, K> keyFunction() {\n-    return (Function) EntryFunction.KEY;\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <V extends @Nullable Object> Function<Entry<?, V>, V> valueFunction() {\n-    return (Function) EntryFunction.VALUE;\n-  }\n-\n   static <K extends @Nullable Object, V extends @Nullable Object> Iterator<K> keyIterator(\n       Iterator<Entry<K, V>> entryIterator) {\n     return new TransformedIterator<Entry<K, V>, K>(entryIterator) {\n@@ -2294,12 +2269,12 @@ protected NavigableMap<K, V1> fromMap() {\n \n   static <K extends @Nullable Object> Predicate<Entry<K, ?>> keyPredicateOnEntries(\n       Predicate<? super K> keyPredicate) {\n-    return compose(keyPredicate, keyFunction());\n+    return compose(keyPredicate, Entry::getKey);\n   }\n \n   static <V extends @Nullable Object> Predicate<Entry<?, V>> valuePredicateOnEntries(\n       Predicate<? super V> valuePredicate) {\n-    return compose(valuePredicate, valueFunction());\n+    return compose(valuePredicate, Entry::getValue);\n   }\n \n   /**"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/Ordering.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -461,7 +461,7 @@ public <S extends T> Ordering<S> reverse() {\n   }\n \n   <T2 extends T> Ordering<Entry<T2, ?>> onKeys() {\n-    return onResultOf(Maps.keyFunction());\n+    return onResultOf(Entry::getKey);\n   }\n \n   /**"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/RegularImmutableAsList.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -39,11 +39,11 @@ class RegularImmutableAsList<E> extends ImmutableAsList<E> {\n   }\n \n   RegularImmutableAsList(ImmutableCollection<E> delegate, Object[] array) {\n-    this(delegate, ImmutableList.asImmutableList(array));\n+    this(delegate, asImmutableList(array));\n   }\n \n   RegularImmutableAsList(ImmutableCollection<E> delegate, Object[] array, int size) {\n-    this(delegate, ImmutableList.<E>asImmutableList(array, size));\n+    this(delegate, asImmutableList(array, size));\n   }\n \n   @Override"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/TreeRangeMap.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "patch": "@@ -627,7 +627,7 @@ public boolean remove(@Nullable Object o) {\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.keyFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getKey));\n           }\n         };\n       }\n@@ -694,12 +694,12 @@ public Collection<V> values() {\n         return new Maps.Values<Range<K>, V>(this) {\n           @Override\n           public boolean removeAll(Collection<?> c) {\n-            return removeEntryIf(compose(in(c), Maps.valueFunction()));\n+            return removeEntryIf(compose(in(c), Entry::getValue));\n           }\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.valueFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getValue));\n           }\n         };\n       }"
    },
    {
      "filename": "android/guava/src/com/google/common/collect/TreeRangeSet.java",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "patch": "@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Maps.immutableEntry;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -411,7 +412,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n       } else {\n         candidates = rangesByLowerBound.descendingMap().values();\n       }\n-      PeekingIterator<Range<C>> backingItr = Iterators.peekingIterator(candidates.iterator());\n+      PeekingIterator<Range<C>> backingItr = peekingIterator(candidates.iterator());\n       if (backingItr.hasNext()\n           && upperBoundWindow.upperBound.isLessThan(backingItr.peek().upperBound)) {\n         backingItr.next();\n@@ -524,7 +525,7 @@ Iterator<Entry<Cut<C>, Range<C>>> entryIterator() {\n       } else {\n         positiveRanges = positiveRangesByUpperBound.values();\n       }\n-      PeekingIterator<Range<C>> positiveItr = Iterators.peekingIterator(positiveRanges.iterator());\n+      PeekingIterator<Range<C>> positiveItr = peekingIterator(positiveRanges.iterator());\n       Cut<C> firstComplementRangeLowerBound;\n       if (complementLowerBoundWindow.contains(Cut.belowAll())\n           && (!positiveItr.hasNext() || positiveItr.peek().lowerBound != Cut.<C>belowAll())) {\n@@ -575,7 +576,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n           complementLowerBoundWindow.hasUpperBound()\n               && complementLowerBoundWindow.upperBoundType() == BoundType.CLOSED;\n       PeekingIterator<Range<C>> positiveItr =\n-          Iterators.peekingIterator(\n+          peekingIterator(\n               positiveRangesByUpperBound\n                   .headMap(startingPoint, inclusive)\n                   .descendingMap()"
    },
    {
      "filename": "guava-gwt/src-super/com/google/common/collect/super/com/google/common/collect/ImmutableMap.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -312,7 +312,7 @@ public ImmutableMap<K, V> build() {\n \n     private ImmutableMap<K, V> build(boolean throwIfDuplicateKeys) {\n       if (valueComparator != null) {\n-        Collections.sort(entries, Ordering.from(valueComparator).onResultOf(Maps.valueFunction()));\n+        Collections.sort(entries, Ordering.from(valueComparator).onResultOf(Entry::getValue));\n       }\n       return fromEntryList(throwIfDuplicateKeys, entries);\n     }"
    },
    {
      "filename": "guava-testlib/src/com/google/common/testing/ArbitraryInstances.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -17,6 +17,7 @@\n package com.google.common.testing;\n \n import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n import static java.util.concurrent.TimeUnit.SECONDS;\n@@ -48,7 +49,6 @@\n import com.google.common.collect.ImmutableSortedMultiset;\n import com.google.common.collect.ImmutableSortedSet;\n import com.google.common.collect.ImmutableTable;\n-import com.google.common.collect.Iterators;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.MapDifference;\n import com.google.common.collect.Maps;\n@@ -251,7 +251,7 @@ private static MatchResult createMatchResult() {\n           .put(CharSink.class, NullByteSink.INSTANCE.asCharSink(UTF_8))\n           // All collections are immutable empty. So safe for any type parameter.\n           .put(Iterator.class, ImmutableSet.of().iterator())\n-          .put(PeekingIterator.class, Iterators.peekingIterator(ImmutableSet.of().iterator()))\n+          .put(PeekingIterator.class, peekingIterator(ImmutableSet.of().iterator()))\n           .put(ListIterator.class, ImmutableList.of().listIterator())\n           .put(Iterable.class, ImmutableSet.of())\n           .put(Collection.class, ImmutableList.of())"
    },
    {
      "filename": "guava-tests/test/com/google/common/collect/IteratorsTest.java",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "patch": "@@ -29,6 +29,7 @@\n import static com.google.common.collect.Iterators.get;\n import static com.google.common.collect.Iterators.getLast;\n import static com.google.common.collect.Iterators.getOnlyElement;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Iterators.singletonIterator;\n import static com.google.common.collect.Iterators.tryFind;\n import static com.google.common.collect.Lists.newArrayList;\n@@ -1543,10 +1544,10 @@ public void testUnmodifiableIteratorShortCircuit() {\n   @SuppressWarnings({\"deprecation\", \"InlineMeInliner\"}) // test of a deprecated method\n   public void testPeekingIteratorShortCircuit() {\n     Iterator<String> nonpeek = Lists.newArrayList(\"a\", \"b\", \"c\").iterator();\n-    PeekingIterator<String> peek = Iterators.peekingIterator(nonpeek);\n+    PeekingIterator<String> peek = peekingIterator(nonpeek);\n     assertNotSame(peek, nonpeek);\n-    assertSame(peek, Iterators.peekingIterator(peek));\n-    assertSame(peek, Iterators.peekingIterator((Iterator<String>) peek));\n+    assertSame(peek, peekingIterator(peek));\n+    assertSame(peek, peekingIterator((Iterator<String>) peek));\n   }\n \n   public void testMergeSorted_stable_issue5773Example() {"
    },
    {
      "filename": "guava-tests/test/com/google/common/collect/PeekingIteratorTest.java",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "patch": "@@ -68,7 +68,7 @@ protected Iterator<T> newTargetIterator() {\n       // make copy from master to verify later\n       targetList = Lists.newArrayList(master);\n       Iterator<T> iterator = targetList.iterator();\n-      return Iterators.peekingIterator(iterator);\n+      return peekingIterator(iterator);\n     }\n \n     @Override\n@@ -88,7 +88,7 @@ protected void verify(List<T> elements) {\n       @Override\n       protected Iterator<T> newTargetIterator() {\n         Iterator<T> iterator = unmodifiableList(list).iterator();\n-        return Iterators.peekingIterator(iterator);\n+        return peekingIterator(iterator);\n       }\n     }.test();\n   }\n@@ -115,15 +115,15 @@ public void testPeekingIteratorAcceptsNullElements() {\n   public void testPeekOnEmptyList() {\n     List<?> list = emptyList();\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertThrows(NoSuchElementException.class, () -> peekingIterator.peek());\n   }\n \n   public void testPeekDoesntChangeIteration() {\n     List<?> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"Should be able to peek() at first element\", \"A\", peekingIterator.peek());\n     assertEquals(\n@@ -151,7 +151,7 @@ public void testPeekDoesntChangeIteration() {\n   public void testCantRemoveAfterPeek() {\n     List<String> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<String> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"A\", peekingIterator.next());\n     assertEquals(\"B\", peekingIterator.peek());"
    },
    {
      "filename": "guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -105,7 +105,7 @@ public void testCatchingAsync() throws Exception {\n                 new AsyncFunction<Throwable, Class<?>>() {\n                   @Override\n                   public ListenableFuture<Class<?>> apply(Throwable input) {\n-                    return Futures.immediateFuture(input.getClass());\n+                    return immediateFuture(input.getClass());\n                   }\n                 },\n                 directExecutor());"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableBiMap.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -473,7 +473,7 @@ public ImmutableBiMap<K, V> buildOrThrow() {\n                 (Entry<K, V>[]) entries, // Entries up to size are not null\n                 0,\n                 size,\n-                Ordering.from(valueComparator).onResultOf(Maps.valueFunction()));\n+                Ordering.from(valueComparator).onResultOf(Entry::getValue));\n           }\n           entriesUsed = true;\n           return RegularImmutableBiMap.fromEntryArray(size, entries);"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableList.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -259,7 +259,7 @@ public static <E> ImmutableList<E> copyOf(Collection<? extends E> elements) {\n     if (elements instanceof ImmutableCollection) {\n       @SuppressWarnings(\"unchecked\") // all supported methods are covariant\n       ImmutableList<E> list = ((ImmutableCollection<E>) elements).asList();\n-      return list.isPartialView() ? ImmutableList.asImmutableList(list.toArray()) : list;\n+      return list.isPartialView() ? asImmutableList(list.toArray()) : list;\n     }\n     return construct(elements.toArray());\n   }"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableMap.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -572,7 +572,7 @@ private ImmutableMap<K, V> build(boolean throwIfDuplicateKeys) {\n             nonNullEntries,\n             0,\n             localSize,\n-            Ordering.from(valueComparator).onResultOf(Maps.valueFunction()));\n+            Ordering.from(valueComparator).onResultOf(Entry::getValue));\n         localEntries = (@Nullable Entry<K, V>[]) nonNullEntries;\n       }\n       entriesUsed = true;"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableMapEntrySet.java",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "patch": "@@ -16,6 +16,8 @@\n \n package com.google.common.collect;\n \n+import static com.google.common.collect.ImmutableList.asImmutableList;\n+\n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n@@ -40,7 +42,7 @@ static final class RegularEntrySet<K, V> extends ImmutableMapEntrySet<K, V> {\n     private final transient ImmutableList<Entry<K, V>> entries;\n \n     RegularEntrySet(ImmutableMap<K, V> map, Entry<K, V>[] entries) {\n-      this(map, ImmutableList.asImmutableList(entries));\n+      this(map, asImmutableList(entries));\n     }\n \n     RegularEntrySet(ImmutableMap<K, V> map, ImmutableList<Entry<K, V>> entries) {"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableRangeMap.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "patch": "@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkElementIndex;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Maps.immutableEntry;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static java.util.Collections.sort;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -310,7 +311,7 @@ public ImmutableMap<Range<K>, V> asMapOfRanges() {\n       return ImmutableMap.of();\n     }\n     RegularImmutableSortedSet<Range<K>> rangeSet =\n-        new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+        new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n     return new ImmutableSortedMap<>(rangeSet, values);\n   }\n "
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableRangeSet.java",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "patch": "@@ -19,6 +19,8 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterables.getOnlyElement;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_HIGHER;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_LOWER;\n import static com.google.common.collect.SortedLists.KeyPresentBehavior.ANY_PRESENT;\n@@ -308,7 +310,7 @@ public ImmutableSet<Range<C>> asRanges() {\n     if (ranges.isEmpty()) {\n       return ImmutableSet.of();\n     }\n-    return new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+    return new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n   }\n \n   @Override\n@@ -828,8 +830,8 @@ Builder<C> combine(Builder<C> builder) {\n     public ImmutableRangeSet<C> build() {\n       ImmutableList.Builder<Range<C>> mergedRangesBuilder =\n           new ImmutableList.Builder<>(ranges.size());\n-      sort(ranges, Range.rangeLexOrdering());\n-      PeekingIterator<Range<C>> peekingItr = Iterators.peekingIterator(ranges.iterator());\n+      sort(ranges, rangeLexOrdering());\n+      PeekingIterator<Range<C>> peekingItr = peekingIterator(ranges.iterator());\n       while (peekingItr.hasNext()) {\n         Range<C> range = peekingItr.next();\n         while (peekingItr.hasNext()) {"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableSet.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -19,6 +19,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.CollectPreconditions.checkNonnegative;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.math.IntMath.sqrt;\n import static java.lang.Math.max;\n import static java.util.Objects.requireNonNull;\n@@ -978,8 +979,7 @@ ImmutableSet<E> build() {\n            */\n           return of(requireNonNull(dedupedElements[0]));\n         default:\n-          return new JdkBackedImmutableSet<>(\n-              delegate, ImmutableList.asImmutableList(dedupedElements, distinct));\n+          return new JdkBackedImmutableSet<>(delegate, asImmutableList(dedupedElements, distinct));\n       }\n     }\n   }"
    },
    {
      "filename": "guava/src/com/google/common/collect/ImmutableSortedSet.java",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "patch": "@@ -18,6 +18,7 @@\n \n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.ObjectArrays.checkElementsNotNull;\n import static java.lang.System.arraycopy;\n import static java.util.Arrays.sort;\n@@ -381,8 +382,7 @@ static <E> ImmutableSortedSet<E> construct(\n       }\n     }\n     Arrays.fill(contents, uniques, n, null);\n-    return new RegularImmutableSortedSet<>(\n-        ImmutableList.asImmutableList(contents, uniques), comparator);\n+    return new RegularImmutableSortedSet<>(asImmutableList(contents, uniques), comparator);\n   }\n \n   /**\n@@ -590,8 +590,7 @@ public ImmutableSortedSet<E> build() {\n         return emptySet(comparator);\n       } else {\n         forceCopy = true;\n-        return new RegularImmutableSortedSet<>(\n-            ImmutableList.asImmutableList(elements, n), comparator);\n+        return new RegularImmutableSortedSet<>(asImmutableList(elements, n), comparator);\n       }\n     }\n   }"
    },
    {
      "filename": "guava/src/com/google/common/collect/JdkBackedImmutableBiMap.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "patch": "@@ -15,6 +15,7 @@\n  */\n package com.google.common.collect;\n \n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.Maps.immutableEntry;\n import static java.util.Objects.requireNonNull;\n \n@@ -47,7 +48,7 @@ static <K, V> ImmutableBiMap<K, V> create(int n, @Nullable Entry<K, V>[] entryAr\n         throw conflictException(\"value\", oldKey + \"=\" + e.getValue(), entryArray[i]);\n       }\n     }\n-    ImmutableList<Entry<K, V>> entryList = ImmutableList.asImmutableList(entryArray, n);\n+    ImmutableList<Entry<K, V>> entryList = asImmutableList(entryArray, n);\n     return new JdkBackedImmutableBiMap<>(\n         entryList, forwardDelegate, backwardDelegate, /* inverse= */ null);\n   }"
    },
    {
      "filename": "guava/src/com/google/common/collect/JdkBackedImmutableMap.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "patch": "@@ -17,6 +17,7 @@\n package com.google.common.collect;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.RegularImmutableMap.makeImmutable;\n import static java.util.Objects.requireNonNull;\n \n@@ -82,7 +83,7 @@ static <K, V> ImmutableMap<K, V> create(\n       }\n       entryArray = newEntryArray;\n     }\n-    return new JdkBackedImmutableMap<>(delegateMap, ImmutableList.asImmutableList(entryArray, n));\n+    return new JdkBackedImmutableMap<>(delegateMap, asImmutableList(entryArray, n));\n   }\n \n   private final transient Map<K, V> delegateMap;"
    },
    {
      "filename": "guava/src/com/google/common/collect/JdkBackedImmutableMultiset.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -15,6 +15,7 @@\n package com.google.common.collect;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n \n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n@@ -52,8 +53,7 @@ static <E> ImmutableMultiset<E> create(Collection<? extends Entry<? extends E>>\n         entriesArray[i] = Multisets.immutableEntry(element, count);\n       }\n     }\n-    return new JdkBackedImmutableMultiset<>(\n-        delegateMap, ImmutableList.asImmutableList(entriesArray), size);\n+    return new JdkBackedImmutableMultiset<>(delegateMap, asImmutableList(entriesArray), size);\n   }\n \n   private JdkBackedImmutableMultiset("
    },
    {
      "filename": "guava/src/com/google/common/collect/Maps.java",
      "status": "modified",
      "additions": 2,
      "deletions": 27,
      "changes": 29,
      "patch": "@@ -96,31 +96,6 @@\n public final class Maps {\n   private Maps() {}\n \n-  private enum EntryFunction implements Function<Entry<?, ?>, @Nullable Object> {\n-    KEY {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getKey();\n-      }\n-    },\n-    VALUE {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getValue();\n-      }\n-    };\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <K extends @Nullable Object> Function<Entry<K, ?>, K> keyFunction() {\n-    return (Function) EntryFunction.KEY;\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <V extends @Nullable Object> Function<Entry<?, V>, V> valueFunction() {\n-    return (Function) EntryFunction.VALUE;\n-  }\n-\n   static <K extends @Nullable Object, V extends @Nullable Object> Iterator<K> keyIterator(\n       Iterator<Entry<K, V>> entryIterator) {\n     return new TransformedIterator<Entry<K, V>, K>(entryIterator) {\n@@ -2395,12 +2370,12 @@ protected NavigableMap<K, V1> fromMap() {\n \n   static <K extends @Nullable Object> Predicate<Entry<K, ?>> keyPredicateOnEntries(\n       Predicate<? super K> keyPredicate) {\n-    return compose(keyPredicate, keyFunction());\n+    return compose(keyPredicate, Entry::getKey);\n   }\n \n   static <V extends @Nullable Object> Predicate<Entry<?, V>> valuePredicateOnEntries(\n       Predicate<? super V> valuePredicate) {\n-    return compose(valuePredicate, valueFunction());\n+    return compose(valuePredicate, Entry::getValue);\n   }\n \n   /**"
    },
    {
      "filename": "guava/src/com/google/common/collect/Ordering.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -461,7 +461,7 @@ public <S extends T> Ordering<S> reverse() {\n   }\n \n   <T2 extends T> Ordering<Entry<T2, ?>> onKeys() {\n-    return onResultOf(Maps.keyFunction());\n+    return onResultOf(Entry::getKey);\n   }\n \n   /**"
    },
    {
      "filename": "guava/src/com/google/common/collect/RegularImmutableAsList.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -40,7 +40,7 @@ class RegularImmutableAsList<E> extends ImmutableAsList<E> {\n   }\n \n   RegularImmutableAsList(ImmutableCollection<E> delegate, Object[] array) {\n-    this(delegate, ImmutableList.asImmutableList(array));\n+    this(delegate, asImmutableList(array));\n   }\n \n   @Override"
    },
    {
      "filename": "guava/src/com/google/common/collect/RegularImmutableMultiset.java",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "patch": "@@ -15,6 +15,7 @@\n package com.google.common.collect;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n \n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n@@ -79,7 +80,7 @@ static <E> ImmutableMultiset<E> create(Collection<? extends Entry<? extends E>>\n     }\n \n     return hashFloodingDetected(hashTable)\n-        ? JdkBackedImmutableMultiset.create(ImmutableList.asImmutableList(entryArray))\n+        ? JdkBackedImmutableMultiset.create(asImmutableList(entryArray))\n         : new RegularImmutableMultiset<E>(\n             entryArray, hashTable, Ints.saturatedCast(size), hashCode, null);\n   }"
    },
    {
      "filename": "guava/src/com/google/common/collect/TreeRangeMap.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "patch": "@@ -730,7 +730,7 @@ public boolean remove(@Nullable Object o) {\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.keyFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getKey));\n           }\n         };\n       }\n@@ -797,12 +797,12 @@ public Collection<V> values() {\n         return new Maps.Values<Range<K>, V>(this) {\n           @Override\n           public boolean removeAll(Collection<?> c) {\n-            return removeEntryIf(compose(in(c), Maps.valueFunction()));\n+            return removeEntryIf(compose(in(c), Entry::getValue));\n           }\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.valueFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getValue));\n           }\n         };\n       }"
    },
    {
      "filename": "guava/src/com/google/common/collect/TreeRangeSet.java",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "patch": "@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Maps.immutableEntry;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -411,7 +412,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n       } else {\n         candidates = rangesByLowerBound.descendingMap().values();\n       }\n-      PeekingIterator<Range<C>> backingItr = Iterators.peekingIterator(candidates.iterator());\n+      PeekingIterator<Range<C>> backingItr = peekingIterator(candidates.iterator());\n       if (backingItr.hasNext()\n           && upperBoundWindow.upperBound.isLessThan(backingItr.peek().upperBound)) {\n         backingItr.next();\n@@ -524,7 +525,7 @@ Iterator<Entry<Cut<C>, Range<C>>> entryIterator() {\n       } else {\n         positiveRanges = positiveRangesByUpperBound.values();\n       }\n-      PeekingIterator<Range<C>> positiveItr = Iterators.peekingIterator(positiveRanges.iterator());\n+      PeekingIterator<Range<C>> positiveItr = peekingIterator(positiveRanges.iterator());\n       Cut<C> firstComplementRangeLowerBound;\n       if (complementLowerBoundWindow.contains(Cut.belowAll())\n           && (!positiveItr.hasNext() || positiveItr.peek().lowerBound != Cut.<C>belowAll())) {\n@@ -575,7 +576,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n           complementLowerBoundWindow.hasUpperBound()\n               && complementLowerBoundWindow.upperBoundType() == BoundType.CLOSED;\n       PeekingIterator<Range<C>> positiveItr =\n-          Iterators.peekingIterator(\n+          peekingIterator(\n               positiveRangesByUpperBound\n                   .headMap(startingPoint, inclusive)\n                   .descendingMap()"
    }
  ],
  "diff": "diff --git a/android/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java b/android/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java\nindex bc7aea37832f..0ecc76ae861a 100644\n--- a/android/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java\n+++ b/android/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java\n@@ -17,6 +17,7 @@\n package com.google.common.testing;\n \n import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n import static java.util.concurrent.TimeUnit.SECONDS;\n@@ -48,7 +49,6 @@\n import com.google.common.collect.ImmutableSortedMultiset;\n import com.google.common.collect.ImmutableSortedSet;\n import com.google.common.collect.ImmutableTable;\n-import com.google.common.collect.Iterators;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.MapDifference;\n import com.google.common.collect.Maps;\n@@ -242,7 +242,7 @@ private static MatchResult createMatchResult() {\n           .put(CharSink.class, NullByteSink.INSTANCE.asCharSink(UTF_8))\n           // All collections are immutable empty. So safe for any type parameter.\n           .put(Iterator.class, ImmutableSet.of().iterator())\n-          .put(PeekingIterator.class, Iterators.peekingIterator(ImmutableSet.of().iterator()))\n+          .put(PeekingIterator.class, peekingIterator(ImmutableSet.of().iterator()))\n           .put(ListIterator.class, ImmutableList.of().listIterator())\n           .put(Iterable.class, ImmutableSet.of())\n           .put(Collection.class, ImmutableList.of())\ndiff --git a/android/guava-tests/test/com/google/common/collect/IteratorsTest.java b/android/guava-tests/test/com/google/common/collect/IteratorsTest.java\nindex 330328c30a56..86454fe97485 100644\n--- a/android/guava-tests/test/com/google/common/collect/IteratorsTest.java\n+++ b/android/guava-tests/test/com/google/common/collect/IteratorsTest.java\n@@ -29,6 +29,7 @@\n import static com.google.common.collect.Iterators.get;\n import static com.google.common.collect.Iterators.getLast;\n import static com.google.common.collect.Iterators.getOnlyElement;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Iterators.singletonIterator;\n import static com.google.common.collect.Iterators.tryFind;\n import static com.google.common.collect.Lists.newArrayList;\n@@ -1543,10 +1544,10 @@ public void testUnmodifiableIteratorShortCircuit() {\n   @SuppressWarnings({\"deprecation\", \"InlineMeInliner\"}) // test of a deprecated method\n   public void testPeekingIteratorShortCircuit() {\n     Iterator<String> nonpeek = Lists.newArrayList(\"a\", \"b\", \"c\").iterator();\n-    PeekingIterator<String> peek = Iterators.peekingIterator(nonpeek);\n+    PeekingIterator<String> peek = peekingIterator(nonpeek);\n     assertNotSame(peek, nonpeek);\n-    assertSame(peek, Iterators.peekingIterator(peek));\n-    assertSame(peek, Iterators.peekingIterator((Iterator<String>) peek));\n+    assertSame(peek, peekingIterator(peek));\n+    assertSame(peek, peekingIterator((Iterator<String>) peek));\n   }\n \n   public void testMergeSorted_stable_issue5773Example() {\ndiff --git a/android/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java b/android/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java\nindex ff284a10ec5a..fae3d9bdd673 100644\n--- a/android/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java\n+++ b/android/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java\n@@ -68,7 +68,7 @@ protected Iterator<T> newTargetIterator() {\n       // make copy from master to verify later\n       targetList = Lists.newArrayList(master);\n       Iterator<T> iterator = targetList.iterator();\n-      return Iterators.peekingIterator(iterator);\n+      return peekingIterator(iterator);\n     }\n \n     @Override\n@@ -88,7 +88,7 @@ protected void verify(List<T> elements) {\n       @Override\n       protected Iterator<T> newTargetIterator() {\n         Iterator<T> iterator = unmodifiableList(list).iterator();\n-        return Iterators.peekingIterator(iterator);\n+        return peekingIterator(iterator);\n       }\n     }.test();\n   }\n@@ -115,7 +115,7 @@ public void testPeekingIteratorAcceptsNullElements() {\n   public void testPeekOnEmptyList() {\n     List<?> list = emptyList();\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertThrows(NoSuchElementException.class, () -> peekingIterator.peek());\n   }\n@@ -123,7 +123,7 @@ public void testPeekOnEmptyList() {\n   public void testPeekDoesntChangeIteration() {\n     List<?> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"Should be able to peek() at first element\", \"A\", peekingIterator.peek());\n     assertEquals(\n@@ -151,7 +151,7 @@ public void testPeekDoesntChangeIteration() {\n   public void testCantRemoveAfterPeek() {\n     List<String> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<String> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"A\", peekingIterator.next());\n     assertEquals(\"B\", peekingIterator.peek());\ndiff --git a/android/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java b/android/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java\nindex 7cb128962b0b..90b037d87ffd 100644\n--- a/android/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java\n+++ b/android/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java\n@@ -105,7 +105,7 @@ public void testCatchingAsync() throws Exception {\n                 new AsyncFunction<Throwable, Class<?>>() {\n                   @Override\n                   public ListenableFuture<Class<?>> apply(Throwable input) {\n-                    return Futures.immediateFuture(input.getClass());\n+                    return immediateFuture(input.getClass());\n                   }\n                 },\n                 directExecutor());\ndiff --git a/android/guava/src/com/google/common/collect/ImmutableList.java b/android/guava/src/com/google/common/collect/ImmutableList.java\nindex 8d3b939e2420..8d8cbafbf234 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableList.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableList.java\n@@ -256,7 +256,7 @@ public static <E> ImmutableList<E> copyOf(Collection<? extends E> elements) {\n     if (elements instanceof ImmutableCollection) {\n       @SuppressWarnings(\"unchecked\") // all supported methods are covariant\n       ImmutableList<E> list = ((ImmutableCollection<E>) elements).asList();\n-      return list.isPartialView() ? ImmutableList.asImmutableList(list.toArray()) : list;\n+      return list.isPartialView() ? asImmutableList(list.toArray()) : list;\n     }\n     return construct(elements.toArray());\n   }\ndiff --git a/android/guava/src/com/google/common/collect/ImmutableMap.java b/android/guava/src/com/google/common/collect/ImmutableMap.java\nindex 67499303baa7..2728851254c1 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableMap.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableMap.java\n@@ -661,8 +661,7 @@ static <V> void sortEntries(\n         V value = (V) requireNonNull(alternatingKeysAndValues[2 * i + 1]);\n         entries[i] = new AbstractMap.SimpleImmutableEntry<Object, V>(key, value);\n       }\n-      Arrays.sort(\n-          entries, 0, size, Ordering.from(valueComparator).onResultOf(Maps.<V>valueFunction()));\n+      Arrays.sort(entries, 0, size, Ordering.from(valueComparator).onResultOf(Entry::getValue));\n       for (int i = 0; i < size; i++) {\n         alternatingKeysAndValues[2 * i] = entries[i].getKey();\n         alternatingKeysAndValues[2 * i + 1] = entries[i].getValue();\ndiff --git a/android/guava/src/com/google/common/collect/ImmutableMapEntrySet.java b/android/guava/src/com/google/common/collect/ImmutableMapEntrySet.java\nindex d8ef3064a72d..f4c90b74e305 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableMapEntrySet.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableMapEntrySet.java\n@@ -16,6 +16,8 @@\n \n package com.google.common.collect;\n \n+import static com.google.common.collect.ImmutableList.asImmutableList;\n+\n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n@@ -38,7 +40,7 @@ static final class RegularEntrySet<K, V> extends ImmutableMapEntrySet<K, V> {\n     private final transient ImmutableList<Entry<K, V>> entries;\n \n     RegularEntrySet(ImmutableMap<K, V> map, Entry<K, V>[] entries) {\n-      this(map, ImmutableList.asImmutableList(entries));\n+      this(map, asImmutableList(entries));\n     }\n \n     RegularEntrySet(ImmutableMap<K, V> map, ImmutableList<Entry<K, V>> entries) {\ndiff --git a/android/guava/src/com/google/common/collect/ImmutableRangeMap.java b/android/guava/src/com/google/common/collect/ImmutableRangeMap.java\nindex bf648e3424b4..fe692ad91b91 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableRangeMap.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableRangeMap.java\n@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkElementIndex;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Maps.immutableEntry;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static java.util.Collections.sort;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -293,7 +294,7 @@ public ImmutableMap<Range<K>, V> asMapOfRanges() {\n       return ImmutableMap.of();\n     }\n     RegularImmutableSortedSet<Range<K>> rangeSet =\n-        new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+        new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n     return new ImmutableSortedMap<>(rangeSet, values);\n   }\n \ndiff --git a/android/guava/src/com/google/common/collect/ImmutableRangeSet.java b/android/guava/src/com/google/common/collect/ImmutableRangeSet.java\nindex 21216278aeba..1bef7dd8a39b 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableRangeSet.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableRangeSet.java\n@@ -19,6 +19,8 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterables.getOnlyElement;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_HIGHER;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_LOWER;\n import static com.google.common.collect.SortedLists.KeyPresentBehavior.ANY_PRESENT;\n@@ -309,7 +311,7 @@ public ImmutableSet<Range<C>> asRanges() {\n     if (ranges.isEmpty()) {\n       return ImmutableSet.of();\n     }\n-    return new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+    return new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n   }\n \n   @Override\n@@ -829,8 +831,8 @@ Builder<C> combine(Builder<C> builder) {\n     public ImmutableRangeSet<C> build() {\n       ImmutableList.Builder<Range<C>> mergedRangesBuilder =\n           new ImmutableList.Builder<>(ranges.size());\n-      sort(ranges, Range.rangeLexOrdering());\n-      PeekingIterator<Range<C>> peekingItr = Iterators.peekingIterator(ranges.iterator());\n+      sort(ranges, rangeLexOrdering());\n+      PeekingIterator<Range<C>> peekingItr = peekingIterator(ranges.iterator());\n       while (peekingItr.hasNext()) {\n         Range<C> range = peekingItr.next();\n         while (peekingItr.hasNext()) {\ndiff --git a/android/guava/src/com/google/common/collect/ImmutableSet.java b/android/guava/src/com/google/common/collect/ImmutableSet.java\nindex 37ca69835cc9..98722999c64b 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableSet.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableSet.java\n@@ -19,6 +19,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.CollectPreconditions.checkNonnegative;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.ObjectArrays.checkElementNotNull;\n import static java.lang.Math.max;\n import static java.util.Objects.requireNonNull;\n@@ -378,7 +379,7 @@ public ImmutableList<E> asList() {\n   }\n \n   ImmutableList<E> createAsList() {\n-    return ImmutableList.asImmutableList(toArray());\n+    return asImmutableList(toArray());\n   }\n \n   /*\ndiff --git a/android/guava/src/com/google/common/collect/ImmutableSortedSet.java b/android/guava/src/com/google/common/collect/ImmutableSortedSet.java\nindex 6342a52b694f..069750cd36a8 100644\n--- a/android/guava/src/com/google/common/collect/ImmutableSortedSet.java\n+++ b/android/guava/src/com/google/common/collect/ImmutableSortedSet.java\n@@ -18,6 +18,7 @@\n \n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.ObjectArrays.checkElementsNotNull;\n import static java.lang.System.arraycopy;\n import static java.util.Arrays.sort;\n@@ -381,8 +382,7 @@ static <E> ImmutableSortedSet<E> construct(\n       // large array relative to the number of elements, so we cap the ratio.\n       contents = Arrays.copyOf(contents, uniques);\n     }\n-    return new RegularImmutableSortedSet<>(\n-        ImmutableList.asImmutableList(contents, uniques), comparator);\n+    return new RegularImmutableSortedSet<>(asImmutableList(contents, uniques), comparator);\n   }\n \n   /**\ndiff --git a/android/guava/src/com/google/common/collect/Maps.java b/android/guava/src/com/google/common/collect/Maps.java\nindex 1c75888c388e..27ad271e917a 100644\n--- a/android/guava/src/com/google/common/collect/Maps.java\n+++ b/android/guava/src/com/google/common/collect/Maps.java\n@@ -91,31 +91,6 @@\n public final class Maps {\n   private Maps() {}\n \n-  private enum EntryFunction implements Function<Entry<?, ?>, @Nullable Object> {\n-    KEY {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getKey();\n-      }\n-    },\n-    VALUE {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getValue();\n-      }\n-    };\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <K extends @Nullable Object> Function<Entry<K, ?>, K> keyFunction() {\n-    return (Function) EntryFunction.KEY;\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <V extends @Nullable Object> Function<Entry<?, V>, V> valueFunction() {\n-    return (Function) EntryFunction.VALUE;\n-  }\n-\n   static <K extends @Nullable Object, V extends @Nullable Object> Iterator<K> keyIterator(\n       Iterator<Entry<K, V>> entryIterator) {\n     return new TransformedIterator<Entry<K, V>, K>(entryIterator) {\n@@ -2294,12 +2269,12 @@ protected NavigableMap<K, V1> fromMap() {\n \n   static <K extends @Nullable Object> Predicate<Entry<K, ?>> keyPredicateOnEntries(\n       Predicate<? super K> keyPredicate) {\n-    return compose(keyPredicate, keyFunction());\n+    return compose(keyPredicate, Entry::getKey);\n   }\n \n   static <V extends @Nullable Object> Predicate<Entry<?, V>> valuePredicateOnEntries(\n       Predicate<? super V> valuePredicate) {\n-    return compose(valuePredicate, valueFunction());\n+    return compose(valuePredicate, Entry::getValue);\n   }\n \n   /**\ndiff --git a/android/guava/src/com/google/common/collect/Ordering.java b/android/guava/src/com/google/common/collect/Ordering.java\nindex e3229f672c45..ec7eef09118a 100644\n--- a/android/guava/src/com/google/common/collect/Ordering.java\n+++ b/android/guava/src/com/google/common/collect/Ordering.java\n@@ -461,7 +461,7 @@ public <S extends T> Ordering<S> reverse() {\n   }\n \n   <T2 extends T> Ordering<Entry<T2, ?>> onKeys() {\n-    return onResultOf(Maps.keyFunction());\n+    return onResultOf(Entry::getKey);\n   }\n \n   /**\ndiff --git a/android/guava/src/com/google/common/collect/RegularImmutableAsList.java b/android/guava/src/com/google/common/collect/RegularImmutableAsList.java\nindex a2a439ff811d..68806c6854b8 100644\n--- a/android/guava/src/com/google/common/collect/RegularImmutableAsList.java\n+++ b/android/guava/src/com/google/common/collect/RegularImmutableAsList.java\n@@ -39,11 +39,11 @@ class RegularImmutableAsList<E> extends ImmutableAsList<E> {\n   }\n \n   RegularImmutableAsList(ImmutableCollection<E> delegate, Object[] array) {\n-    this(delegate, ImmutableList.asImmutableList(array));\n+    this(delegate, asImmutableList(array));\n   }\n \n   RegularImmutableAsList(ImmutableCollection<E> delegate, Object[] array, int size) {\n-    this(delegate, ImmutableList.<E>asImmutableList(array, size));\n+    this(delegate, asImmutableList(array, size));\n   }\n \n   @Override\ndiff --git a/android/guava/src/com/google/common/collect/TreeRangeMap.java b/android/guava/src/com/google/common/collect/TreeRangeMap.java\nindex d427041ef762..6d0b98089f4a 100644\n--- a/android/guava/src/com/google/common/collect/TreeRangeMap.java\n+++ b/android/guava/src/com/google/common/collect/TreeRangeMap.java\n@@ -627,7 +627,7 @@ public boolean remove(@Nullable Object o) {\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.keyFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getKey));\n           }\n         };\n       }\n@@ -694,12 +694,12 @@ public Collection<V> values() {\n         return new Maps.Values<Range<K>, V>(this) {\n           @Override\n           public boolean removeAll(Collection<?> c) {\n-            return removeEntryIf(compose(in(c), Maps.valueFunction()));\n+            return removeEntryIf(compose(in(c), Entry::getValue));\n           }\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.valueFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getValue));\n           }\n         };\n       }\ndiff --git a/android/guava/src/com/google/common/collect/TreeRangeSet.java b/android/guava/src/com/google/common/collect/TreeRangeSet.java\nindex 66f85c617214..3083fd7ad290 100644\n--- a/android/guava/src/com/google/common/collect/TreeRangeSet.java\n+++ b/android/guava/src/com/google/common/collect/TreeRangeSet.java\n@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Maps.immutableEntry;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -411,7 +412,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n       } else {\n         candidates = rangesByLowerBound.descendingMap().values();\n       }\n-      PeekingIterator<Range<C>> backingItr = Iterators.peekingIterator(candidates.iterator());\n+      PeekingIterator<Range<C>> backingItr = peekingIterator(candidates.iterator());\n       if (backingItr.hasNext()\n           && upperBoundWindow.upperBound.isLessThan(backingItr.peek().upperBound)) {\n         backingItr.next();\n@@ -524,7 +525,7 @@ Iterator<Entry<Cut<C>, Range<C>>> entryIterator() {\n       } else {\n         positiveRanges = positiveRangesByUpperBound.values();\n       }\n-      PeekingIterator<Range<C>> positiveItr = Iterators.peekingIterator(positiveRanges.iterator());\n+      PeekingIterator<Range<C>> positiveItr = peekingIterator(positiveRanges.iterator());\n       Cut<C> firstComplementRangeLowerBound;\n       if (complementLowerBoundWindow.contains(Cut.belowAll())\n           && (!positiveItr.hasNext() || positiveItr.peek().lowerBound != Cut.<C>belowAll())) {\n@@ -575,7 +576,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n           complementLowerBoundWindow.hasUpperBound()\n               && complementLowerBoundWindow.upperBoundType() == BoundType.CLOSED;\n       PeekingIterator<Range<C>> positiveItr =\n-          Iterators.peekingIterator(\n+          peekingIterator(\n               positiveRangesByUpperBound\n                   .headMap(startingPoint, inclusive)\n                   .descendingMap()\ndiff --git a/guava-gwt/src-super/com/google/common/collect/super/com/google/common/collect/ImmutableMap.java b/guava-gwt/src-super/com/google/common/collect/super/com/google/common/collect/ImmutableMap.java\nindex eb0cdc2a144a..4d2f0cc362ea 100644\n--- a/guava-gwt/src-super/com/google/common/collect/super/com/google/common/collect/ImmutableMap.java\n+++ b/guava-gwt/src-super/com/google/common/collect/super/com/google/common/collect/ImmutableMap.java\n@@ -312,7 +312,7 @@ public ImmutableMap<K, V> build() {\n \n     private ImmutableMap<K, V> build(boolean throwIfDuplicateKeys) {\n       if (valueComparator != null) {\n-        Collections.sort(entries, Ordering.from(valueComparator).onResultOf(Maps.valueFunction()));\n+        Collections.sort(entries, Ordering.from(valueComparator).onResultOf(Entry::getValue));\n       }\n       return fromEntryList(throwIfDuplicateKeys, entries);\n     }\ndiff --git a/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java b/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java\nindex b7f684f568ba..4d2b68896e84 100644\n--- a/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java\n+++ b/guava-testlib/src/com/google/common/testing/ArbitraryInstances.java\n@@ -17,6 +17,7 @@\n package com.google.common.testing;\n \n import static com.google.common.base.Preconditions.checkArgument;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static java.nio.charset.StandardCharsets.UTF_8;\n import static java.util.Objects.requireNonNull;\n import static java.util.concurrent.TimeUnit.SECONDS;\n@@ -48,7 +49,6 @@\n import com.google.common.collect.ImmutableSortedMultiset;\n import com.google.common.collect.ImmutableSortedSet;\n import com.google.common.collect.ImmutableTable;\n-import com.google.common.collect.Iterators;\n import com.google.common.collect.ListMultimap;\n import com.google.common.collect.MapDifference;\n import com.google.common.collect.Maps;\n@@ -251,7 +251,7 @@ private static MatchResult createMatchResult() {\n           .put(CharSink.class, NullByteSink.INSTANCE.asCharSink(UTF_8))\n           // All collections are immutable empty. So safe for any type parameter.\n           .put(Iterator.class, ImmutableSet.of().iterator())\n-          .put(PeekingIterator.class, Iterators.peekingIterator(ImmutableSet.of().iterator()))\n+          .put(PeekingIterator.class, peekingIterator(ImmutableSet.of().iterator()))\n           .put(ListIterator.class, ImmutableList.of().listIterator())\n           .put(Iterable.class, ImmutableSet.of())\n           .put(Collection.class, ImmutableList.of())\ndiff --git a/guava-tests/test/com/google/common/collect/IteratorsTest.java b/guava-tests/test/com/google/common/collect/IteratorsTest.java\nindex 330328c30a56..86454fe97485 100644\n--- a/guava-tests/test/com/google/common/collect/IteratorsTest.java\n+++ b/guava-tests/test/com/google/common/collect/IteratorsTest.java\n@@ -29,6 +29,7 @@\n import static com.google.common.collect.Iterators.get;\n import static com.google.common.collect.Iterators.getLast;\n import static com.google.common.collect.Iterators.getOnlyElement;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Iterators.singletonIterator;\n import static com.google.common.collect.Iterators.tryFind;\n import static com.google.common.collect.Lists.newArrayList;\n@@ -1543,10 +1544,10 @@ public void testUnmodifiableIteratorShortCircuit() {\n   @SuppressWarnings({\"deprecation\", \"InlineMeInliner\"}) // test of a deprecated method\n   public void testPeekingIteratorShortCircuit() {\n     Iterator<String> nonpeek = Lists.newArrayList(\"a\", \"b\", \"c\").iterator();\n-    PeekingIterator<String> peek = Iterators.peekingIterator(nonpeek);\n+    PeekingIterator<String> peek = peekingIterator(nonpeek);\n     assertNotSame(peek, nonpeek);\n-    assertSame(peek, Iterators.peekingIterator(peek));\n-    assertSame(peek, Iterators.peekingIterator((Iterator<String>) peek));\n+    assertSame(peek, peekingIterator(peek));\n+    assertSame(peek, peekingIterator((Iterator<String>) peek));\n   }\n \n   public void testMergeSorted_stable_issue5773Example() {\ndiff --git a/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java b/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java\nindex ff284a10ec5a..fae3d9bdd673 100644\n--- a/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java\n+++ b/guava-tests/test/com/google/common/collect/PeekingIteratorTest.java\n@@ -68,7 +68,7 @@ protected Iterator<T> newTargetIterator() {\n       // make copy from master to verify later\n       targetList = Lists.newArrayList(master);\n       Iterator<T> iterator = targetList.iterator();\n-      return Iterators.peekingIterator(iterator);\n+      return peekingIterator(iterator);\n     }\n \n     @Override\n@@ -88,7 +88,7 @@ protected void verify(List<T> elements) {\n       @Override\n       protected Iterator<T> newTargetIterator() {\n         Iterator<T> iterator = unmodifiableList(list).iterator();\n-        return Iterators.peekingIterator(iterator);\n+        return peekingIterator(iterator);\n       }\n     }.test();\n   }\n@@ -115,7 +115,7 @@ public void testPeekingIteratorAcceptsNullElements() {\n   public void testPeekOnEmptyList() {\n     List<?> list = emptyList();\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertThrows(NoSuchElementException.class, () -> peekingIterator.peek());\n   }\n@@ -123,7 +123,7 @@ public void testPeekOnEmptyList() {\n   public void testPeekDoesntChangeIteration() {\n     List<?> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<?> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"Should be able to peek() at first element\", \"A\", peekingIterator.peek());\n     assertEquals(\n@@ -151,7 +151,7 @@ public void testPeekDoesntChangeIteration() {\n   public void testCantRemoveAfterPeek() {\n     List<String> list = Lists.newArrayList(\"A\", \"B\", \"C\");\n     Iterator<String> iterator = list.iterator();\n-    PeekingIterator<?> peekingIterator = Iterators.peekingIterator(iterator);\n+    PeekingIterator<?> peekingIterator = peekingIterator(iterator);\n \n     assertEquals(\"A\", peekingIterator.next());\n     assertEquals(\"B\", peekingIterator.peek());\ndiff --git a/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java b/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java\nindex 7cb128962b0b..90b037d87ffd 100644\n--- a/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java\n+++ b/guava-tests/test/com/google/common/util/concurrent/FluentFutureTest.java\n@@ -105,7 +105,7 @@ public void testCatchingAsync() throws Exception {\n                 new AsyncFunction<Throwable, Class<?>>() {\n                   @Override\n                   public ListenableFuture<Class<?>> apply(Throwable input) {\n-                    return Futures.immediateFuture(input.getClass());\n+                    return immediateFuture(input.getClass());\n                   }\n                 },\n                 directExecutor());\ndiff --git a/guava/src/com/google/common/collect/ImmutableBiMap.java b/guava/src/com/google/common/collect/ImmutableBiMap.java\nindex 7a7382a58c1c..e5f2072327fe 100644\n--- a/guava/src/com/google/common/collect/ImmutableBiMap.java\n+++ b/guava/src/com/google/common/collect/ImmutableBiMap.java\n@@ -473,7 +473,7 @@ public ImmutableBiMap<K, V> buildOrThrow() {\n                 (Entry<K, V>[]) entries, // Entries up to size are not null\n                 0,\n                 size,\n-                Ordering.from(valueComparator).onResultOf(Maps.valueFunction()));\n+                Ordering.from(valueComparator).onResultOf(Entry::getValue));\n           }\n           entriesUsed = true;\n           return RegularImmutableBiMap.fromEntryArray(size, entries);\ndiff --git a/guava/src/com/google/common/collect/ImmutableList.java b/guava/src/com/google/common/collect/ImmutableList.java\nindex 91c282396b87..6e3b35f478dd 100644\n--- a/guava/src/com/google/common/collect/ImmutableList.java\n+++ b/guava/src/com/google/common/collect/ImmutableList.java\n@@ -259,7 +259,7 @@ public static <E> ImmutableList<E> copyOf(Collection<? extends E> elements) {\n     if (elements instanceof ImmutableCollection) {\n       @SuppressWarnings(\"unchecked\") // all supported methods are covariant\n       ImmutableList<E> list = ((ImmutableCollection<E>) elements).asList();\n-      return list.isPartialView() ? ImmutableList.asImmutableList(list.toArray()) : list;\n+      return list.isPartialView() ? asImmutableList(list.toArray()) : list;\n     }\n     return construct(elements.toArray());\n   }\ndiff --git a/guava/src/com/google/common/collect/ImmutableMap.java b/guava/src/com/google/common/collect/ImmutableMap.java\nindex 2eb0b4889414..c927d2d53297 100644\n--- a/guava/src/com/google/common/collect/ImmutableMap.java\n+++ b/guava/src/com/google/common/collect/ImmutableMap.java\n@@ -572,7 +572,7 @@ private ImmutableMap<K, V> build(boolean throwIfDuplicateKeys) {\n             nonNullEntries,\n             0,\n             localSize,\n-            Ordering.from(valueComparator).onResultOf(Maps.valueFunction()));\n+            Ordering.from(valueComparator).onResultOf(Entry::getValue));\n         localEntries = (@Nullable Entry<K, V>[]) nonNullEntries;\n       }\n       entriesUsed = true;\ndiff --git a/guava/src/com/google/common/collect/ImmutableMapEntrySet.java b/guava/src/com/google/common/collect/ImmutableMapEntrySet.java\nindex a940cca178ab..61449cbf4d4b 100644\n--- a/guava/src/com/google/common/collect/ImmutableMapEntrySet.java\n+++ b/guava/src/com/google/common/collect/ImmutableMapEntrySet.java\n@@ -16,6 +16,8 @@\n \n package com.google.common.collect;\n \n+import static com.google.common.collect.ImmutableList.asImmutableList;\n+\n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n@@ -40,7 +42,7 @@ static final class RegularEntrySet<K, V> extends ImmutableMapEntrySet<K, V> {\n     private final transient ImmutableList<Entry<K, V>> entries;\n \n     RegularEntrySet(ImmutableMap<K, V> map, Entry<K, V>[] entries) {\n-      this(map, ImmutableList.asImmutableList(entries));\n+      this(map, asImmutableList(entries));\n     }\n \n     RegularEntrySet(ImmutableMap<K, V> map, ImmutableList<Entry<K, V>> entries) {\ndiff --git a/guava/src/com/google/common/collect/ImmutableRangeMap.java b/guava/src/com/google/common/collect/ImmutableRangeMap.java\nindex 8aab0c34db31..7eda4ddd620c 100644\n--- a/guava/src/com/google/common/collect/ImmutableRangeMap.java\n+++ b/guava/src/com/google/common/collect/ImmutableRangeMap.java\n@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkElementIndex;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Maps.immutableEntry;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static java.util.Collections.sort;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -310,7 +311,7 @@ public ImmutableMap<Range<K>, V> asMapOfRanges() {\n       return ImmutableMap.of();\n     }\n     RegularImmutableSortedSet<Range<K>> rangeSet =\n-        new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+        new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n     return new ImmutableSortedMap<>(rangeSet, values);\n   }\n \ndiff --git a/guava/src/com/google/common/collect/ImmutableRangeSet.java b/guava/src/com/google/common/collect/ImmutableRangeSet.java\nindex 7dddc859bf3c..6918602527f1 100644\n--- a/guava/src/com/google/common/collect/ImmutableRangeSet.java\n+++ b/guava/src/com/google/common/collect/ImmutableRangeSet.java\n@@ -19,6 +19,8 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterables.getOnlyElement;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n+import static com.google.common.collect.Range.rangeLexOrdering;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_HIGHER;\n import static com.google.common.collect.SortedLists.KeyAbsentBehavior.NEXT_LOWER;\n import static com.google.common.collect.SortedLists.KeyPresentBehavior.ANY_PRESENT;\n@@ -308,7 +310,7 @@ public ImmutableSet<Range<C>> asRanges() {\n     if (ranges.isEmpty()) {\n       return ImmutableSet.of();\n     }\n-    return new RegularImmutableSortedSet<>(ranges, Range.rangeLexOrdering());\n+    return new RegularImmutableSortedSet<>(ranges, rangeLexOrdering());\n   }\n \n   @Override\n@@ -828,8 +830,8 @@ Builder<C> combine(Builder<C> builder) {\n     public ImmutableRangeSet<C> build() {\n       ImmutableList.Builder<Range<C>> mergedRangesBuilder =\n           new ImmutableList.Builder<>(ranges.size());\n-      sort(ranges, Range.rangeLexOrdering());\n-      PeekingIterator<Range<C>> peekingItr = Iterators.peekingIterator(ranges.iterator());\n+      sort(ranges, rangeLexOrdering());\n+      PeekingIterator<Range<C>> peekingItr = peekingIterator(ranges.iterator());\n       while (peekingItr.hasNext()) {\n         Range<C> range = peekingItr.next();\n         while (peekingItr.hasNext()) {\ndiff --git a/guava/src/com/google/common/collect/ImmutableSet.java b/guava/src/com/google/common/collect/ImmutableSet.java\nindex 32367852828f..5aae4e9977ee 100644\n--- a/guava/src/com/google/common/collect/ImmutableSet.java\n+++ b/guava/src/com/google/common/collect/ImmutableSet.java\n@@ -19,6 +19,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.CollectPreconditions.checkNonnegative;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.math.IntMath.sqrt;\n import static java.lang.Math.max;\n import static java.util.Objects.requireNonNull;\n@@ -978,8 +979,7 @@ ImmutableSet<E> build() {\n            */\n           return of(requireNonNull(dedupedElements[0]));\n         default:\n-          return new JdkBackedImmutableSet<>(\n-              delegate, ImmutableList.asImmutableList(dedupedElements, distinct));\n+          return new JdkBackedImmutableSet<>(delegate, asImmutableList(dedupedElements, distinct));\n       }\n     }\n   }\ndiff --git a/guava/src/com/google/common/collect/ImmutableSortedSet.java b/guava/src/com/google/common/collect/ImmutableSortedSet.java\nindex c9ea839c7967..d072644543eb 100644\n--- a/guava/src/com/google/common/collect/ImmutableSortedSet.java\n+++ b/guava/src/com/google/common/collect/ImmutableSortedSet.java\n@@ -18,6 +18,7 @@\n \n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.ObjectArrays.checkElementsNotNull;\n import static java.lang.System.arraycopy;\n import static java.util.Arrays.sort;\n@@ -381,8 +382,7 @@ static <E> ImmutableSortedSet<E> construct(\n       }\n     }\n     Arrays.fill(contents, uniques, n, null);\n-    return new RegularImmutableSortedSet<>(\n-        ImmutableList.asImmutableList(contents, uniques), comparator);\n+    return new RegularImmutableSortedSet<>(asImmutableList(contents, uniques), comparator);\n   }\n \n   /**\n@@ -590,8 +590,7 @@ public ImmutableSortedSet<E> build() {\n         return emptySet(comparator);\n       } else {\n         forceCopy = true;\n-        return new RegularImmutableSortedSet<>(\n-            ImmutableList.asImmutableList(elements, n), comparator);\n+        return new RegularImmutableSortedSet<>(asImmutableList(elements, n), comparator);\n       }\n     }\n   }\ndiff --git a/guava/src/com/google/common/collect/JdkBackedImmutableBiMap.java b/guava/src/com/google/common/collect/JdkBackedImmutableBiMap.java\nindex 6e5f8759cbf0..a4bf54e168d6 100644\n--- a/guava/src/com/google/common/collect/JdkBackedImmutableBiMap.java\n+++ b/guava/src/com/google/common/collect/JdkBackedImmutableBiMap.java\n@@ -15,6 +15,7 @@\n  */\n package com.google.common.collect;\n \n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.Maps.immutableEntry;\n import static java.util.Objects.requireNonNull;\n \n@@ -47,7 +48,7 @@ static <K, V> ImmutableBiMap<K, V> create(int n, @Nullable Entry<K, V>[] entryAr\n         throw conflictException(\"value\", oldKey + \"=\" + e.getValue(), entryArray[i]);\n       }\n     }\n-    ImmutableList<Entry<K, V>> entryList = ImmutableList.asImmutableList(entryArray, n);\n+    ImmutableList<Entry<K, V>> entryList = asImmutableList(entryArray, n);\n     return new JdkBackedImmutableBiMap<>(\n         entryList, forwardDelegate, backwardDelegate, /* inverse= */ null);\n   }\ndiff --git a/guava/src/com/google/common/collect/JdkBackedImmutableMap.java b/guava/src/com/google/common/collect/JdkBackedImmutableMap.java\nindex f5d73371cc4c..a608b3b33c02 100644\n--- a/guava/src/com/google/common/collect/JdkBackedImmutableMap.java\n+++ b/guava/src/com/google/common/collect/JdkBackedImmutableMap.java\n@@ -17,6 +17,7 @@\n package com.google.common.collect;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n import static com.google.common.collect.RegularImmutableMap.makeImmutable;\n import static java.util.Objects.requireNonNull;\n \n@@ -82,7 +83,7 @@ static <K, V> ImmutableMap<K, V> create(\n       }\n       entryArray = newEntryArray;\n     }\n-    return new JdkBackedImmutableMap<>(delegateMap, ImmutableList.asImmutableList(entryArray, n));\n+    return new JdkBackedImmutableMap<>(delegateMap, asImmutableList(entryArray, n));\n   }\n \n   private final transient Map<K, V> delegateMap;\ndiff --git a/guava/src/com/google/common/collect/JdkBackedImmutableMultiset.java b/guava/src/com/google/common/collect/JdkBackedImmutableMultiset.java\nindex 4f9f9619e453..25d6c8c91f77 100644\n--- a/guava/src/com/google/common/collect/JdkBackedImmutableMultiset.java\n+++ b/guava/src/com/google/common/collect/JdkBackedImmutableMultiset.java\n@@ -15,6 +15,7 @@\n package com.google.common.collect;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n \n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n@@ -52,8 +53,7 @@ static <E> ImmutableMultiset<E> create(Collection<? extends Entry<? extends E>>\n         entriesArray[i] = Multisets.immutableEntry(element, count);\n       }\n     }\n-    return new JdkBackedImmutableMultiset<>(\n-        delegateMap, ImmutableList.asImmutableList(entriesArray), size);\n+    return new JdkBackedImmutableMultiset<>(delegateMap, asImmutableList(entriesArray), size);\n   }\n \n   private JdkBackedImmutableMultiset(\ndiff --git a/guava/src/com/google/common/collect/Maps.java b/guava/src/com/google/common/collect/Maps.java\nindex d26913393048..6904cc496f84 100644\n--- a/guava/src/com/google/common/collect/Maps.java\n+++ b/guava/src/com/google/common/collect/Maps.java\n@@ -96,31 +96,6 @@\n public final class Maps {\n   private Maps() {}\n \n-  private enum EntryFunction implements Function<Entry<?, ?>, @Nullable Object> {\n-    KEY {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getKey();\n-      }\n-    },\n-    VALUE {\n-      @Override\n-      public @Nullable Object apply(Entry<?, ?> entry) {\n-        return entry.getValue();\n-      }\n-    };\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <K extends @Nullable Object> Function<Entry<K, ?>, K> keyFunction() {\n-    return (Function) EntryFunction.KEY;\n-  }\n-\n-  @SuppressWarnings(\"unchecked\")\n-  static <V extends @Nullable Object> Function<Entry<?, V>, V> valueFunction() {\n-    return (Function) EntryFunction.VALUE;\n-  }\n-\n   static <K extends @Nullable Object, V extends @Nullable Object> Iterator<K> keyIterator(\n       Iterator<Entry<K, V>> entryIterator) {\n     return new TransformedIterator<Entry<K, V>, K>(entryIterator) {\n@@ -2395,12 +2370,12 @@ protected NavigableMap<K, V1> fromMap() {\n \n   static <K extends @Nullable Object> Predicate<Entry<K, ?>> keyPredicateOnEntries(\n       Predicate<? super K> keyPredicate) {\n-    return compose(keyPredicate, keyFunction());\n+    return compose(keyPredicate, Entry::getKey);\n   }\n \n   static <V extends @Nullable Object> Predicate<Entry<?, V>> valuePredicateOnEntries(\n       Predicate<? super V> valuePredicate) {\n-    return compose(valuePredicate, valueFunction());\n+    return compose(valuePredicate, Entry::getValue);\n   }\n \n   /**\ndiff --git a/guava/src/com/google/common/collect/Ordering.java b/guava/src/com/google/common/collect/Ordering.java\nindex e3229f672c45..ec7eef09118a 100644\n--- a/guava/src/com/google/common/collect/Ordering.java\n+++ b/guava/src/com/google/common/collect/Ordering.java\n@@ -461,7 +461,7 @@ public <S extends T> Ordering<S> reverse() {\n   }\n \n   <T2 extends T> Ordering<Entry<T2, ?>> onKeys() {\n-    return onResultOf(Maps.keyFunction());\n+    return onResultOf(Entry::getKey);\n   }\n \n   /**\ndiff --git a/guava/src/com/google/common/collect/RegularImmutableAsList.java b/guava/src/com/google/common/collect/RegularImmutableAsList.java\nindex accd6989d24f..876ff9a14bad 100644\n--- a/guava/src/com/google/common/collect/RegularImmutableAsList.java\n+++ b/guava/src/com/google/common/collect/RegularImmutableAsList.java\n@@ -40,7 +40,7 @@ class RegularImmutableAsList<E> extends ImmutableAsList<E> {\n   }\n \n   RegularImmutableAsList(ImmutableCollection<E> delegate, Object[] array) {\n-    this(delegate, ImmutableList.asImmutableList(array));\n+    this(delegate, asImmutableList(array));\n   }\n \n   @Override\ndiff --git a/guava/src/com/google/common/collect/RegularImmutableMultiset.java b/guava/src/com/google/common/collect/RegularImmutableMultiset.java\nindex 70a3d2ea9586..61ea433703bb 100644\n--- a/guava/src/com/google/common/collect/RegularImmutableMultiset.java\n+++ b/guava/src/com/google/common/collect/RegularImmutableMultiset.java\n@@ -15,6 +15,7 @@\n package com.google.common.collect;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.ImmutableList.asImmutableList;\n \n import com.google.common.annotations.GwtCompatible;\n import com.google.common.annotations.GwtIncompatible;\n@@ -79,7 +80,7 @@ static <E> ImmutableMultiset<E> create(Collection<? extends Entry<? extends E>>\n     }\n \n     return hashFloodingDetected(hashTable)\n-        ? JdkBackedImmutableMultiset.create(ImmutableList.asImmutableList(entryArray))\n+        ? JdkBackedImmutableMultiset.create(asImmutableList(entryArray))\n         : new RegularImmutableMultiset<E>(\n             entryArray, hashTable, Ints.saturatedCast(size), hashCode, null);\n   }\ndiff --git a/guava/src/com/google/common/collect/TreeRangeMap.java b/guava/src/com/google/common/collect/TreeRangeMap.java\nindex 59e34787f0c6..92e3310c8ac2 100644\n--- a/guava/src/com/google/common/collect/TreeRangeMap.java\n+++ b/guava/src/com/google/common/collect/TreeRangeMap.java\n@@ -730,7 +730,7 @@ public boolean remove(@Nullable Object o) {\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.keyFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getKey));\n           }\n         };\n       }\n@@ -797,12 +797,12 @@ public Collection<V> values() {\n         return new Maps.Values<Range<K>, V>(this) {\n           @Override\n           public boolean removeAll(Collection<?> c) {\n-            return removeEntryIf(compose(in(c), Maps.valueFunction()));\n+            return removeEntryIf(compose(in(c), Entry::getValue));\n           }\n \n           @Override\n           public boolean retainAll(Collection<?> c) {\n-            return removeEntryIf(compose(not(in(c)), Maps.valueFunction()));\n+            return removeEntryIf(compose(not(in(c)), Entry::getValue));\n           }\n         };\n       }\ndiff --git a/guava/src/com/google/common/collect/TreeRangeSet.java b/guava/src/com/google/common/collect/TreeRangeSet.java\nindex 66f85c617214..3083fd7ad290 100644\n--- a/guava/src/com/google/common/collect/TreeRangeSet.java\n+++ b/guava/src/com/google/common/collect/TreeRangeSet.java\n@@ -18,6 +18,7 @@\n import static com.google.common.base.Preconditions.checkArgument;\n import static com.google.common.base.Preconditions.checkNotNull;\n import static com.google.common.collect.Iterators.emptyIterator;\n+import static com.google.common.collect.Iterators.peekingIterator;\n import static com.google.common.collect.Maps.immutableEntry;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -411,7 +412,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n       } else {\n         candidates = rangesByLowerBound.descendingMap().values();\n       }\n-      PeekingIterator<Range<C>> backingItr = Iterators.peekingIterator(candidates.iterator());\n+      PeekingIterator<Range<C>> backingItr = peekingIterator(candidates.iterator());\n       if (backingItr.hasNext()\n           && upperBoundWindow.upperBound.isLessThan(backingItr.peek().upperBound)) {\n         backingItr.next();\n@@ -524,7 +525,7 @@ Iterator<Entry<Cut<C>, Range<C>>> entryIterator() {\n       } else {\n         positiveRanges = positiveRangesByUpperBound.values();\n       }\n-      PeekingIterator<Range<C>> positiveItr = Iterators.peekingIterator(positiveRanges.iterator());\n+      PeekingIterator<Range<C>> positiveItr = peekingIterator(positiveRanges.iterator());\n       Cut<C> firstComplementRangeLowerBound;\n       if (complementLowerBoundWindow.contains(Cut.belowAll())\n           && (!positiveItr.hasNext() || positiveItr.peek().lowerBound != Cut.<C>belowAll())) {\n@@ -575,7 +576,7 @@ Iterator<Entry<Cut<C>, Range<C>>> descendingEntryIterator() {\n           complementLowerBoundWindow.hasUpperBound()\n               && complementLowerBoundWindow.upperBoundType() == BoundType.CLOSED;\n       PeekingIterator<Range<C>> positiveItr =\n-          Iterators.peekingIterator(\n+          peekingIterator(\n               positiveRangesByUpperBound\n                   .headMap(startingPoint, inclusive)\n                   .descendingMap()\n",
  "additions": 90,
  "deletions": 124,
  "changed_files": 38,
  "url": "https://github.com/google/guava/pull/8017",
  "mined_at": "2025-10-25T12:56:12.357796"
}