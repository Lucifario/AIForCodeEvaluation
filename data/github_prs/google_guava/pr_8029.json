{
  "id": 8029,
  "repository": "google/guava",
  "title": "Link to new Java 25 methods on `Reader`.",
  "body": "Link to new Java 25 methods on `Reader`.\n\nSee https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/io/Reader.html.\n\nRELNOTES=n/a\n",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-09-29T13:56:30+00:00",
  "created_at": "2025-09-29T12:58:49+00:00",
  "updated_at": "2025-09-29T13:56:30+00:00",
  "author": "copybara-service[bot]",
  "reviewers": [],
  "base_sha": "57528113f64c5e7544fd3153301cde1831f4d673",
  "head_sha": "9a179fc66b79c47e5f5d0c59bceb7162e5d2abe2",
  "review_comments": [],
  "pr_comments": [],
  "files_changed": [
    {
      "filename": "android/guava/src/com/google/common/io/CharStreams.java",
      "status": "modified",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "patch": "@@ -20,6 +20,7 @@\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+import java.io.BufferedReader;\n import java.io.Closeable;\n import java.io.EOFException;\n import java.io.IOException;\n@@ -151,6 +152,9 @@ static long copyReaderToWriter(Reader from, Writer to) throws IOException {\n    * Reads all characters from a {@link Readable} object into a {@link String}. Does not close the\n    * {@code Readable}.\n    *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, prefer {@link\n+   * Reader#readAllAsString()}.\n+   *\n    * @param r the object to read from\n    * @return a string containing all the characters\n    * @throws IOException if an I/O error occurs\n@@ -184,6 +188,15 @@ private static StringBuilder toStringBuilder(Readable r) throws IOException {\n    * <p>Does not close the {@code Readable}. If reading files or resources you should use the {@link\n    * Files#readLines} and {@link Resources#readLines} methods.\n    *\n+   * <p>This method prioritizes convenience over performance: It reads the entire input into memory\n+   * immediately. To instead read and process lines individually, use an alternative like {@link\n+   * BufferedReader#lines()}.\n+   *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, you may prefer {@link\n+   * Reader#readAllLines()}. The two may have different performance characteristics for different\n+   * {@link Reader} classes and Java versions, but both methods read the entire input into memory\n+   * immediately, so we discourage use of both when memory usage is a concern.\n+   *\n    * @param r the object to read from\n    * @return a mutable {@link List} containing all the lines\n    * @throws IOException if an I/O error occurs\n@@ -204,6 +217,10 @@ public static List<String> readLines(Readable r) throws IOException {\n    * {@code readable}. Note that this method may not fully consume the contents of {@code readable}\n    * if the processor stops processing early.\n    *\n+   * <p><b>Users who can use {@code Stream}:</b> If your input is a {@link Reader}, consider\n+   * wrapping it with a {@link BufferedReader} and operating on the {@link java.util.stream.Stream}\n+   * of lines returned by {@link BufferedReader#lines()}.\n+   *\n    * @throws IOException if an I/O error occurs\n    * @since 14.0\n    */"
    },
    {
      "filename": "guava/src/com/google/common/io/CharStreams.java",
      "status": "modified",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "patch": "@@ -20,6 +20,7 @@\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+import java.io.BufferedReader;\n import java.io.Closeable;\n import java.io.EOFException;\n import java.io.IOException;\n@@ -151,6 +152,9 @@ static long copyReaderToWriter(Reader from, Writer to) throws IOException {\n    * Reads all characters from a {@link Readable} object into a {@link String}. Does not close the\n    * {@code Readable}.\n    *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, prefer {@link\n+   * Reader#readAllAsString()}.\n+   *\n    * @param r the object to read from\n    * @return a string containing all the characters\n    * @throws IOException if an I/O error occurs\n@@ -184,6 +188,15 @@ private static StringBuilder toStringBuilder(Readable r) throws IOException {\n    * <p>Does not close the {@code Readable}. If reading files or resources you should use the {@link\n    * Files#readLines} and {@link Resources#readLines} methods.\n    *\n+   * <p>This method prioritizes convenience over performance: It reads the entire input into memory\n+   * immediately. To instead read and process lines individually, use an alternative like {@link\n+   * BufferedReader#lines()}.\n+   *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, you may prefer {@link\n+   * Reader#readAllLines()}. The two may have different performance characteristics for different\n+   * {@link Reader} classes and Java versions, but both methods read the entire input into memory\n+   * immediately, so we discourage use of both when memory usage is a concern.\n+   *\n    * @param r the object to read from\n    * @return a mutable {@link List} containing all the lines\n    * @throws IOException if an I/O error occurs\n@@ -204,6 +217,10 @@ public static List<String> readLines(Readable r) throws IOException {\n    * {@code readable}. Note that this method may not fully consume the contents of {@code readable}\n    * if the processor stops processing early.\n    *\n+   * <p><b>Users who can use {@code Stream}:</b> If your input is a {@link Reader}, consider\n+   * wrapping it with a {@link BufferedReader} and operating on the {@link java.util.stream.Stream}\n+   * of lines returned by {@link BufferedReader#lines()}.\n+   *\n    * @throws IOException if an I/O error occurs\n    * @since 14.0\n    */"
    }
  ],
  "diff": "diff --git a/android/guava/src/com/google/common/io/CharStreams.java b/android/guava/src/com/google/common/io/CharStreams.java\nindex 7857d7ad2947..f6686e1e97ea 100644\n--- a/android/guava/src/com/google/common/io/CharStreams.java\n+++ b/android/guava/src/com/google/common/io/CharStreams.java\n@@ -20,6 +20,7 @@\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+import java.io.BufferedReader;\n import java.io.Closeable;\n import java.io.EOFException;\n import java.io.IOException;\n@@ -151,6 +152,9 @@ static long copyReaderToWriter(Reader from, Writer to) throws IOException {\n    * Reads all characters from a {@link Readable} object into a {@link String}. Does not close the\n    * {@code Readable}.\n    *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, prefer {@link\n+   * Reader#readAllAsString()}.\n+   *\n    * @param r the object to read from\n    * @return a string containing all the characters\n    * @throws IOException if an I/O error occurs\n@@ -184,6 +188,15 @@ private static StringBuilder toStringBuilder(Readable r) throws IOException {\n    * <p>Does not close the {@code Readable}. If reading files or resources you should use the {@link\n    * Files#readLines} and {@link Resources#readLines} methods.\n    *\n+   * <p>This method prioritizes convenience over performance: It reads the entire input into memory\n+   * immediately. To instead read and process lines individually, use an alternative like {@link\n+   * BufferedReader#lines()}.\n+   *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, you may prefer {@link\n+   * Reader#readAllLines()}. The two may have different performance characteristics for different\n+   * {@link Reader} classes and Java versions, but both methods read the entire input into memory\n+   * immediately, so we discourage use of both when memory usage is a concern.\n+   *\n    * @param r the object to read from\n    * @return a mutable {@link List} containing all the lines\n    * @throws IOException if an I/O error occurs\n@@ -204,6 +217,10 @@ public static List<String> readLines(Readable r) throws IOException {\n    * {@code readable}. Note that this method may not fully consume the contents of {@code readable}\n    * if the processor stops processing early.\n    *\n+   * <p><b>Users who can use {@code Stream}:</b> If your input is a {@link Reader}, consider\n+   * wrapping it with a {@link BufferedReader} and operating on the {@link java.util.stream.Stream}\n+   * of lines returned by {@link BufferedReader#lines()}.\n+   *\n    * @throws IOException if an I/O error occurs\n    * @since 14.0\n    */\ndiff --git a/guava/src/com/google/common/io/CharStreams.java b/guava/src/com/google/common/io/CharStreams.java\nindex 7857d7ad2947..f6686e1e97ea 100644\n--- a/guava/src/com/google/common/io/CharStreams.java\n+++ b/guava/src/com/google/common/io/CharStreams.java\n@@ -20,6 +20,7 @@\n import com.google.common.annotations.GwtIncompatible;\n import com.google.common.annotations.J2ktIncompatible;\n import com.google.errorprone.annotations.CanIgnoreReturnValue;\n+import java.io.BufferedReader;\n import java.io.Closeable;\n import java.io.EOFException;\n import java.io.IOException;\n@@ -151,6 +152,9 @@ static long copyReaderToWriter(Reader from, Writer to) throws IOException {\n    * Reads all characters from a {@link Readable} object into a {@link String}. Does not close the\n    * {@code Readable}.\n    *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, prefer {@link\n+   * Reader#readAllAsString()}.\n+   *\n    * @param r the object to read from\n    * @return a string containing all the characters\n    * @throws IOException if an I/O error occurs\n@@ -184,6 +188,15 @@ private static StringBuilder toStringBuilder(Readable r) throws IOException {\n    * <p>Does not close the {@code Readable}. If reading files or resources you should use the {@link\n    * Files#readLines} and {@link Resources#readLines} methods.\n    *\n+   * <p>This method prioritizes convenience over performance: It reads the entire input into memory\n+   * immediately. To instead read and process lines individually, use an alternative like {@link\n+   * BufferedReader#lines()}.\n+   *\n+   * <p><b>Java 25+ users:</b> If the input is a {@link Reader}, you may prefer {@link\n+   * Reader#readAllLines()}. The two may have different performance characteristics for different\n+   * {@link Reader} classes and Java versions, but both methods read the entire input into memory\n+   * immediately, so we discourage use of both when memory usage is a concern.\n+   *\n    * @param r the object to read from\n    * @return a mutable {@link List} containing all the lines\n    * @throws IOException if an I/O error occurs\n@@ -204,6 +217,10 @@ public static List<String> readLines(Readable r) throws IOException {\n    * {@code readable}. Note that this method may not fully consume the contents of {@code readable}\n    * if the processor stops processing early.\n    *\n+   * <p><b>Users who can use {@code Stream}:</b> If your input is a {@link Reader}, consider\n+   * wrapping it with a {@link BufferedReader} and operating on the {@link java.util.stream.Stream}\n+   * of lines returned by {@link BufferedReader#lines()}.\n+   *\n    * @throws IOException if an I/O error occurs\n    * @since 14.0\n    */\n",
  "additions": 34,
  "deletions": 0,
  "changed_files": 2,
  "url": "https://github.com/google/guava/pull/8029",
  "mined_at": "2025-10-25T12:54:40.867926"
}