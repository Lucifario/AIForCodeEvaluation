{
  "id": 8016,
  "repository": "google/guava",
  "title": "Use/mention `immediateVoidFuture` a little more.",
  "body": "Use/mention `immediateVoidFuture` a little more.\n\nRELNOTES=n/a\n",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-09-23T01:36:00+00:00",
  "created_at": "2025-09-23T01:13:05+00:00",
  "updated_at": "2025-09-23T01:36:01+00:00",
  "author": "copybara-service[bot]",
  "reviewers": [],
  "base_sha": "cb0e7e0cb1c62012934d998ca4d0222a758a9831",
  "head_sha": "3e1d0f4ff367a34910ecc8d3698bd16665ddf6bc",
  "review_comments": [],
  "pr_comments": [],
  "files_changed": [
    {
      "filename": "android/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "patch": "@@ -17,6 +17,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.util.concurrent.Futures.allAsList;\n import static com.google.common.util.concurrent.Futures.getDone;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.MoreExecutors.directExecutor;\n import static java.util.concurrent.Executors.newCachedThreadPool;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n@@ -66,7 +67,7 @@ public void tearDown() throws Exception {\n   public void testCallableStartsAfterFirstFutureCompletes() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(secondCallable, directExecutor());\n     assertThat(firstCallable.called).isTrue();\n@@ -78,10 +79,10 @@ public void testCallableStartsAfterFirstFutureCompletes() {\n   public void testCancellationDoesNotViolateSerialization() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     ListenableFuture<@Nullable Void> secondFuture =\n         serializer.submitAsync(secondCallable, directExecutor());\n-    TestCallable thirdCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable thirdCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(thirdCallable, directExecutor());\n     secondFuture.cancel(true);"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -19,14 +19,14 @@\n import static com.google.common.util.concurrent.Futures.immediateCancelledFuture;\n import static com.google.common.util.concurrent.Futures.immediateFailedFuture;\n import static com.google.common.util.concurrent.Futures.immediateFuture;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.ReflectionFreeAssertThrows.assertThrows;\n \n import com.google.common.annotations.GwtCompatible;\n import java.util.concurrent.CancellationException;\n import java.util.concurrent.ExecutionException;\n import junit.framework.TestCase;\n import org.jspecify.annotations.NullUnmarked;\n-import org.jspecify.annotations.Nullable;\n \n /** Unit tests for {@link Futures#getDone}. */\n @GwtCompatible\n@@ -37,7 +37,7 @@ public void testSuccessful() throws ExecutionException {\n   }\n \n   public void testSuccessfulNull() throws ExecutionException {\n-    assertThat(getDone(Futures.<@Nullable String>immediateFuture(null))).isEqualTo(null);\n+    assertThat(getDone(immediateVoidFuture())).isEqualTo(null);\n   }\n \n   public void testFailed() {"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -237,7 +237,7 @@ private static class BarChild extends Bar {}\n \n   @J2ktIncompatible // TODO(b/324550390): Enable\n   public void testTransform_genericsNull() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> transformedFuture = transform(nullFuture, constant(null), directExecutor());\n     assertNull(getDone(transformedFuture));\n   }\n@@ -1555,7 +1555,7 @@ public ListenableFuture<O> apply(I input) {\n \n   @J2ktIncompatible // Wildcard generics\n   public void testTransformAsync_genericsWildcard_asyncFunction() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> chainedFuture =\n         transformAsync(nullFuture, constantAsyncFunction(nullFuture), directExecutor());\n     assertNull(getDone(chainedFuture));"
    },
    {
      "filename": "android/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "patch": "@@ -222,9 +222,9 @@ public String toString() {\n     Runnable listener =\n         () -> {\n           if (taskFuture.isDone()) {\n-            // Since the value of oldFuture can only ever be immediateFuture(null) or setFuture of\n-            // a future that eventually came from immediateFuture(null), this doesn't leak\n-            // throwables or completion values.\n+            // Since the value of oldFuture can only ever be immediateVoidFuture() or setFuture of a\n+            // future that eventually came from immediateVoidFuture(), this doesn't leak throwables\n+            // or completion values.\n             newFuture.setFuture(oldFuture);\n           } else if (outputFuture.isCancelled() && taskExecutor.trySetCancelled()) {\n             // If this CAS succeeds, we know that the provided callable will never be invoked,"
    },
    {
      "filename": "guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "patch": "@@ -17,6 +17,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.util.concurrent.Futures.allAsList;\n import static com.google.common.util.concurrent.Futures.getDone;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.MoreExecutors.directExecutor;\n import static java.util.concurrent.Executors.newCachedThreadPool;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n@@ -66,7 +67,7 @@ public void tearDown() throws Exception {\n   public void testCallableStartsAfterFirstFutureCompletes() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(secondCallable, directExecutor());\n     assertThat(firstCallable.called).isTrue();\n@@ -78,10 +79,10 @@ public void testCallableStartsAfterFirstFutureCompletes() {\n   public void testCancellationDoesNotViolateSerialization() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     ListenableFuture<@Nullable Void> secondFuture =\n         serializer.submitAsync(secondCallable, directExecutor());\n-    TestCallable thirdCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable thirdCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(thirdCallable, directExecutor());\n     secondFuture.cancel(true);"
    },
    {
      "filename": "guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -19,14 +19,14 @@\n import static com.google.common.util.concurrent.Futures.immediateCancelledFuture;\n import static com.google.common.util.concurrent.Futures.immediateFailedFuture;\n import static com.google.common.util.concurrent.Futures.immediateFuture;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.ReflectionFreeAssertThrows.assertThrows;\n \n import com.google.common.annotations.GwtCompatible;\n import java.util.concurrent.CancellationException;\n import java.util.concurrent.ExecutionException;\n import junit.framework.TestCase;\n import org.jspecify.annotations.NullUnmarked;\n-import org.jspecify.annotations.Nullable;\n \n /** Unit tests for {@link Futures#getDone}. */\n @GwtCompatible\n@@ -37,7 +37,7 @@ public void testSuccessful() throws ExecutionException {\n   }\n \n   public void testSuccessfulNull() throws ExecutionException {\n-    assertThat(getDone(Futures.<@Nullable String>immediateFuture(null))).isEqualTo(null);\n+    assertThat(getDone(immediateVoidFuture())).isEqualTo(null);\n   }\n \n   public void testFailed() {"
    },
    {
      "filename": "guava-tests/test/com/google/common/util/concurrent/FuturesTest.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -237,7 +237,7 @@ private static class BarChild extends Bar {}\n \n   @J2ktIncompatible // TODO(b/324550390): Enable\n   public void testTransform_genericsNull() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> transformedFuture = transform(nullFuture, constant(null), directExecutor());\n     assertNull(getDone(transformedFuture));\n   }\n@@ -1555,7 +1555,7 @@ public ListenableFuture<O> apply(I input) {\n \n   @J2ktIncompatible // Wildcard generics\n   public void testTransformAsync_genericsWildcard_asyncFunction() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> chainedFuture =\n         transformAsync(nullFuture, constantAsyncFunction(nullFuture), directExecutor());\n     assertNull(getDone(chainedFuture));"
    },
    {
      "filename": "guava/src/com/google/common/util/concurrent/ExecutionSequencer.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "patch": "@@ -222,9 +222,9 @@ public String toString() {\n     Runnable listener =\n         () -> {\n           if (taskFuture.isDone()) {\n-            // Since the value of oldFuture can only ever be immediateFuture(null) or setFuture of\n-            // a future that eventually came from immediateFuture(null), this doesn't leak\n-            // throwables or completion values.\n+            // Since the value of oldFuture can only ever be immediateVoidFuture() or setFuture of a\n+            // future that eventually came from immediateVoidFuture(), this doesn't leak throwables\n+            // or completion values.\n             newFuture.setFuture(oldFuture);\n           } else if (outputFuture.isCancelled() && taskExecutor.trySetCancelled()) {\n             // If this CAS succeeds, we know that the provided callable will never be invoked,"
    }
  ],
  "diff": "diff --git a/android/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java b/android/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java\nindex a8596bfb7eee..f2503d42b808 100644\n--- a/android/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java\n+++ b/android/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java\n@@ -17,6 +17,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.util.concurrent.Futures.allAsList;\n import static com.google.common.util.concurrent.Futures.getDone;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.MoreExecutors.directExecutor;\n import static java.util.concurrent.Executors.newCachedThreadPool;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n@@ -66,7 +67,7 @@ public void tearDown() throws Exception {\n   public void testCallableStartsAfterFirstFutureCompletes() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(secondCallable, directExecutor());\n     assertThat(firstCallable.called).isTrue();\n@@ -78,10 +79,10 @@ public void testCallableStartsAfterFirstFutureCompletes() {\n   public void testCancellationDoesNotViolateSerialization() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     ListenableFuture<@Nullable Void> secondFuture =\n         serializer.submitAsync(secondCallable, directExecutor());\n-    TestCallable thirdCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable thirdCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(thirdCallable, directExecutor());\n     secondFuture.cancel(true);\ndiff --git a/android/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java b/android/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java\nindex 7c8cf27d1914..9a8f7d65b652 100644\n--- a/android/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java\n+++ b/android/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java\n@@ -19,6 +19,7 @@\n import static com.google.common.util.concurrent.Futures.immediateCancelledFuture;\n import static com.google.common.util.concurrent.Futures.immediateFailedFuture;\n import static com.google.common.util.concurrent.Futures.immediateFuture;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.ReflectionFreeAssertThrows.assertThrows;\n \n import com.google.common.annotations.GwtCompatible;\n@@ -26,7 +27,6 @@\n import java.util.concurrent.ExecutionException;\n import junit.framework.TestCase;\n import org.jspecify.annotations.NullUnmarked;\n-import org.jspecify.annotations.Nullable;\n \n /** Unit tests for {@link Futures#getDone}. */\n @GwtCompatible\n@@ -37,7 +37,7 @@ public void testSuccessful() throws ExecutionException {\n   }\n \n   public void testSuccessfulNull() throws ExecutionException {\n-    assertThat(getDone(Futures.<@Nullable String>immediateFuture(null))).isEqualTo(null);\n+    assertThat(getDone(immediateVoidFuture())).isEqualTo(null);\n   }\n \n   public void testFailed() {\ndiff --git a/android/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java b/android/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java\nindex 695af568a2b4..697febc40fb8 100644\n--- a/android/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java\n+++ b/android/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java\n@@ -237,7 +237,7 @@ private static class BarChild extends Bar {}\n \n   @J2ktIncompatible // TODO(b/324550390): Enable\n   public void testTransform_genericsNull() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> transformedFuture = transform(nullFuture, constant(null), directExecutor());\n     assertNull(getDone(transformedFuture));\n   }\n@@ -1555,7 +1555,7 @@ public ListenableFuture<O> apply(I input) {\n \n   @J2ktIncompatible // Wildcard generics\n   public void testTransformAsync_genericsWildcard_asyncFunction() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> chainedFuture =\n         transformAsync(nullFuture, constantAsyncFunction(nullFuture), directExecutor());\n     assertNull(getDone(chainedFuture));\ndiff --git a/android/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java b/android/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java\nindex d8aa18a5155a..557f42fc6868 100644\n--- a/android/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java\n+++ b/android/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java\n@@ -222,9 +222,9 @@ public String toString() {\n     Runnable listener =\n         () -> {\n           if (taskFuture.isDone()) {\n-            // Since the value of oldFuture can only ever be immediateFuture(null) or setFuture of\n-            // a future that eventually came from immediateFuture(null), this doesn't leak\n-            // throwables or completion values.\n+            // Since the value of oldFuture can only ever be immediateVoidFuture() or setFuture of a\n+            // future that eventually came from immediateVoidFuture(), this doesn't leak throwables\n+            // or completion values.\n             newFuture.setFuture(oldFuture);\n           } else if (outputFuture.isCancelled() && taskExecutor.trySetCancelled()) {\n             // If this CAS succeeds, we know that the provided callable will never be invoked,\ndiff --git a/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java b/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java\nindex a8596bfb7eee..f2503d42b808 100644\n--- a/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java\n+++ b/guava-tests/test/com/google/common/util/concurrent/ExecutionSequencerTest.java\n@@ -17,6 +17,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.util.concurrent.Futures.allAsList;\n import static com.google.common.util.concurrent.Futures.getDone;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.MoreExecutors.directExecutor;\n import static java.util.concurrent.Executors.newCachedThreadPool;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n@@ -66,7 +67,7 @@ public void tearDown() throws Exception {\n   public void testCallableStartsAfterFirstFutureCompletes() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(secondCallable, directExecutor());\n     assertThat(firstCallable.called).isTrue();\n@@ -78,10 +79,10 @@ public void testCallableStartsAfterFirstFutureCompletes() {\n   public void testCancellationDoesNotViolateSerialization() {\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError = serializer.submitAsync(firstCallable, directExecutor());\n-    TestCallable secondCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable secondCallable = new TestCallable(immediateVoidFuture());\n     ListenableFuture<@Nullable Void> secondFuture =\n         serializer.submitAsync(secondCallable, directExecutor());\n-    TestCallable thirdCallable = new TestCallable(Futures.immediateFuture(null));\n+    TestCallable thirdCallable = new TestCallable(immediateVoidFuture());\n     @SuppressWarnings({\"unused\", \"nullness\"})\n     Future<?> possiblyIgnoredError1 = serializer.submitAsync(thirdCallable, directExecutor());\n     secondFuture.cancel(true);\ndiff --git a/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java b/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java\nindex 7c8cf27d1914..9a8f7d65b652 100644\n--- a/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java\n+++ b/guava-tests/test/com/google/common/util/concurrent/FuturesGetDoneTest.java\n@@ -19,6 +19,7 @@\n import static com.google.common.util.concurrent.Futures.immediateCancelledFuture;\n import static com.google.common.util.concurrent.Futures.immediateFailedFuture;\n import static com.google.common.util.concurrent.Futures.immediateFuture;\n+import static com.google.common.util.concurrent.Futures.immediateVoidFuture;\n import static com.google.common.util.concurrent.ReflectionFreeAssertThrows.assertThrows;\n \n import com.google.common.annotations.GwtCompatible;\n@@ -26,7 +27,6 @@\n import java.util.concurrent.ExecutionException;\n import junit.framework.TestCase;\n import org.jspecify.annotations.NullUnmarked;\n-import org.jspecify.annotations.Nullable;\n \n /** Unit tests for {@link Futures#getDone}. */\n @GwtCompatible\n@@ -37,7 +37,7 @@ public void testSuccessful() throws ExecutionException {\n   }\n \n   public void testSuccessfulNull() throws ExecutionException {\n-    assertThat(getDone(Futures.<@Nullable String>immediateFuture(null))).isEqualTo(null);\n+    assertThat(getDone(immediateVoidFuture())).isEqualTo(null);\n   }\n \n   public void testFailed() {\ndiff --git a/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java b/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java\nindex 695af568a2b4..697febc40fb8 100644\n--- a/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java\n+++ b/guava-tests/test/com/google/common/util/concurrent/FuturesTest.java\n@@ -237,7 +237,7 @@ private static class BarChild extends Bar {}\n \n   @J2ktIncompatible // TODO(b/324550390): Enable\n   public void testTransform_genericsNull() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> transformedFuture = transform(nullFuture, constant(null), directExecutor());\n     assertNull(getDone(transformedFuture));\n   }\n@@ -1555,7 +1555,7 @@ public ListenableFuture<O> apply(I input) {\n \n   @J2ktIncompatible // Wildcard generics\n   public void testTransformAsync_genericsWildcard_asyncFunction() throws Exception {\n-    ListenableFuture<?> nullFuture = immediateFuture(null);\n+    ListenableFuture<?> nullFuture = immediateVoidFuture();\n     ListenableFuture<?> chainedFuture =\n         transformAsync(nullFuture, constantAsyncFunction(nullFuture), directExecutor());\n     assertNull(getDone(chainedFuture));\ndiff --git a/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java b/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java\nindex d8aa18a5155a..557f42fc6868 100644\n--- a/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java\n+++ b/guava/src/com/google/common/util/concurrent/ExecutionSequencer.java\n@@ -222,9 +222,9 @@ public String toString() {\n     Runnable listener =\n         () -> {\n           if (taskFuture.isDone()) {\n-            // Since the value of oldFuture can only ever be immediateFuture(null) or setFuture of\n-            // a future that eventually came from immediateFuture(null), this doesn't leak\n-            // throwables or completion values.\n+            // Since the value of oldFuture can only ever be immediateVoidFuture() or setFuture of a\n+            // future that eventually came from immediateVoidFuture(), this doesn't leak throwables\n+            // or completion values.\n             newFuture.setFuture(oldFuture);\n           } else if (outputFuture.isCancelled() && taskExecutor.trySetCancelled()) {\n             // If this CAS succeeds, we know that the provided callable will never be invoked,\n",
  "additions": 22,
  "deletions": 20,
  "changed_files": 8,
  "url": "https://github.com/google/guava/pull/8016",
  "mined_at": "2025-10-25T12:57:09.486730"
}