{
  "id": 8046,
  "repository": "google/guava",
  "title": "Deprecate the `(long, TimeUnit)`-based APIs in `CacheBuilder`; please use the  `Duration`-based APIs instead.",
  "body": "Deprecate the `(long, TimeUnit)`-based APIs in `CacheBuilder`; please use the  `Duration`-based APIs instead.\n\nRELNOTES=deprecate legacy CacheBuilder APIs\n",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-10-07T18:47:47+00:00",
  "created_at": "2025-10-07T18:21:42+00:00",
  "updated_at": "2025-10-07T18:47:47+00:00",
  "author": "copybara-service[bot]",
  "reviewers": [],
  "base_sha": "909c593c61a656c2d70f0f9bd1cb0e5cdf43a556",
  "head_sha": "73f8b0bb849148df238ebe073bbcb6f6359f5dd5",
  "review_comments": [],
  "pr_comments": [],
  "files_changed": [
    {
      "filename": "android/guava/src/com/google/common/cache/CacheBuilder.java",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "patch": "@@ -750,8 +750,9 @@ public CacheBuilder<K, V> expireAfterWrite(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterWrite} was already set\n+   * @deprecated Use {@link #expireAfterWrite(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterWrite(long duration, TimeUnit unit) {\n     checkState(\n@@ -829,8 +830,9 @@ public CacheBuilder<K, V> expireAfterAccess(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterAccess} was already set\n+   * @deprecated Use {@link #expireAfterAccess(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterAccess(long duration, TimeUnit unit) {\n     checkState(\n@@ -915,9 +917,10 @@ public CacheBuilder<K, V> refreshAfterWrite(Duration duration) {\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #refreshAfterWrite} was already set\n    * @since 11.0\n+   * @deprecated Use {@link #refreshAfterWrite(Duration)} instead.\n    */\n   @GwtIncompatible // To be supported (synchronously).\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> refreshAfterWrite(long duration, TimeUnit unit) {\n     checkNotNull(unit);"
    },
    {
      "filename": "guava/src/com/google/common/cache/CacheBuilder.java",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "patch": "@@ -749,8 +749,9 @@ public CacheBuilder<K, V> expireAfterWrite(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterWrite} was already set\n+   * @deprecated Use {@link #expireAfterWrite(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterWrite(long duration, TimeUnit unit) {\n     checkState(\n@@ -827,8 +828,9 @@ public CacheBuilder<K, V> expireAfterAccess(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterAccess} was already set\n+   * @deprecated Use {@link #expireAfterAccess(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterAccess(long duration, TimeUnit unit) {\n     checkState(\n@@ -912,9 +914,10 @@ public CacheBuilder<K, V> refreshAfterWrite(Duration duration) {\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #refreshAfterWrite} was already set\n    * @since 11.0\n+   * @deprecated Use {@link #refreshAfterWrite(Duration)} instead.\n    */\n   @GwtIncompatible // To be supported (synchronously).\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> refreshAfterWrite(long duration, TimeUnit unit) {\n     checkNotNull(unit);"
    }
  ],
  "diff": "diff --git a/android/guava/src/com/google/common/cache/CacheBuilder.java b/android/guava/src/com/google/common/cache/CacheBuilder.java\nindex 04e1fdacd206..477873ab57fa 100644\n--- a/android/guava/src/com/google/common/cache/CacheBuilder.java\n+++ b/android/guava/src/com/google/common/cache/CacheBuilder.java\n@@ -750,8 +750,9 @@ public CacheBuilder<K, V> expireAfterWrite(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterWrite} was already set\n+   * @deprecated Use {@link #expireAfterWrite(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterWrite(long duration, TimeUnit unit) {\n     checkState(\n@@ -829,8 +830,9 @@ public CacheBuilder<K, V> expireAfterAccess(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterAccess} was already set\n+   * @deprecated Use {@link #expireAfterAccess(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterAccess(long duration, TimeUnit unit) {\n     checkState(\n@@ -915,9 +917,10 @@ public CacheBuilder<K, V> refreshAfterWrite(Duration duration) {\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #refreshAfterWrite} was already set\n    * @since 11.0\n+   * @deprecated Use {@link #refreshAfterWrite(Duration)} instead.\n    */\n   @GwtIncompatible // To be supported (synchronously).\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> refreshAfterWrite(long duration, TimeUnit unit) {\n     checkNotNull(unit);\ndiff --git a/guava/src/com/google/common/cache/CacheBuilder.java b/guava/src/com/google/common/cache/CacheBuilder.java\nindex bef3e95c308e..414a4b6034d3 100644\n--- a/guava/src/com/google/common/cache/CacheBuilder.java\n+++ b/guava/src/com/google/common/cache/CacheBuilder.java\n@@ -749,8 +749,9 @@ public CacheBuilder<K, V> expireAfterWrite(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterWrite} was already set\n+   * @deprecated Use {@link #expireAfterWrite(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterWrite(long duration, TimeUnit unit) {\n     checkState(\n@@ -827,8 +828,9 @@ public CacheBuilder<K, V> expireAfterAccess(Duration duration) {\n    * @return this {@code CacheBuilder} instance (for chaining)\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #expireAfterAccess} was already set\n+   * @deprecated Use {@link #expireAfterAccess(Duration)} instead.\n    */\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> expireAfterAccess(long duration, TimeUnit unit) {\n     checkState(\n@@ -912,9 +914,10 @@ public CacheBuilder<K, V> refreshAfterWrite(Duration duration) {\n    * @throws IllegalArgumentException if {@code duration} is negative\n    * @throws IllegalStateException if {@link #refreshAfterWrite} was already set\n    * @since 11.0\n+   * @deprecated Use {@link #refreshAfterWrite(Duration)} instead.\n    */\n   @GwtIncompatible // To be supported (synchronously).\n-  @SuppressWarnings(\"GoodTime\") // should accept a Duration\n+  @Deprecated // GoodTime\n   @CanIgnoreReturnValue\n   public CacheBuilder<K, V> refreshAfterWrite(long duration, TimeUnit unit) {\n     checkNotNull(unit);\n",
  "additions": 12,
  "deletions": 6,
  "changed_files": 2,
  "url": "https://github.com/google/guava/pull/8046",
  "mined_at": "2025-10-25T12:50:22.296551"
}