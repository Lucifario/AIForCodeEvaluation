{
  "id": 7981,
  "repository": "google/guava",
  "title": "Address a few Error Prone warnings.",
  "body": "Address a few Error Prone warnings.\n\nRELNOTES=n/a\n",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-09-11T17:06:41+00:00",
  "created_at": "2025-09-11T16:42:00+00:00",
  "updated_at": "2025-09-11T17:06:41+00:00",
  "author": "copybara-service[bot]",
  "reviewers": [],
  "base_sha": "ce759791080a009572bc2496af44b7f4894dc1e4",
  "head_sha": "2de2021fb0c25215e6a5a745878bf6203e32d52c",
  "review_comments": [],
  "pr_comments": [],
  "files_changed": [
    {
      "filename": "android/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java",
      "status": "modified",
      "additions": 5,
      "deletions": 11,
      "changes": 16,
      "patch": "@@ -45,30 +45,24 @@ public class SubscriberExceptionContext {\n   }\n \n   /**\n-   * @return The {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n-   *     a new event based on the error.\n+   * Returns the {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n+   * a new event based on the error.\n    */\n   public EventBus getEventBus() {\n     return eventBus;\n   }\n \n-  /**\n-   * @return The event object that caused the subscriber to throw.\n-   */\n+  /** Returns the event object that caused the subscriber to throw. */\n   public Object getEvent() {\n     return event;\n   }\n \n-  /**\n-   * @return The object context that the subscriber was called on.\n-   */\n+  /** Returns the object context that the subscriber was called on. */\n   public Object getSubscriber() {\n     return subscriber;\n   }\n \n-  /**\n-   * @return The subscribed method that threw the exception.\n-   */\n+  /** Returns the subscribed method that threw the exception. */\n   public Method getSubscriberMethod() {\n     return subscriberMethod;\n   }"
    },
    {
      "filename": "android/guava/src/com/google/common/math/IntMath.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -517,10 +517,10 @@ public static int checkedPow(int b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {"
    },
    {
      "filename": "android/guava/src/com/google/common/math/LongMath.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -615,10 +615,10 @@ public static long checkedPow(long b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {"
    },
    {
      "filename": "android/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "patch": "@@ -15,6 +15,7 @@\n package com.google.common.util.concurrent;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayListWithCapacity;\n import static java.util.Objects.requireNonNull;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -459,11 +460,11 @@ private CycleDetectingLockFactory(Policy policy) {\n    */\n   // This is logically a Set, but an ArrayList is used to minimize the amount\n   // of allocation done on lock()/unlock().\n-  private static final ThreadLocal<ArrayList<LockGraphNode>> acquiredLocks =\n-      new ThreadLocal<ArrayList<LockGraphNode>>() {\n+  private static final ThreadLocal<List<LockGraphNode>> acquiredLocks =\n+      new ThreadLocal<List<LockGraphNode>>() {\n         @Override\n-        protected ArrayList<LockGraphNode> initialValue() {\n-          return Lists.<LockGraphNode>newArrayListWithCapacity(3);\n+        protected List<LockGraphNode> initialValue() {\n+          return newArrayListWithCapacity(3);\n         }\n       };\n \n@@ -713,7 +714,7 @@ void checkAcquiredLock(Policy policy, LockGraphNode acquiredLock) {\n   private void aboutToAcquire(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       node.checkAcquiredLocks(policy, acquiredLockList);\n       acquiredLockList.add(node);\n@@ -728,7 +729,7 @@ private void aboutToAcquire(CycleDetectingLock lock) {\n   private static void lockStateChanged(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       // Iterate in reverse because locks are usually locked/unlocked in a\n       // LIFO order."
    },
    {
      "filename": "android/guava/src/com/google/common/xml/XmlEscapers.java",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "patch": "@@ -97,8 +97,6 @@ public static Escaper xmlContentEscaper() {\n   public static Escaper xmlAttributeEscaper() {\n     return XML_ATTRIBUTE_ESCAPER;\n   }\n-\n-  private static final Escaper XML_ESCAPER;\n   private static final Escaper XML_CONTENT_ESCAPER;\n   private static final Escaper XML_ATTRIBUTE_ESCAPER;\n \n@@ -134,7 +132,6 @@ public static Escaper xmlAttributeEscaper() {\n     XML_CONTENT_ESCAPER = builder.build();\n     builder.addEscape('\\'', \"&apos;\");\n     builder.addEscape('\"', \"&quot;\");\n-    XML_ESCAPER = builder.build();\n     builder.addEscape('\\t', \"&#x9;\");\n     builder.addEscape('\\n', \"&#xA;\");\n     builder.addEscape('\\r', \"&#xD;\");"
    },
    {
      "filename": "guava/src/com/google/common/base/Platform.java",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "patch": "@@ -18,7 +18,6 @@\n import com.google.common.annotations.GwtCompatible;\n import java.lang.ref.WeakReference;\n import java.util.Locale;\n-import java.util.logging.Logger;\n import java.util.regex.Pattern;\n import org.jspecify.annotations.Nullable;\n \n@@ -29,7 +28,6 @@\n  */\n @GwtCompatible\n final class Platform {\n-  private static final Logger logger = Logger.getLogger(Platform.class.getName());\n   private static final PatternCompiler patternCompiler = loadPatternCompiler();\n \n   private Platform() {}"
    },
    {
      "filename": "guava/src/com/google/common/eventbus/SubscriberExceptionContext.java",
      "status": "modified",
      "additions": 5,
      "deletions": 11,
      "changes": 16,
      "patch": "@@ -45,30 +45,24 @@ public class SubscriberExceptionContext {\n   }\n \n   /**\n-   * @return The {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n-   *     a new event based on the error.\n+   * Returns the {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n+   * a new event based on the error.\n    */\n   public EventBus getEventBus() {\n     return eventBus;\n   }\n \n-  /**\n-   * @return The event object that caused the subscriber to throw.\n-   */\n+  /** Returns the event object that caused the subscriber to throw. */\n   public Object getEvent() {\n     return event;\n   }\n \n-  /**\n-   * @return The object context that the subscriber was called on.\n-   */\n+  /** Returns the object context that the subscriber was called on. */\n   public Object getSubscriber() {\n     return subscriber;\n   }\n \n-  /**\n-   * @return The subscribed method that threw the exception.\n-   */\n+  /** Returns the subscribed method that threw the exception. */\n   public Method getSubscriberMethod() {\n     return subscriberMethod;\n   }"
    },
    {
      "filename": "guava/src/com/google/common/math/IntMath.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -517,10 +517,10 @@ public static int checkedPow(int b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {"
    },
    {
      "filename": "guava/src/com/google/common/math/LongMath.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -615,10 +615,10 @@ public static long checkedPow(long b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {"
    },
    {
      "filename": "guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java",
      "status": "modified",
      "additions": 7,
      "deletions": 6,
      "changes": 13,
      "patch": "@@ -15,6 +15,7 @@\n package com.google.common.util.concurrent;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayListWithCapacity;\n import static java.util.Objects.requireNonNull;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -459,11 +460,11 @@ private CycleDetectingLockFactory(Policy policy) {\n    */\n   // This is logically a Set, but an ArrayList is used to minimize the amount\n   // of allocation done on lock()/unlock().\n-  private static final ThreadLocal<ArrayList<LockGraphNode>> acquiredLocks =\n-      new ThreadLocal<ArrayList<LockGraphNode>>() {\n+  private static final ThreadLocal<List<LockGraphNode>> acquiredLocks =\n+      new ThreadLocal<List<LockGraphNode>>() {\n         @Override\n-        protected ArrayList<LockGraphNode> initialValue() {\n-          return Lists.<LockGraphNode>newArrayListWithCapacity(3);\n+        protected List<LockGraphNode> initialValue() {\n+          return newArrayListWithCapacity(3);\n         }\n       };\n \n@@ -713,7 +714,7 @@ void checkAcquiredLock(Policy policy, LockGraphNode acquiredLock) {\n   private void aboutToAcquire(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       node.checkAcquiredLocks(policy, acquiredLockList);\n       acquiredLockList.add(node);\n@@ -728,7 +729,7 @@ private void aboutToAcquire(CycleDetectingLock lock) {\n   private static void lockStateChanged(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       // Iterate in reverse because locks are usually locked/unlocked in a\n       // LIFO order."
    },
    {
      "filename": "guava/src/com/google/common/xml/XmlEscapers.java",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "patch": "@@ -97,8 +97,6 @@ public static Escaper xmlContentEscaper() {\n   public static Escaper xmlAttributeEscaper() {\n     return XML_ATTRIBUTE_ESCAPER;\n   }\n-\n-  private static final Escaper XML_ESCAPER;\n   private static final Escaper XML_CONTENT_ESCAPER;\n   private static final Escaper XML_ATTRIBUTE_ESCAPER;\n \n@@ -134,7 +132,6 @@ public static Escaper xmlAttributeEscaper() {\n     XML_CONTENT_ESCAPER = builder.build();\n     builder.addEscape('\\'', \"&apos;\");\n     builder.addEscape('\"', \"&quot;\");\n-    XML_ESCAPER = builder.build();\n     builder.addEscape('\\t', \"&#x9;\");\n     builder.addEscape('\\n', \"&#xA;\");\n     builder.addEscape('\\r', \"&#xD;\");"
    }
  ],
  "diff": "diff --git a/android/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java b/android/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java\nindex f6beaad511d7..df7b66d6deed 100644\n--- a/android/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java\n+++ b/android/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java\n@@ -45,30 +45,24 @@ public class SubscriberExceptionContext {\n   }\n \n   /**\n-   * @return The {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n-   *     a new event based on the error.\n+   * Returns the {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n+   * a new event based on the error.\n    */\n   public EventBus getEventBus() {\n     return eventBus;\n   }\n \n-  /**\n-   * @return The event object that caused the subscriber to throw.\n-   */\n+  /** Returns the event object that caused the subscriber to throw. */\n   public Object getEvent() {\n     return event;\n   }\n \n-  /**\n-   * @return The object context that the subscriber was called on.\n-   */\n+  /** Returns the object context that the subscriber was called on. */\n   public Object getSubscriber() {\n     return subscriber;\n   }\n \n-  /**\n-   * @return The subscribed method that threw the exception.\n-   */\n+  /** Returns the subscribed method that threw the exception. */\n   public Method getSubscriberMethod() {\n     return subscriberMethod;\n   }\ndiff --git a/android/guava/src/com/google/common/math/IntMath.java b/android/guava/src/com/google/common/math/IntMath.java\nindex 8a19ffa75938..b2957cdcd0b8 100644\n--- a/android/guava/src/com/google/common/math/IntMath.java\n+++ b/android/guava/src/com/google/common/math/IntMath.java\n@@ -517,10 +517,10 @@ public static int checkedPow(int b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {\ndiff --git a/android/guava/src/com/google/common/math/LongMath.java b/android/guava/src/com/google/common/math/LongMath.java\nindex 272791a649bc..c1c91cdf9732 100644\n--- a/android/guava/src/com/google/common/math/LongMath.java\n+++ b/android/guava/src/com/google/common/math/LongMath.java\n@@ -615,10 +615,10 @@ public static long checkedPow(long b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {\ndiff --git a/android/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java b/android/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java\nindex 5040b64eb192..a59f70959c52 100644\n--- a/android/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java\n+++ b/android/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java\n@@ -15,6 +15,7 @@\n package com.google.common.util.concurrent;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayListWithCapacity;\n import static java.util.Objects.requireNonNull;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -459,11 +460,11 @@ private CycleDetectingLockFactory(Policy policy) {\n    */\n   // This is logically a Set, but an ArrayList is used to minimize the amount\n   // of allocation done on lock()/unlock().\n-  private static final ThreadLocal<ArrayList<LockGraphNode>> acquiredLocks =\n-      new ThreadLocal<ArrayList<LockGraphNode>>() {\n+  private static final ThreadLocal<List<LockGraphNode>> acquiredLocks =\n+      new ThreadLocal<List<LockGraphNode>>() {\n         @Override\n-        protected ArrayList<LockGraphNode> initialValue() {\n-          return Lists.<LockGraphNode>newArrayListWithCapacity(3);\n+        protected List<LockGraphNode> initialValue() {\n+          return newArrayListWithCapacity(3);\n         }\n       };\n \n@@ -713,7 +714,7 @@ void checkAcquiredLock(Policy policy, LockGraphNode acquiredLock) {\n   private void aboutToAcquire(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       node.checkAcquiredLocks(policy, acquiredLockList);\n       acquiredLockList.add(node);\n@@ -728,7 +729,7 @@ private void aboutToAcquire(CycleDetectingLock lock) {\n   private static void lockStateChanged(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       // Iterate in reverse because locks are usually locked/unlocked in a\n       // LIFO order.\ndiff --git a/android/guava/src/com/google/common/xml/XmlEscapers.java b/android/guava/src/com/google/common/xml/XmlEscapers.java\nindex 9ea51415b251..72782eee1e61 100644\n--- a/android/guava/src/com/google/common/xml/XmlEscapers.java\n+++ b/android/guava/src/com/google/common/xml/XmlEscapers.java\n@@ -97,8 +97,6 @@ public static Escaper xmlContentEscaper() {\n   public static Escaper xmlAttributeEscaper() {\n     return XML_ATTRIBUTE_ESCAPER;\n   }\n-\n-  private static final Escaper XML_ESCAPER;\n   private static final Escaper XML_CONTENT_ESCAPER;\n   private static final Escaper XML_ATTRIBUTE_ESCAPER;\n \n@@ -134,7 +132,6 @@ public static Escaper xmlAttributeEscaper() {\n     XML_CONTENT_ESCAPER = builder.build();\n     builder.addEscape('\\'', \"&apos;\");\n     builder.addEscape('\"', \"&quot;\");\n-    XML_ESCAPER = builder.build();\n     builder.addEscape('\\t', \"&#x9;\");\n     builder.addEscape('\\n', \"&#xA;\");\n     builder.addEscape('\\r', \"&#xD;\");\ndiff --git a/guava/src/com/google/common/base/Platform.java b/guava/src/com/google/common/base/Platform.java\nindex 5be90156fe7b..6b1728db23c5 100644\n--- a/guava/src/com/google/common/base/Platform.java\n+++ b/guava/src/com/google/common/base/Platform.java\n@@ -18,7 +18,6 @@\n import com.google.common.annotations.GwtCompatible;\n import java.lang.ref.WeakReference;\n import java.util.Locale;\n-import java.util.logging.Logger;\n import java.util.regex.Pattern;\n import org.jspecify.annotations.Nullable;\n \n@@ -29,7 +28,6 @@\n  */\n @GwtCompatible\n final class Platform {\n-  private static final Logger logger = Logger.getLogger(Platform.class.getName());\n   private static final PatternCompiler patternCompiler = loadPatternCompiler();\n \n   private Platform() {}\ndiff --git a/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java b/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java\nindex f6beaad511d7..df7b66d6deed 100644\n--- a/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java\n+++ b/guava/src/com/google/common/eventbus/SubscriberExceptionContext.java\n@@ -45,30 +45,24 @@ public class SubscriberExceptionContext {\n   }\n \n   /**\n-   * @return The {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n-   *     a new event based on the error.\n+   * Returns the {@link EventBus} that handled the event and the subscriber. Useful for broadcasting\n+   * a new event based on the error.\n    */\n   public EventBus getEventBus() {\n     return eventBus;\n   }\n \n-  /**\n-   * @return The event object that caused the subscriber to throw.\n-   */\n+  /** Returns the event object that caused the subscriber to throw. */\n   public Object getEvent() {\n     return event;\n   }\n \n-  /**\n-   * @return The object context that the subscriber was called on.\n-   */\n+  /** Returns the object context that the subscriber was called on. */\n   public Object getSubscriber() {\n     return subscriber;\n   }\n \n-  /**\n-   * @return The subscribed method that threw the exception.\n-   */\n+  /** Returns the subscribed method that threw the exception. */\n   public Method getSubscriberMethod() {\n     return subscriberMethod;\n   }\ndiff --git a/guava/src/com/google/common/math/IntMath.java b/guava/src/com/google/common/math/IntMath.java\nindex 8a19ffa75938..b2957cdcd0b8 100644\n--- a/guava/src/com/google/common/math/IntMath.java\n+++ b/guava/src/com/google/common/math/IntMath.java\n@@ -517,10 +517,10 @@ public static int checkedPow(int b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {\ndiff --git a/guava/src/com/google/common/math/LongMath.java b/guava/src/com/google/common/math/LongMath.java\nindex 272791a649bc..c1c91cdf9732 100644\n--- a/guava/src/com/google/common/math/LongMath.java\n+++ b/guava/src/com/google/common/math/LongMath.java\n@@ -615,10 +615,10 @@ public static long checkedPow(long b, int k) {\n         case 0:\n           return accum;\n         case 1:\n-          return checkedMultiply(accum, b);\n+          return Math.multiplyExact(accum, b);\n         default:\n           if ((k & 1) != 0) {\n-            accum = checkedMultiply(accum, b);\n+            accum = Math.multiplyExact(accum, b);\n           }\n           k >>= 1;\n           if (k > 0) {\ndiff --git a/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java b/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java\nindex 5040b64eb192..a59f70959c52 100644\n--- a/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java\n+++ b/guava/src/com/google/common/util/concurrent/CycleDetectingLockFactory.java\n@@ -15,6 +15,7 @@\n package com.google.common.util.concurrent;\n \n import static com.google.common.base.Preconditions.checkNotNull;\n+import static com.google.common.collect.Lists.newArrayListWithCapacity;\n import static java.util.Objects.requireNonNull;\n \n import com.google.common.annotations.GwtIncompatible;\n@@ -459,11 +460,11 @@ private CycleDetectingLockFactory(Policy policy) {\n    */\n   // This is logically a Set, but an ArrayList is used to minimize the amount\n   // of allocation done on lock()/unlock().\n-  private static final ThreadLocal<ArrayList<LockGraphNode>> acquiredLocks =\n-      new ThreadLocal<ArrayList<LockGraphNode>>() {\n+  private static final ThreadLocal<List<LockGraphNode>> acquiredLocks =\n+      new ThreadLocal<List<LockGraphNode>>() {\n         @Override\n-        protected ArrayList<LockGraphNode> initialValue() {\n-          return Lists.<LockGraphNode>newArrayListWithCapacity(3);\n+        protected List<LockGraphNode> initialValue() {\n+          return newArrayListWithCapacity(3);\n         }\n       };\n \n@@ -713,7 +714,7 @@ void checkAcquiredLock(Policy policy, LockGraphNode acquiredLock) {\n   private void aboutToAcquire(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       node.checkAcquiredLocks(policy, acquiredLockList);\n       acquiredLockList.add(node);\n@@ -728,7 +729,7 @@ private void aboutToAcquire(CycleDetectingLock lock) {\n   private static void lockStateChanged(CycleDetectingLock lock) {\n     if (!lock.isAcquiredByCurrentThread()) {\n       // requireNonNull accommodates Android's @RecentlyNullable annotation on ThreadLocal.get\n-      ArrayList<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n+      List<LockGraphNode> acquiredLockList = requireNonNull(acquiredLocks.get());\n       LockGraphNode node = lock.getLockGraphNode();\n       // Iterate in reverse because locks are usually locked/unlocked in a\n       // LIFO order.\ndiff --git a/guava/src/com/google/common/xml/XmlEscapers.java b/guava/src/com/google/common/xml/XmlEscapers.java\nindex 9ea51415b251..72782eee1e61 100644\n--- a/guava/src/com/google/common/xml/XmlEscapers.java\n+++ b/guava/src/com/google/common/xml/XmlEscapers.java\n@@ -97,8 +97,6 @@ public static Escaper xmlContentEscaper() {\n   public static Escaper xmlAttributeEscaper() {\n     return XML_ATTRIBUTE_ESCAPER;\n   }\n-\n-  private static final Escaper XML_ESCAPER;\n   private static final Escaper XML_CONTENT_ESCAPER;\n   private static final Escaper XML_ATTRIBUTE_ESCAPER;\n \n@@ -134,7 +132,6 @@ public static Escaper xmlAttributeEscaper() {\n     XML_CONTENT_ESCAPER = builder.build();\n     builder.addEscape('\\'', \"&apos;\");\n     builder.addEscape('\"', \"&quot;\");\n-    XML_ESCAPER = builder.build();\n     builder.addEscape('\\t', \"&#x9;\");\n     builder.addEscape('\\n', \"&#xA;\");\n     builder.addEscape('\\r', \"&#xD;\");\n",
  "additions": 32,
  "deletions": 50,
  "changed_files": 11,
  "url": "https://github.com/google/guava/pull/7981",
  "mined_at": "2025-10-25T13:03:51.529358"
}