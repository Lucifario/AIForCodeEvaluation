{
  "id": 8023,
  "repository": "google/guava",
  "title": "Truthify `graph` tests.",
  "body": "Truthify `graph` tests.\n\nWe'd already been using Truth a lot, so many of the examples here are just to use `assertThat(x).isTrue()` instead of `assertTrue(x)` (or similarly for \"false\" assertions). It's reasonable to debate whether that's an improvement. I will say that I've been surprised multiple times recently by `assertFalse` assertions, similar to how it's unfortunate to have `if (!some.very().long(EXPRESSION).afterWhich(youHaveForgottenAboutTheNegation)`, so I'm more a fan of using Truth there than I used to be.\n\nThe possibility of using Truth more came to my attention during cl/810738337 because of the `Optional` assertions in `GraphsTest` (and `ValueGraphTest`), where Truth provides clearer value.\n\nI noticed that `containsExactlySanityCheck` was doing [the kind of thing we discourage](https://github.com/google/truth/issues/268), in which it calls methods like `hasSize` and `contains` with the apparently intention of testing our implementations of `size()` and `contains(...)`, rather than verifying that some _earlier_ step had produced the right answer. I've migrated it to direct calls to `Collection` methods. Arguably the best approach would be to have one such test and then to use Truth's usual methods (with their superior failure messages) for \"normal\" tests.\n\nFinally, in `TraverserTest`, I suspect that we were copying to an `ImmutableList` in order to be sure that we got a good failure message even in the absence of an implementation of `Traverser.toString()`. I verified that we do get a good message even without the copy because [Truth has our backs](https://github.com/google/truth/blob/22a4601c3c6b79b285740d37e82ec8dc56d2344d/core/src/main/java/com/google/common/truth/IterableSubject.java#L107-L119):\n\n```\nunexpected (1): b\n---\nexpected      : [a]\nbut was       : [a, b]\n```\nRELNOTES=n/a\n",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-09-30T17:09:58+00:00",
  "created_at": "2025-09-25T17:51:26+00:00",
  "updated_at": "2025-09-30T17:09:59+00:00",
  "author": "copybara-service[bot]",
  "reviewers": [],
  "base_sha": "a49016f5ec6950ddea247e43424706abd646b9d4",
  "head_sha": "20e00a1c29aa8e72228a1c91bec85d8dd8d2fefa",
  "review_comments": [],
  "pr_comments": [],
  "files_changed": [
    {
      "filename": "android/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java",
      "status": "modified",
      "additions": 28,
      "deletions": 26,
      "changes": 54,
      "patch": "@@ -25,9 +25,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n-import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableList;\n@@ -187,8 +185,9 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       for (N incidentNode : network.incidentNodes(edge)) {\n         assertThat(network.nodes()).contains(incidentNode);\n         for (E adjacentEdge : network.incidentEdges(incidentNode)) {\n-          assertTrue(\n-              edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge));\n+          assertThat(\n+                  edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge))\n+              .isTrue();\n         }\n       }\n     }\n@@ -263,12 +262,14 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (N adjacentNode : sanityCheckSet(network.adjacentNodes(node))) {\n-        assertTrue(\n-            network.predecessors(node).contains(adjacentNode)\n-                || network.successors(node).contains(adjacentNode));\n-        assertTrue(\n-            !network.edgesConnecting(node, adjacentNode).isEmpty()\n-                || !network.edgesConnecting(adjacentNode, node).isEmpty());\n+        assertThat(\n+                network.predecessors(node).contains(adjacentNode)\n+                    || network.successors(node).contains(adjacentNode))\n+            .isTrue();\n+        assertThat(\n+                !network.edgesConnecting(node, adjacentNode).isEmpty()\n+                    || !network.edgesConnecting(adjacentNode, node).isEmpty())\n+            .isTrue();\n       }\n \n       for (N predecessor : sanityCheckSet(network.predecessors(node))) {\n@@ -282,9 +283,10 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (E incidentEdge : sanityCheckSet(network.incidentEdges(node))) {\n-        assertTrue(\n-            network.inEdges(node).contains(incidentEdge)\n-                || network.outEdges(node).contains(incidentEdge));\n+        assertThat(\n+                network.inEdges(node).contains(incidentEdge)\n+                    || network.outEdges(node).contains(incidentEdge))\n+            .isTrue();\n         assertThat(network.edges()).contains(incidentEdge);\n         assertThat(network.incidentNodes(incidentEdge)).contains(node);\n       }\n@@ -623,7 +625,7 @@ public void successors_nodeNotInGraph() {\n   public void addNode_newNode() {\n     assume().that(graphIsMutable()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isTrue();\n     assertThat(networkAsMutableNetwork.nodes()).contains(N1);\n   }\n \n@@ -633,7 +635,7 @@ public void addNode_existingNode() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -643,8 +645,8 @@ public void removeNode_existingNode() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N4, N1, E41);\n-    assertTrue(networkAsMutableNetwork.removeNode(N1));\n-    assertFalse(networkAsMutableNetwork.removeNode(N1));\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactly(N2, N4);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E41);\n@@ -678,7 +680,7 @@ public void removeNode_nodeNotPresent() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -736,8 +738,8 @@ public void removeEdge_existingEdge() {\n     assume().that(graphIsMutable()).isTrue();\n \n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n-    assertFalse(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edgesConnecting(N1, N2)).isEmpty();\n   }\n@@ -750,7 +752,7 @@ public void removeEdge_oneOfMany() {\n     addEdge(N1, N3, E13);\n     addEdge(N1, N4, E14);\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E13, E14);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E13));\n+    assertThat(networkAsMutableNetwork.removeEdge(E13)).isTrue();\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E14);\n   }\n \n@@ -760,7 +762,7 @@ public void removeEdge_edgeNotPresent() {\n \n     addEdge(N1, N2, E12);\n     ImmutableSet<String> edges = ImmutableSet.copyOf(networkAsMutableNetwork.edges());\n-    assertFalse(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).containsExactlyElementsIn(edges);\n   }\n \n@@ -772,7 +774,7 @@ public void removeEdge_queryAfterRemoval() {\n     @SuppressWarnings(\"unused\")\n     EndpointPair<Integer> unused =\n         networkAsMutableNetwork.incidentNodes(E12); // ensure cache (if any) is populated\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n     assertEdgeNotInGraphErrorMessage(\n         assertThrows(\n             IllegalArgumentException.class, () -> networkAsMutableNetwork.incidentNodes(E12)));\n@@ -785,7 +787,7 @@ public void removeEdge_parallelEdge() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N1, N2, E12_A);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }\n \n@@ -798,10 +800,10 @@ public void removeEdge_parallelSelfLoopEdge() {\n     addEdge(N1, N1, E11);\n     addEdge(N1, N1, E11_A);\n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11);\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).isEmpty();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "patch": "@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import java.util.Set;\n import org.jspecify.annotations.NullUnmarked;\n@@ -362,9 +361,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.successors(N1)).containsExactly(N5);\n     assertThat(graph.successors(N2)).containsExactly(N3);"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java",
      "status": "modified",
      "additions": 7,
      "deletions": 8,
      "changes": 15,
      "patch": "@@ -21,7 +21,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -509,8 +508,8 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A);\n   }\n \n@@ -547,9 +546,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -621,8 +620,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n "
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "patch": "@@ -19,7 +19,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import com.google.common.testing.EqualsTester;\n import java.util.Set;\n@@ -348,9 +347,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.adjacentNodes(N1)).containsExactly(N4, N5);\n     assertThat(graph.adjacentNodes(N2)).containsExactly(N3);"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java",
      "status": "modified",
      "additions": 8,
      "deletions": 9,
      "changes": 17,
      "patch": "@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -427,9 +426,9 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N1, E21));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N1, E21)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A, E21);\n   }\n \n@@ -466,9 +465,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -539,8 +538,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n "
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/EndpointPairTest.java",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "patch": "@@ -235,11 +235,13 @@ public void endpointPair_directed_contains() {\n     assertThat(edges).doesNotContain(EndpointPair.ordered(N3, N4)); // nodes not in graph\n   }\n \n+  // We are testing our implementations of methods on Collection.\n+  @SuppressWarnings({\"CollectionSizeTruth\", \"CollectionContainsTruth\"})\n   private static void containsExactlySanityCheck(Collection<?> collection, Object... varargs) {\n-    assertThat(collection).hasSize(varargs.length);\n+    assertThat(collection.size()).isEqualTo(varargs.length);\n     for (Object obj : varargs) {\n-      assertThat(collection).contains(obj);\n+      assertThat(collection.contains(obj)).isTrue();\n     }\n-    assertThat(collection).containsExactly(varargs);\n+    assertThat(ImmutableList.copyOf(collection.iterator())).containsExactlyElementsIn(varargs);\n   }\n }"
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "patch": "@@ -34,7 +34,6 @@ public void immutableNetwork() {\n     mutableNetwork.addNode(\"A\");\n     ImmutableNetwork<String, Integer> immutableNetwork = ImmutableNetwork.copyOf(mutableNetwork);\n \n-    assertThat(immutableNetwork.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableNetwork).isNotInstanceOf(MutableNetwork.class);\n     assertThat(immutableNetwork).isEqualTo(mutableNetwork);\n "
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "patch": "@@ -35,7 +35,6 @@ public void immutableValueGraph() {\n     ImmutableValueGraph<String, Integer> immutableValueGraph =\n         ImmutableValueGraph.copyOf(mutableValueGraph);\n \n-    assertThat(immutableValueGraph.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableValueGraph).isNotInstanceOf(MutableValueGraph.class);\n     assertThat(immutableValueGraph).isEqualTo(mutableValueGraph);\n "
    },
    {
      "filename": "android/guava-tests/test/com/google/common/graph/TraverserTest.java",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "patch": "@@ -24,7 +24,6 @@\n import static org.junit.Assert.assertThrows;\n \n import com.google.common.collect.HashMultiset;\n-import com.google.common.collect.ImmutableList;\n import com.google.common.collect.ImmutableMultimap;\n import com.google.common.collect.Iterables;\n import com.google.common.collect.Multiset;\n@@ -1213,7 +1212,7 @@ private static ImmutableGraph<Character> createSingleRootGraph() {\n   }\n \n   private static void assertEqualCharNodes(Iterable<Character> result, String expectedCharacters) {\n-    assertThat(ImmutableList.copyOf(result))\n+    assertThat(result)\n         .containsExactlyElementsIn(Chars.asList(expectedCharacters.toCharArray()))\n         .inOrder();\n   }"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/AbstractNetworkTest.java",
      "status": "modified",
      "additions": 28,
      "deletions": 26,
      "changes": 54,
      "patch": "@@ -25,9 +25,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n-import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableList;\n@@ -187,8 +185,9 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       for (N incidentNode : network.incidentNodes(edge)) {\n         assertThat(network.nodes()).contains(incidentNode);\n         for (E adjacentEdge : network.incidentEdges(incidentNode)) {\n-          assertTrue(\n-              edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge));\n+          assertThat(\n+                  edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge))\n+              .isTrue();\n         }\n       }\n     }\n@@ -270,12 +269,14 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (N adjacentNode : sanityCheckSet(network.adjacentNodes(node))) {\n-        assertTrue(\n-            network.predecessors(node).contains(adjacentNode)\n-                || network.successors(node).contains(adjacentNode));\n-        assertTrue(\n-            !network.edgesConnecting(node, adjacentNode).isEmpty()\n-                || !network.edgesConnecting(adjacentNode, node).isEmpty());\n+        assertThat(\n+                network.predecessors(node).contains(adjacentNode)\n+                    || network.successors(node).contains(adjacentNode))\n+            .isTrue();\n+        assertThat(\n+                !network.edgesConnecting(node, adjacentNode).isEmpty()\n+                    || !network.edgesConnecting(adjacentNode, node).isEmpty())\n+            .isTrue();\n       }\n \n       for (N predecessor : sanityCheckSet(network.predecessors(node))) {\n@@ -289,9 +290,10 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (E incidentEdge : sanityCheckSet(network.incidentEdges(node))) {\n-        assertTrue(\n-            network.inEdges(node).contains(incidentEdge)\n-                || network.outEdges(node).contains(incidentEdge));\n+        assertThat(\n+                network.inEdges(node).contains(incidentEdge)\n+                    || network.outEdges(node).contains(incidentEdge))\n+            .isTrue();\n         assertThat(network.edges()).contains(incidentEdge);\n         assertThat(network.incidentNodes(incidentEdge)).contains(node);\n       }\n@@ -630,7 +632,7 @@ public void successors_nodeNotInGraph() {\n   public void addNode_newNode() {\n     assume().that(graphIsMutable()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isTrue();\n     assertThat(networkAsMutableNetwork.nodes()).contains(N1);\n   }\n \n@@ -640,7 +642,7 @@ public void addNode_existingNode() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -650,8 +652,8 @@ public void removeNode_existingNode() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N4, N1, E41);\n-    assertTrue(networkAsMutableNetwork.removeNode(N1));\n-    assertFalse(networkAsMutableNetwork.removeNode(N1));\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactly(N2, N4);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E41);\n@@ -685,7 +687,7 @@ public void removeNode_nodeNotPresent() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -743,8 +745,8 @@ public void removeEdge_existingEdge() {\n     assume().that(graphIsMutable()).isTrue();\n \n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n-    assertFalse(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edgesConnecting(N1, N2)).isEmpty();\n   }\n@@ -757,7 +759,7 @@ public void removeEdge_oneOfMany() {\n     addEdge(N1, N3, E13);\n     addEdge(N1, N4, E14);\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E13, E14);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E13));\n+    assertThat(networkAsMutableNetwork.removeEdge(E13)).isTrue();\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E14);\n   }\n \n@@ -767,7 +769,7 @@ public void removeEdge_edgeNotPresent() {\n \n     addEdge(N1, N2, E12);\n     ImmutableSet<String> edges = ImmutableSet.copyOf(networkAsMutableNetwork.edges());\n-    assertFalse(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).containsExactlyElementsIn(edges);\n   }\n \n@@ -779,7 +781,7 @@ public void removeEdge_queryAfterRemoval() {\n     @SuppressWarnings(\"unused\")\n     EndpointPair<Integer> unused =\n         networkAsMutableNetwork.incidentNodes(E12); // ensure cache (if any) is populated\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n     assertEdgeNotInGraphErrorMessage(\n         assertThrows(\n             IllegalArgumentException.class, () -> networkAsMutableNetwork.incidentNodes(E12)));\n@@ -792,7 +794,7 @@ public void removeEdge_parallelEdge() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N1, N2, E12_A);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }\n \n@@ -805,10 +807,10 @@ public void removeEdge_parallelSelfLoopEdge() {\n     addEdge(N1, N1, E11);\n     addEdge(N1, N1, E11_A);\n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11);\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).isEmpty();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "patch": "@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import java.util.Set;\n import org.jspecify.annotations.NullUnmarked;\n@@ -362,9 +361,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.successors(N1)).containsExactly(N5);\n     assertThat(graph.successors(N2)).containsExactly(N3);"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java",
      "status": "modified",
      "additions": 7,
      "deletions": 8,
      "changes": 15,
      "patch": "@@ -21,7 +21,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -522,8 +521,8 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A);\n   }\n \n@@ -560,9 +559,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -634,8 +633,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n "
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "patch": "@@ -19,7 +19,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import com.google.common.testing.EqualsTester;\n import java.util.Set;\n@@ -348,9 +347,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.adjacentNodes(N1)).containsExactly(N4, N5);\n     assertThat(graph.adjacentNodes(N2)).containsExactly(N3);"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java",
      "status": "modified",
      "additions": 8,
      "deletions": 9,
      "changes": 17,
      "patch": "@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -440,9 +439,9 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N1, E21));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N1, E21)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A, E21);\n   }\n \n@@ -479,9 +478,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -552,8 +551,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n "
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/EndpointPairTest.java",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "patch": "@@ -235,11 +235,13 @@ public void endpointPair_directed_contains() {\n     assertThat(edges).doesNotContain(EndpointPair.ordered(N3, N4)); // nodes not in graph\n   }\n \n+  // We are testing our implementations of methods on Collection.\n+  @SuppressWarnings({\"CollectionSizeTruth\", \"CollectionContainsTruth\"})\n   private static void containsExactlySanityCheck(Collection<?> collection, Object... varargs) {\n-    assertThat(collection).hasSize(varargs.length);\n+    assertThat(collection.size()).isEqualTo(varargs.length);\n     for (Object obj : varargs) {\n-      assertThat(collection).contains(obj);\n+      assertThat(collection.contains(obj)).isTrue();\n     }\n-    assertThat(collection).containsExactly(varargs);\n+    assertThat(ImmutableList.copyOf(collection.iterator())).containsExactlyElementsIn(varargs);\n   }\n }"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/GraphsTest.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -459,7 +459,7 @@ public void transpose_directedNetwork() {\n     AbstractNetworkTest.validateNetwork(transpose);\n \n     assertThat(transpose.edgesConnecting(N1, N2)).isEmpty();\n-    assertThat(transpose.edgeConnecting(N1, N2).isPresent()).isFalse();\n+    assertThat(transpose.edgeConnecting(N1, N2)).isEmpty();\n     assertThat(transpose.edgeConnectingOrNull(N1, N2)).isNull();\n \n     for (Integer node : directedGraph.nodes()) {\n@@ -470,7 +470,7 @@ public void transpose_directedNetwork() {\n     directedGraph.addEdge(N2, N1, E21);\n     // View should be updated.\n     assertThat(transpose.edgesConnecting(N1, N2)).containsExactly(E21);\n-    assertThat(transpose.edgeConnecting(N1, N2).get()).isEqualTo(E21);\n+    assertThat(transpose.edgeConnecting(N1, N2)).hasValue(E21);\n     assertThat(transpose.edgeConnectingOrNull(N1, N2)).isEqualTo(E21);\n     AbstractNetworkTest.validateNetwork(transpose);\n   }"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "patch": "@@ -34,7 +34,6 @@ public void immutableNetwork() {\n     mutableNetwork.addNode(\"A\");\n     ImmutableNetwork<String, Integer> immutableNetwork = ImmutableNetwork.copyOf(mutableNetwork);\n \n-    assertThat(immutableNetwork.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableNetwork).isNotInstanceOf(MutableNetwork.class);\n     assertThat(immutableNetwork).isEqualTo(mutableNetwork);\n "
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "patch": "@@ -35,7 +35,6 @@ public void immutableValueGraph() {\n     ImmutableValueGraph<String, Integer> immutableValueGraph =\n         ImmutableValueGraph.copyOf(mutableValueGraph);\n \n-    assertThat(immutableValueGraph.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableValueGraph).isNotInstanceOf(MutableValueGraph.class);\n     assertThat(immutableValueGraph).isEqualTo(mutableValueGraph);\n "
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/TraverserTest.java",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "patch": "@@ -24,7 +24,6 @@\n import static org.junit.Assert.assertThrows;\n \n import com.google.common.collect.HashMultiset;\n-import com.google.common.collect.ImmutableList;\n import com.google.common.collect.ImmutableMultimap;\n import com.google.common.collect.Iterables;\n import com.google.common.collect.Multiset;\n@@ -1213,7 +1212,7 @@ private static ImmutableGraph<Character> createSingleRootGraph() {\n   }\n \n   private static void assertEqualCharNodes(Iterable<Character> result, String expectedCharacters) {\n-    assertThat(ImmutableList.copyOf(result))\n+    assertThat(result)\n         .containsExactlyElementsIn(Chars.asList(expectedCharacters.toCharArray()))\n         .inOrder();\n   }"
    },
    {
      "filename": "guava-tests/test/com/google/common/graph/ValueGraphTest.java",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "patch": "@@ -417,8 +417,8 @@ public void edgeValue_missing() {\n     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo(\"valueB\");\n     assertThat(graph.edgeValueOrDefault(1, 2, null)).isEqualTo(\"valueA\");\n     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo(\"valueB\");\n-    assertThat(graph.edgeValue(1, 2).get()).isEqualTo(\"valueA\");\n-    assertThat(graph.edgeValue(2, 1).get()).isEqualTo(\"valueB\");\n+    assertThat(graph.edgeValue(1, 2)).hasValue(\"valueA\");\n+    assertThat(graph.edgeValue(2, 1)).hasValue(\"valueB\");\n \n     graph.removeEdge(1, 2);\n     graph.putEdgeValue(2, 1, \"valueC\");\n@@ -428,7 +428,7 @@ public void edgeValue_missing() {\n     assertThat(graph.edgeValueOrDefault(1, 2, null)).isNull();\n     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo(\"valueC\");\n     assertThat(graph.edgeValue(1, 2).orElse(null)).isNull();\n-    assertThat(graph.edgeValue(2, 1).get()).isEqualTo(\"valueC\");\n+    assertThat(graph.edgeValue(2, 1)).hasValue(\"valueC\");\n   }\n \n   @Test"
    }
  ],
  "diff": "diff --git a/android/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java b/android/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java\nindex ecaa49a7e0a4..d25a42fb26d2 100644\n--- a/android/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java\n@@ -25,9 +25,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n-import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableList;\n@@ -187,8 +185,9 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       for (N incidentNode : network.incidentNodes(edge)) {\n         assertThat(network.nodes()).contains(incidentNode);\n         for (E adjacentEdge : network.incidentEdges(incidentNode)) {\n-          assertTrue(\n-              edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge));\n+          assertThat(\n+                  edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge))\n+              .isTrue();\n         }\n       }\n     }\n@@ -263,12 +262,14 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (N adjacentNode : sanityCheckSet(network.adjacentNodes(node))) {\n-        assertTrue(\n-            network.predecessors(node).contains(adjacentNode)\n-                || network.successors(node).contains(adjacentNode));\n-        assertTrue(\n-            !network.edgesConnecting(node, adjacentNode).isEmpty()\n-                || !network.edgesConnecting(adjacentNode, node).isEmpty());\n+        assertThat(\n+                network.predecessors(node).contains(adjacentNode)\n+                    || network.successors(node).contains(adjacentNode))\n+            .isTrue();\n+        assertThat(\n+                !network.edgesConnecting(node, adjacentNode).isEmpty()\n+                    || !network.edgesConnecting(adjacentNode, node).isEmpty())\n+            .isTrue();\n       }\n \n       for (N predecessor : sanityCheckSet(network.predecessors(node))) {\n@@ -282,9 +283,10 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (E incidentEdge : sanityCheckSet(network.incidentEdges(node))) {\n-        assertTrue(\n-            network.inEdges(node).contains(incidentEdge)\n-                || network.outEdges(node).contains(incidentEdge));\n+        assertThat(\n+                network.inEdges(node).contains(incidentEdge)\n+                    || network.outEdges(node).contains(incidentEdge))\n+            .isTrue();\n         assertThat(network.edges()).contains(incidentEdge);\n         assertThat(network.incidentNodes(incidentEdge)).contains(node);\n       }\n@@ -623,7 +625,7 @@ public void successors_nodeNotInGraph() {\n   public void addNode_newNode() {\n     assume().that(graphIsMutable()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isTrue();\n     assertThat(networkAsMutableNetwork.nodes()).contains(N1);\n   }\n \n@@ -633,7 +635,7 @@ public void addNode_existingNode() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -643,8 +645,8 @@ public void removeNode_existingNode() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N4, N1, E41);\n-    assertTrue(networkAsMutableNetwork.removeNode(N1));\n-    assertFalse(networkAsMutableNetwork.removeNode(N1));\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactly(N2, N4);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E41);\n@@ -678,7 +680,7 @@ public void removeNode_nodeNotPresent() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -736,8 +738,8 @@ public void removeEdge_existingEdge() {\n     assume().that(graphIsMutable()).isTrue();\n \n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n-    assertFalse(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edgesConnecting(N1, N2)).isEmpty();\n   }\n@@ -750,7 +752,7 @@ public void removeEdge_oneOfMany() {\n     addEdge(N1, N3, E13);\n     addEdge(N1, N4, E14);\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E13, E14);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E13));\n+    assertThat(networkAsMutableNetwork.removeEdge(E13)).isTrue();\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E14);\n   }\n \n@@ -760,7 +762,7 @@ public void removeEdge_edgeNotPresent() {\n \n     addEdge(N1, N2, E12);\n     ImmutableSet<String> edges = ImmutableSet.copyOf(networkAsMutableNetwork.edges());\n-    assertFalse(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).containsExactlyElementsIn(edges);\n   }\n \n@@ -772,7 +774,7 @@ public void removeEdge_queryAfterRemoval() {\n     @SuppressWarnings(\"unused\")\n     EndpointPair<Integer> unused =\n         networkAsMutableNetwork.incidentNodes(E12); // ensure cache (if any) is populated\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n     assertEdgeNotInGraphErrorMessage(\n         assertThrows(\n             IllegalArgumentException.class, () -> networkAsMutableNetwork.incidentNodes(E12)));\n@@ -785,7 +787,7 @@ public void removeEdge_parallelEdge() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N1, N2, E12_A);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }\n \n@@ -798,10 +800,10 @@ public void removeEdge_parallelSelfLoopEdge() {\n     addEdge(N1, N1, E11);\n     addEdge(N1, N1, E11_A);\n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11);\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).isEmpty();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }\ndiff --git a/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java b/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java\nindex 2e650a1fa378..8bca34facc66 100644\n--- a/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java\n@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import java.util.Set;\n import org.jspecify.annotations.NullUnmarked;\n@@ -362,9 +361,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.successors(N1)).containsExactly(N5);\n     assertThat(graph.successors(N2)).containsExactly(N3);\ndiff --git a/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java b/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java\nindex eec759a2c31c..acf39ef7e870 100644\n--- a/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java\n@@ -21,7 +21,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -509,8 +508,8 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A);\n   }\n \n@@ -547,9 +546,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -621,8 +620,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n \ndiff --git a/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java b/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java\nindex d0f8d38163da..0af4dad4e9b1 100644\n--- a/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java\n@@ -19,7 +19,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import com.google.common.testing.EqualsTester;\n import java.util.Set;\n@@ -348,9 +347,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.adjacentNodes(N1)).containsExactly(N4, N5);\n     assertThat(graph.adjacentNodes(N2)).containsExactly(N3);\ndiff --git a/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java b/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java\nindex 8adbaa40c360..516a99cb59dd 100644\n--- a/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java\n@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -427,9 +426,9 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N1, E21));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N1, E21)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A, E21);\n   }\n \n@@ -466,9 +465,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -539,8 +538,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n \ndiff --git a/android/guava-tests/test/com/google/common/graph/EndpointPairTest.java b/android/guava-tests/test/com/google/common/graph/EndpointPairTest.java\nindex a304ed7b8c43..6974f14b14d8 100644\n--- a/android/guava-tests/test/com/google/common/graph/EndpointPairTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/EndpointPairTest.java\n@@ -235,11 +235,13 @@ public void endpointPair_directed_contains() {\n     assertThat(edges).doesNotContain(EndpointPair.ordered(N3, N4)); // nodes not in graph\n   }\n \n+  // We are testing our implementations of methods on Collection.\n+  @SuppressWarnings({\"CollectionSizeTruth\", \"CollectionContainsTruth\"})\n   private static void containsExactlySanityCheck(Collection<?> collection, Object... varargs) {\n-    assertThat(collection).hasSize(varargs.length);\n+    assertThat(collection.size()).isEqualTo(varargs.length);\n     for (Object obj : varargs) {\n-      assertThat(collection).contains(obj);\n+      assertThat(collection.contains(obj)).isTrue();\n     }\n-    assertThat(collection).containsExactly(varargs);\n+    assertThat(ImmutableList.copyOf(collection.iterator())).containsExactlyElementsIn(varargs);\n   }\n }\ndiff --git a/android/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java b/android/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java\nindex 9d4889fd2634..646424e1c341 100644\n--- a/android/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java\n@@ -34,7 +34,6 @@ public void immutableNetwork() {\n     mutableNetwork.addNode(\"A\");\n     ImmutableNetwork<String, Integer> immutableNetwork = ImmutableNetwork.copyOf(mutableNetwork);\n \n-    assertThat(immutableNetwork.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableNetwork).isNotInstanceOf(MutableNetwork.class);\n     assertThat(immutableNetwork).isEqualTo(mutableNetwork);\n \ndiff --git a/android/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java b/android/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java\nindex 43f48d91c986..6bec95ca5853 100644\n--- a/android/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java\n@@ -35,7 +35,6 @@ public void immutableValueGraph() {\n     ImmutableValueGraph<String, Integer> immutableValueGraph =\n         ImmutableValueGraph.copyOf(mutableValueGraph);\n \n-    assertThat(immutableValueGraph.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableValueGraph).isNotInstanceOf(MutableValueGraph.class);\n     assertThat(immutableValueGraph).isEqualTo(mutableValueGraph);\n \ndiff --git a/android/guava-tests/test/com/google/common/graph/TraverserTest.java b/android/guava-tests/test/com/google/common/graph/TraverserTest.java\nindex a06f9b24fee4..a078de009405 100644\n--- a/android/guava-tests/test/com/google/common/graph/TraverserTest.java\n+++ b/android/guava-tests/test/com/google/common/graph/TraverserTest.java\n@@ -24,7 +24,6 @@\n import static org.junit.Assert.assertThrows;\n \n import com.google.common.collect.HashMultiset;\n-import com.google.common.collect.ImmutableList;\n import com.google.common.collect.ImmutableMultimap;\n import com.google.common.collect.Iterables;\n import com.google.common.collect.Multiset;\n@@ -1213,7 +1212,7 @@ private static ImmutableGraph<Character> createSingleRootGraph() {\n   }\n \n   private static void assertEqualCharNodes(Iterable<Character> result, String expectedCharacters) {\n-    assertThat(ImmutableList.copyOf(result))\n+    assertThat(result)\n         .containsExactlyElementsIn(Chars.asList(expectedCharacters.toCharArray()))\n         .inOrder();\n   }\ndiff --git a/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java b/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java\nindex 4322deedea63..1bb639a5a3d1 100644\n--- a/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java\n+++ b/guava-tests/test/com/google/common/graph/AbstractNetworkTest.java\n@@ -25,9 +25,7 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static java.util.concurrent.Executors.newFixedThreadPool;\n-import static org.junit.Assert.assertFalse;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableList;\n@@ -187,8 +185,9 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       for (N incidentNode : network.incidentNodes(edge)) {\n         assertThat(network.nodes()).contains(incidentNode);\n         for (E adjacentEdge : network.incidentEdges(incidentNode)) {\n-          assertTrue(\n-              edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge));\n+          assertThat(\n+                  edge.equals(adjacentEdge) || network.adjacentEdges(edge).contains(adjacentEdge))\n+              .isTrue();\n         }\n       }\n     }\n@@ -270,12 +269,14 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (N adjacentNode : sanityCheckSet(network.adjacentNodes(node))) {\n-        assertTrue(\n-            network.predecessors(node).contains(adjacentNode)\n-                || network.successors(node).contains(adjacentNode));\n-        assertTrue(\n-            !network.edgesConnecting(node, adjacentNode).isEmpty()\n-                || !network.edgesConnecting(adjacentNode, node).isEmpty());\n+        assertThat(\n+                network.predecessors(node).contains(adjacentNode)\n+                    || network.successors(node).contains(adjacentNode))\n+            .isTrue();\n+        assertThat(\n+                !network.edgesConnecting(node, adjacentNode).isEmpty()\n+                    || !network.edgesConnecting(adjacentNode, node).isEmpty())\n+            .isTrue();\n       }\n \n       for (N predecessor : sanityCheckSet(network.predecessors(node))) {\n@@ -289,9 +290,10 @@ static <N, E> void validateNetwork(Network<N, E> network) {\n       }\n \n       for (E incidentEdge : sanityCheckSet(network.incidentEdges(node))) {\n-        assertTrue(\n-            network.inEdges(node).contains(incidentEdge)\n-                || network.outEdges(node).contains(incidentEdge));\n+        assertThat(\n+                network.inEdges(node).contains(incidentEdge)\n+                    || network.outEdges(node).contains(incidentEdge))\n+            .isTrue();\n         assertThat(network.edges()).contains(incidentEdge);\n         assertThat(network.incidentNodes(incidentEdge)).contains(node);\n       }\n@@ -630,7 +632,7 @@ public void successors_nodeNotInGraph() {\n   public void addNode_newNode() {\n     assume().that(graphIsMutable()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isTrue();\n     assertThat(networkAsMutableNetwork.nodes()).contains(N1);\n   }\n \n@@ -640,7 +642,7 @@ public void addNode_existingNode() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.addNode(N1));\n+    assertThat(networkAsMutableNetwork.addNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -650,8 +652,8 @@ public void removeNode_existingNode() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N4, N1, E41);\n-    assertTrue(networkAsMutableNetwork.removeNode(N1));\n-    assertFalse(networkAsMutableNetwork.removeNode(N1));\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeNode(N1)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactly(N2, N4);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E41);\n@@ -685,7 +687,7 @@ public void removeNode_nodeNotPresent() {\n \n     addNode(N1);\n     ImmutableSet<Integer> nodes = ImmutableSet.copyOf(networkAsMutableNetwork.nodes());\n-    assertFalse(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeNode(NODE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.nodes()).containsExactlyElementsIn(nodes);\n   }\n \n@@ -743,8 +745,8 @@ public void removeEdge_existingEdge() {\n     assume().that(graphIsMutable()).isTrue();\n \n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n-    assertFalse(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).doesNotContain(E12);\n     assertThat(networkAsMutableNetwork.edgesConnecting(N1, N2)).isEmpty();\n   }\n@@ -757,7 +759,7 @@ public void removeEdge_oneOfMany() {\n     addEdge(N1, N3, E13);\n     addEdge(N1, N4, E14);\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E13, E14);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E13));\n+    assertThat(networkAsMutableNetwork.removeEdge(E13)).isTrue();\n     assertThat(networkAsMutableNetwork.edges()).containsExactly(E12, E14);\n   }\n \n@@ -767,7 +769,7 @@ public void removeEdge_edgeNotPresent() {\n \n     addEdge(N1, N2, E12);\n     ImmutableSet<String> edges = ImmutableSet.copyOf(networkAsMutableNetwork.edges());\n-    assertFalse(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH));\n+    assertThat(networkAsMutableNetwork.removeEdge(EDGE_NOT_IN_GRAPH)).isFalse();\n     assertThat(networkAsMutableNetwork.edges()).containsExactlyElementsIn(edges);\n   }\n \n@@ -779,7 +781,7 @@ public void removeEdge_queryAfterRemoval() {\n     @SuppressWarnings(\"unused\")\n     EndpointPair<Integer> unused =\n         networkAsMutableNetwork.incidentNodes(E12); // ensure cache (if any) is populated\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12)).isTrue();\n     assertEdgeNotInGraphErrorMessage(\n         assertThrows(\n             IllegalArgumentException.class, () -> networkAsMutableNetwork.incidentNodes(E12)));\n@@ -792,7 +794,7 @@ public void removeEdge_parallelEdge() {\n \n     addEdge(N1, N2, E12);\n     addEdge(N1, N2, E12_A);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E12_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }\n \n@@ -805,10 +807,10 @@ public void removeEdge_parallelSelfLoopEdge() {\n     addEdge(N1, N1, E11);\n     addEdge(N1, N1, E11_A);\n     addEdge(N1, N2, E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11_A));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11);\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n-    assertTrue(networkAsMutableNetwork.removeEdge(E11));\n+    assertThat(networkAsMutableNetwork.removeEdge(E11)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).isEmpty();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12);\n   }\ndiff --git a/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java b/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java\nindex 2e650a1fa378..8bca34facc66 100644\n--- a/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java\n+++ b/guava-tests/test/com/google/common/graph/AbstractStandardDirectedGraphTest.java\n@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import java.util.Set;\n import org.jspecify.annotations.NullUnmarked;\n@@ -362,9 +361,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.successors(N1)).containsExactly(N5);\n     assertThat(graph.successors(N2)).containsExactly(N3);\ndiff --git a/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java b/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java\nindex a3c41ae14375..3e7812afa791 100644\n--- a/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java\n+++ b/guava-tests/test/com/google/common/graph/AbstractStandardDirectedNetworkTest.java\n@@ -21,7 +21,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -522,8 +521,8 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A);\n   }\n \n@@ -560,9 +559,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -634,8 +633,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n \ndiff --git a/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java b/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java\nindex d0f8d38163da..0af4dad4e9b1 100644\n--- a/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java\n+++ b/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedGraphTest.java\n@@ -19,7 +19,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n \n import com.google.common.testing.EqualsTester;\n import java.util.Set;\n@@ -348,9 +347,9 @@ public void putEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     graphAsMutableGraph.addNode(N1);\n-    assertTrue(graphAsMutableGraph.putEdge(N1, N5));\n-    assertTrue(graphAsMutableGraph.putEdge(N4, N1));\n-    assertTrue(graphAsMutableGraph.putEdge(N2, N3));\n+    assertThat(graphAsMutableGraph.putEdge(N1, N5)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N4, N1)).isTrue();\n+    assertThat(graphAsMutableGraph.putEdge(N2, N3)).isTrue();\n     assertThat(graph.nodes()).containsExactly(N1, N5, N4, N2, N3).inOrder();\n     assertThat(graph.adjacentNodes(N1)).containsExactly(N4, N5);\n     assertThat(graph.adjacentNodes(N2)).containsExactly(N3);\ndiff --git a/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java b/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java\nindex 16a4d5349260..02d3469b6c59 100644\n--- a/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java\n+++ b/guava-tests/test/com/google/common/graph/AbstractStandardUndirectedNetworkTest.java\n@@ -20,7 +20,6 @@\n import static com.google.common.truth.Truth.assertThat;\n import static com.google.common.truth.TruthJUnit.assume;\n import static org.junit.Assert.assertThrows;\n-import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n import com.google.common.collect.ImmutableSet;\n@@ -440,9 +439,9 @@ public void addEdge_parallelEdge_allowsParallelEdges() {\n     assume().that(graphIsMutable()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N1, E21));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N2, E12_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N1, E21)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N2, E12_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N2)).containsExactly(E12, E12_A, E21);\n   }\n \n@@ -479,9 +478,9 @@ public void addEdge_nodesNotInGraph() {\n     assume().that(graphIsMutable()).isTrue();\n \n     networkAsMutableNetwork.addNode(N1);\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N5, E15));\n-    assertTrue(networkAsMutableNetwork.addEdge(N4, N1, E41));\n-    assertTrue(networkAsMutableNetwork.addEdge(N2, N3, E23));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N5, E15)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N4, N1, E41)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N2, N3, E23)).isTrue();\n     assertThat(network.nodes()).containsExactly(N1, N5, N4, N2, N3);\n     assertThat(network.edges()).containsExactly(E15, E41, E23);\n     assertThat(network.edgesConnecting(N1, N5)).containsExactly(E15);\n@@ -552,8 +551,8 @@ public void addEdge_parallelSelfLoopEdge_allowsParallelEdges() {\n     assume().that(network.allowsSelfLoops()).isTrue();\n     assume().that(network.allowsParallelEdges()).isTrue();\n \n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11));\n-    assertTrue(networkAsMutableNetwork.addEdge(N1, N1, E11_A));\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11)).isTrue();\n+    assertThat(networkAsMutableNetwork.addEdge(N1, N1, E11_A)).isTrue();\n     assertThat(network.edgesConnecting(N1, N1)).containsExactly(E11, E11_A);\n   }\n \ndiff --git a/guava-tests/test/com/google/common/graph/EndpointPairTest.java b/guava-tests/test/com/google/common/graph/EndpointPairTest.java\nindex a304ed7b8c43..6974f14b14d8 100644\n--- a/guava-tests/test/com/google/common/graph/EndpointPairTest.java\n+++ b/guava-tests/test/com/google/common/graph/EndpointPairTest.java\n@@ -235,11 +235,13 @@ public void endpointPair_directed_contains() {\n     assertThat(edges).doesNotContain(EndpointPair.ordered(N3, N4)); // nodes not in graph\n   }\n \n+  // We are testing our implementations of methods on Collection.\n+  @SuppressWarnings({\"CollectionSizeTruth\", \"CollectionContainsTruth\"})\n   private static void containsExactlySanityCheck(Collection<?> collection, Object... varargs) {\n-    assertThat(collection).hasSize(varargs.length);\n+    assertThat(collection.size()).isEqualTo(varargs.length);\n     for (Object obj : varargs) {\n-      assertThat(collection).contains(obj);\n+      assertThat(collection.contains(obj)).isTrue();\n     }\n-    assertThat(collection).containsExactly(varargs);\n+    assertThat(ImmutableList.copyOf(collection.iterator())).containsExactlyElementsIn(varargs);\n   }\n }\ndiff --git a/guava-tests/test/com/google/common/graph/GraphsTest.java b/guava-tests/test/com/google/common/graph/GraphsTest.java\nindex 15d5f13bdcfd..ec7c7fa3b46a 100644\n--- a/guava-tests/test/com/google/common/graph/GraphsTest.java\n+++ b/guava-tests/test/com/google/common/graph/GraphsTest.java\n@@ -459,7 +459,7 @@ public void transpose_directedNetwork() {\n     AbstractNetworkTest.validateNetwork(transpose);\n \n     assertThat(transpose.edgesConnecting(N1, N2)).isEmpty();\n-    assertThat(transpose.edgeConnecting(N1, N2).isPresent()).isFalse();\n+    assertThat(transpose.edgeConnecting(N1, N2)).isEmpty();\n     assertThat(transpose.edgeConnectingOrNull(N1, N2)).isNull();\n \n     for (Integer node : directedGraph.nodes()) {\n@@ -470,7 +470,7 @@ public void transpose_directedNetwork() {\n     directedGraph.addEdge(N2, N1, E21);\n     // View should be updated.\n     assertThat(transpose.edgesConnecting(N1, N2)).containsExactly(E21);\n-    assertThat(transpose.edgeConnecting(N1, N2).get()).isEqualTo(E21);\n+    assertThat(transpose.edgeConnecting(N1, N2)).hasValue(E21);\n     assertThat(transpose.edgeConnectingOrNull(N1, N2)).isEqualTo(E21);\n     AbstractNetworkTest.validateNetwork(transpose);\n   }\ndiff --git a/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java b/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java\nindex 9d4889fd2634..646424e1c341 100644\n--- a/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java\n+++ b/guava-tests/test/com/google/common/graph/ImmutableNetworkTest.java\n@@ -34,7 +34,6 @@ public void immutableNetwork() {\n     mutableNetwork.addNode(\"A\");\n     ImmutableNetwork<String, Integer> immutableNetwork = ImmutableNetwork.copyOf(mutableNetwork);\n \n-    assertThat(immutableNetwork.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableNetwork).isNotInstanceOf(MutableNetwork.class);\n     assertThat(immutableNetwork).isEqualTo(mutableNetwork);\n \ndiff --git a/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java b/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java\nindex 43f48d91c986..6bec95ca5853 100644\n--- a/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java\n+++ b/guava-tests/test/com/google/common/graph/ImmutableValueGraphTest.java\n@@ -35,7 +35,6 @@ public void immutableValueGraph() {\n     ImmutableValueGraph<String, Integer> immutableValueGraph =\n         ImmutableValueGraph.copyOf(mutableValueGraph);\n \n-    assertThat(immutableValueGraph.asGraph()).isInstanceOf(ImmutableGraph.class);\n     assertThat(immutableValueGraph).isNotInstanceOf(MutableValueGraph.class);\n     assertThat(immutableValueGraph).isEqualTo(mutableValueGraph);\n \ndiff --git a/guava-tests/test/com/google/common/graph/TraverserTest.java b/guava-tests/test/com/google/common/graph/TraverserTest.java\nindex a06f9b24fee4..a078de009405 100644\n--- a/guava-tests/test/com/google/common/graph/TraverserTest.java\n+++ b/guava-tests/test/com/google/common/graph/TraverserTest.java\n@@ -24,7 +24,6 @@\n import static org.junit.Assert.assertThrows;\n \n import com.google.common.collect.HashMultiset;\n-import com.google.common.collect.ImmutableList;\n import com.google.common.collect.ImmutableMultimap;\n import com.google.common.collect.Iterables;\n import com.google.common.collect.Multiset;\n@@ -1213,7 +1212,7 @@ private static ImmutableGraph<Character> createSingleRootGraph() {\n   }\n \n   private static void assertEqualCharNodes(Iterable<Character> result, String expectedCharacters) {\n-    assertThat(ImmutableList.copyOf(result))\n+    assertThat(result)\n         .containsExactlyElementsIn(Chars.asList(expectedCharacters.toCharArray()))\n         .inOrder();\n   }\ndiff --git a/guava-tests/test/com/google/common/graph/ValueGraphTest.java b/guava-tests/test/com/google/common/graph/ValueGraphTest.java\nindex 95b7286fec9a..b71db5d0be99 100644\n--- a/guava-tests/test/com/google/common/graph/ValueGraphTest.java\n+++ b/guava-tests/test/com/google/common/graph/ValueGraphTest.java\n@@ -417,8 +417,8 @@ public void edgeValue_missing() {\n     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo(\"valueB\");\n     assertThat(graph.edgeValueOrDefault(1, 2, null)).isEqualTo(\"valueA\");\n     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo(\"valueB\");\n-    assertThat(graph.edgeValue(1, 2).get()).isEqualTo(\"valueA\");\n-    assertThat(graph.edgeValue(2, 1).get()).isEqualTo(\"valueB\");\n+    assertThat(graph.edgeValue(1, 2)).hasValue(\"valueA\");\n+    assertThat(graph.edgeValue(2, 1)).hasValue(\"valueB\");\n \n     graph.removeEdge(1, 2);\n     graph.putEdgeValue(2, 1, \"valueC\");\n@@ -428,7 +428,7 @@ public void edgeValue_missing() {\n     assertThat(graph.edgeValueOrDefault(1, 2, null)).isNull();\n     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo(\"valueC\");\n     assertThat(graph.edgeValue(1, 2).orElse(null)).isNull();\n-    assertThat(graph.edgeValue(2, 1).get()).isEqualTo(\"valueC\");\n+    assertThat(graph.edgeValue(2, 1)).hasValue(\"valueC\");\n   }\n \n   @Test\n",
  "additions": 115,
  "deletions": 121,
  "changed_files": 20,
  "url": "https://github.com/google/guava/pull/8023",
  "mined_at": "2025-10-25T12:53:06.800154"
}