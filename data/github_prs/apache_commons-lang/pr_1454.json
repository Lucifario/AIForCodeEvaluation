{
  "id": 1454,
  "repository": "apache/commons-lang",
  "title": "Fix internal inverted logic in private isEnum() method and correct its usage in getFirstEnum()",
  "body": "Fix isEnum() Method Logic:\r\nCorrect the method to return true only when enumClass is not null and is actually an enum class\r\nChange implementation to: return enumClass != null && enumClass.isEnum();\r\n\r\nUpdate getFirstEnum() Method:\r\nInvert the condition check to properly handle valid enum classes\r\nShould proceed with stream operations only when isEnum(enumClass) returns true",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-09-29T11:17:57+00:00",
  "created_at": "2025-09-29T07:58:15+00:00",
  "updated_at": "2025-09-29T11:18:18+00:00",
  "author": "mymde",
  "reviewers": [],
  "base_sha": "756436b7b18febab0c5035257b211b52c009819c",
  "head_sha": "3d04aa122aab5b9b6ae0b9707902ca754cbaa50d",
  "review_comments": [],
  "pr_comments": [
    {
      "user": "garydgregory",
      "body": "Merged, thank you @mymde !\r\n",
      "created_at": "2025-09-29T11:18:18+00:00"
    }
  ],
  "files_changed": [
    {
      "filename": "src/main/java/org/apache/commons/lang3/EnumUtils.java",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "patch": "@@ -343,7 +343,7 @@ public static <E extends Enum<E>> E getEnumSystemProperty(final Class<E> enumCla\n      * @since 3.18.0\n      */\n     public static <E extends Enum<E>> E getFirstEnum(final Class<E> enumClass, final int value, final ToIntFunction<E> toIntFunction, final E defaultEnum) {\n-        if (isEnum(enumClass)) {\n+        if (!isEnum(enumClass)) {\n             return defaultEnum;\n         }\n         return stream(enumClass).filter(e -> value == toIntFunction.applyAsInt(e)).findFirst().orElse(defaultEnum);\n@@ -372,7 +372,7 @@ public static <E extends Enum<E>> E getFirstEnumIgnoreCase(final Class<E> enumCl\n     }\n \n     private static <E extends Enum<E>> boolean isEnum(final Class<E> enumClass) {\n-        return enumClass != null && !enumClass.isEnum();\n+        return enumClass != null && enumClass.isEnum();\n     }\n \n     /**"
    }
  ],
  "diff": "diff --git a/src/main/java/org/apache/commons/lang3/EnumUtils.java b/src/main/java/org/apache/commons/lang3/EnumUtils.java\nindex 36cf44d385e..513b3140ae5 100644\n--- a/src/main/java/org/apache/commons/lang3/EnumUtils.java\n+++ b/src/main/java/org/apache/commons/lang3/EnumUtils.java\n@@ -343,7 +343,7 @@ public static <E extends Enum<E>> E getEnumSystemProperty(final Class<E> enumCla\n      * @since 3.18.0\n      */\n     public static <E extends Enum<E>> E getFirstEnum(final Class<E> enumClass, final int value, final ToIntFunction<E> toIntFunction, final E defaultEnum) {\n-        if (isEnum(enumClass)) {\n+        if (!isEnum(enumClass)) {\n             return defaultEnum;\n         }\n         return stream(enumClass).filter(e -> value == toIntFunction.applyAsInt(e)).findFirst().orElse(defaultEnum);\n@@ -372,7 +372,7 @@ public static <E extends Enum<E>> E getFirstEnumIgnoreCase(final Class<E> enumCl\n     }\n \n     private static <E extends Enum<E>> boolean isEnum(final Class<E> enumClass) {\n-        return enumClass != null && !enumClass.isEnum();\n+        return enumClass != null && enumClass.isEnum();\n     }\n \n     /**\n",
  "additions": 2,
  "deletions": 2,
  "changed_files": 1,
  "url": "https://github.com/apache/commons-lang/pull/1454",
  "mined_at": "2025-10-25T12:45:19.224894"
}