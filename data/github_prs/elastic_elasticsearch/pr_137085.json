{
  "id": 137085,
  "repository": "elastic/elasticsearch",
  "title": "Use the default serializer check for normalizer_skip_store_original_value mapping attribute",
  "body": "With the current serializer check the `normalizer_skip_store_original_value` mapping attribute always gets serialized if there is a normalizer configured, this makes serialized form of mapping larger than it needs to be. On top of it assertions may fail when restoring older indices that have fields with normalizer.",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-10-24T15:02:20+00:00",
  "created_at": "2025-10-24T08:57:45+00:00",
  "updated_at": "2025-10-24T15:02:20+00:00",
  "author": "martijnvg",
  "reviewers": [
    "jordan-powers"
  ],
  "base_sha": "7e9049e74cdc397431bb9203595c7434d20ffca2",
  "head_sha": "2cd8f9b9894d2bde9cb3c8c6a20b20c5aeb01fbd",
  "review_comments": [
    {
      "user": "jordan-powers",
      "state": "APPROVED",
      "body": "Looks like I misunderstood what `setSerializerCheck` does. Thanks for fixing this Martijn, LGTM!",
      "submitted_at": "2025-10-24T14:53:02+00:00"
    }
  ],
  "pr_comments": [
    {
      "user": "martijnvg",
      "body": "The bwc failure isn't related to this change, but an ml api:\r\n\r\n```\r\n<head></head>\r\n[2025-10-24T09:55:03,238][ERROR][o.e.ExceptionsHelper     ] [v8.19.6-local-1] fatal error java.lang.AssertionError: cluster:internal/xpack/ml/auditor/reset[n] |  \r\n-- | --\r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.ExceptionsHelper.lambda$maybeDieOnAnotherThread$4(ExceptionsHelper.java:449) |  \r\n»  \tat java.base/java.util.Optional.ifPresent(Optional.java:178) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.ExceptionsHelper.maybeDieOnAnotherThread(ExceptionsHelper.java:439) |  \r\n»  \tat org.elasticsearch.transport.netty4@8.19.6/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.exceptionCaught(Netty4MessageInboundHandler.java:63) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:346) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:447) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) |  \r\n»  \tat org.elasticsearch.transport.netty4@8.19.6/org.elasticsearch.transport.netty4.NettyByteBufSizer.channelRead(NettyByteBufSizer.java:33) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:697) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:660) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) |  \r\n»  \tat io.netty.common@4.1.126.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998) |  \r\n»  \tat io.netty.common@4.1.126.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) |  \r\n»  \tat java.base/java.lang.Thread.run(Thread.java:1474) |  \r\n» [2025-10-24T09:55:03,241][WARN ][o.e.t.TcpTransport       ] [v8.19.6-local-1] exception caught on transport layer [Netty4TcpChannel{localAddress=/127.0.0.1:44543, remoteAddress=/127.0.0.1:44212, profile=default}], closing connection java.lang.Exception: java.lang.AssertionError: cluster:internal/xpack/ml/auditor/reset[n] |  \r\n»  \tat org.elasticsearch.transport.netty4@8.19.6/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.exceptionCaught(Netty4MessageInboundHandler.java:68) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeExceptionCaught(AbstractChannelHandlerContext.java:346) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:447) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) |  \r\n»  \tat org.elasticsearch.transport.netty4@8.19.6/org.elasticsearch.transport.netty4.NettyByteBufSizer.channelRead(NettyByteBufSizer.java:33) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1357) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:868) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:796) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:697) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:660) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) |  \r\n»  \tat io.netty.common@4.1.126.Final/io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:998) |  \r\n»  \tat io.netty.common@4.1.126.Final/io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) |  \r\n»  \tat java.base/java.lang.Thread.run(Thread.java:1474) |  \r\n»  Caused by: java.lang.AssertionError: cluster:internal/xpack/ml/auditor/reset[n] |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundAggregator.lambda$new$0(InboundAggregator.java:47) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundAggregator.initializeRequestState(InboundAggregator.java:198) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundAggregator.headerReceived(InboundAggregator.java:67) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundPipeline.headerReceived(InboundPipeline.java:131) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundPipeline.forwardFragment(InboundPipeline.java:106) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundPipeline.lambda$doHandleBytes$1(InboundPipeline.java:78) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundDecoder.internalDecode(InboundDecoder.java:86) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundDecoder.decode(InboundDecoder.java:58) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundPipeline.doHandleBytes(InboundPipeline.java:79) |  \r\n»  \tat org.elasticsearch.server@8.19.6/org.elasticsearch.transport.InboundPipeline.handleBytes(InboundPipeline.java:69) |  \r\n»  \tat org.elasticsearch.transport.netty4@8.19.6/org.elasticsearch.transport.netty4.Netty4MessageInboundHandler.channelRead(Netty4MessageInboundHandler.java:54) |  \r\n»  \tat io.netty.transport@4.1.126.Final/io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) |  \r\n»  \t... 18 more\r\n```",
      "created_at": "2025-10-24T11:13:29+00:00"
    },
    {
      "user": "elasticsearchmachine",
      "body": "Pinging @elastic/es-storage-engine (Team:StorageEngine)",
      "created_at": "2025-10-24T11:14:21+00:00"
    }
  ],
  "files_changed": [
    {
      "filename": "server/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -287,7 +287,7 @@ private Builder(\n                 m -> ((KeywordFieldMapper) m).isNormalizerSkipStoreOriginalValue(),\n                 () -> \"lowercase\".equals(normalizer.getValue())\n                     && indexAnalyzers.getNormalizer(normalizer.getValue()).analyzer() instanceof LowercaseNormalizer\n-            ).setSerializerCheck((includeDefaults, isConfigured, value) -> includeDefaults || isConfigured || value);\n+            );\n \n             this.script.precludesParameters(nullValue);\n             addScriptValidation(script, indexed, hasDocValues);"
    },
    {
      "filename": "server/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java",
      "status": "modified",
      "additions": 41,
      "deletions": 0,
      "changes": 41,
      "patch": "@@ -582,7 +582,15 @@ public void testNormalizerSyntheticSourceKeepOriginalValue() throws IOException\n                 b -> b.field(\"type\", \"keyword\").field(\"normalizer\", \"lowercase\").field(\"normalizer_skip_store_original_value\", false)\n             )\n         );\n+        var keywordMapper = mapper.mappingLookup().getMapper(\"field\");\n+        assertThat(keywordMapper, Matchers.instanceOf(KeywordFieldMapper.class));\n+        assertFalse(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n+\n         assertEquals(\"{\\\"field\\\":\\\"AbC\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"lowercase\",\"normalizer_skip_store_original_value\":false}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testNormalizerSyntheticSourceSkipStoreOriginalValue() throws IOException {\n@@ -591,7 +599,17 @@ public void testNormalizerSyntheticSourceSkipStoreOriginalValue() throws IOExcep\n                 b -> b.field(\"type\", \"keyword\").field(\"normalizer\", \"lowercase\").field(\"normalizer_skip_store_original_value\", true)\n             )\n         );\n+        var keywordMapper = mapper.mappingLookup().getMapper(\"field\");\n+        assertThat(keywordMapper, Matchers.instanceOf(KeywordFieldMapper.class));\n+        assertTrue(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n+\n         assertEquals(\"{\\\"field\\\":\\\"abc\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+\n+        // normalizer_skip_store_original_value is configured, but it is the same as the default value, and therefor it isn't serialized\n+        // (See default serializerCheck in Parameter.java)\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"lowercase\"}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testSkipStoreOriginalValueForLowercaseNormalizer() throws IOException {\n@@ -604,6 +622,9 @@ public void testSkipStoreOriginalValueForLowercaseNormalizer() throws IOExceptio\n         assertTrue(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n \n         assertEquals(\"{\\\"field\\\":\\\"abc\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"lowercase\"}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testSkipStoreOriginalValueForCustomNormalizer() throws IOException {\n@@ -616,6 +637,26 @@ public void testSkipStoreOriginalValueForCustomNormalizer() throws IOException {\n         assertFalse(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n \n         assertEquals(\"{\\\"field\\\":\\\"AbC\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"other_lowercase\"}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n+    }\n+\n+    public void testSkipStoreOriginalValueForCustomNormalizerOverwriteSkipStoreOriginalValue() throws IOException {\n+        MapperService mapper = createSytheticSourceMapperService(\n+            fieldMapping(\n+                b -> b.field(\"type\", \"keyword\").field(\"normalizer\", \"other_lowercase\").field(\"normalizer_skip_store_original_value\", true)\n+            )\n+        );\n+\n+        var keywordMapper = mapper.mappingLookup().getMapper(\"field\");\n+        assertThat(keywordMapper, Matchers.instanceOf(KeywordFieldMapper.class));\n+        assertTrue(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n+\n+        assertEquals(\"{\\\"field\\\":\\\"abc\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"other_lowercase\",\"normalizer_skip_store_original_value\":true}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testParsesKeywordNestedEmptyObjectStrict() throws IOException {"
    }
  ],
  "diff": "diff --git a/server/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java b/server/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java\nindex 57c0de6c82983..5ddb98699808b 100644\n--- a/server/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java\n+++ b/server/src/main/java/org/elasticsearch/index/mapper/KeywordFieldMapper.java\n@@ -287,7 +287,7 @@ private Builder(\n                 m -> ((KeywordFieldMapper) m).isNormalizerSkipStoreOriginalValue(),\n                 () -> \"lowercase\".equals(normalizer.getValue())\n                     && indexAnalyzers.getNormalizer(normalizer.getValue()).analyzer() instanceof LowercaseNormalizer\n-            ).setSerializerCheck((includeDefaults, isConfigured, value) -> includeDefaults || isConfigured || value);\n+            );\n \n             this.script.precludesParameters(nullValue);\n             addScriptValidation(script, indexed, hasDocValues);\ndiff --git a/server/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java b/server/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java\nindex 69118286eb40f..520ec8a8c3400 100644\n--- a/server/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java\n+++ b/server/src/test/java/org/elasticsearch/index/mapper/KeywordFieldMapperTests.java\n@@ -582,7 +582,15 @@ public void testNormalizerSyntheticSourceKeepOriginalValue() throws IOException\n                 b -> b.field(\"type\", \"keyword\").field(\"normalizer\", \"lowercase\").field(\"normalizer_skip_store_original_value\", false)\n             )\n         );\n+        var keywordMapper = mapper.mappingLookup().getMapper(\"field\");\n+        assertThat(keywordMapper, Matchers.instanceOf(KeywordFieldMapper.class));\n+        assertFalse(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n+\n         assertEquals(\"{\\\"field\\\":\\\"AbC\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"lowercase\",\"normalizer_skip_store_original_value\":false}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testNormalizerSyntheticSourceSkipStoreOriginalValue() throws IOException {\n@@ -591,7 +599,17 @@ public void testNormalizerSyntheticSourceSkipStoreOriginalValue() throws IOExcep\n                 b -> b.field(\"type\", \"keyword\").field(\"normalizer\", \"lowercase\").field(\"normalizer_skip_store_original_value\", true)\n             )\n         );\n+        var keywordMapper = mapper.mappingLookup().getMapper(\"field\");\n+        assertThat(keywordMapper, Matchers.instanceOf(KeywordFieldMapper.class));\n+        assertTrue(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n+\n         assertEquals(\"{\\\"field\\\":\\\"abc\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+\n+        // normalizer_skip_store_original_value is configured, but it is the same as the default value, and therefor it isn't serialized\n+        // (See default serializerCheck in Parameter.java)\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"lowercase\"}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testSkipStoreOriginalValueForLowercaseNormalizer() throws IOException {\n@@ -604,6 +622,9 @@ public void testSkipStoreOriginalValueForLowercaseNormalizer() throws IOExceptio\n         assertTrue(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n \n         assertEquals(\"{\\\"field\\\":\\\"abc\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"lowercase\"}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testSkipStoreOriginalValueForCustomNormalizer() throws IOException {\n@@ -616,6 +637,26 @@ public void testSkipStoreOriginalValueForCustomNormalizer() throws IOException {\n         assertFalse(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n \n         assertEquals(\"{\\\"field\\\":\\\"AbC\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"other_lowercase\"}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n+    }\n+\n+    public void testSkipStoreOriginalValueForCustomNormalizerOverwriteSkipStoreOriginalValue() throws IOException {\n+        MapperService mapper = createSytheticSourceMapperService(\n+            fieldMapping(\n+                b -> b.field(\"type\", \"keyword\").field(\"normalizer\", \"other_lowercase\").field(\"normalizer_skip_store_original_value\", true)\n+            )\n+        );\n+\n+        var keywordMapper = mapper.mappingLookup().getMapper(\"field\");\n+        assertThat(keywordMapper, Matchers.instanceOf(KeywordFieldMapper.class));\n+        assertTrue(((KeywordFieldMapper) keywordMapper).isNormalizerSkipStoreOriginalValue());\n+\n+        assertEquals(\"{\\\"field\\\":\\\"abc\\\"}\", syntheticSource(mapper.documentMapper(), b -> b.field(\"field\", \"AbC\")));\n+        String expected = \"\"\"\n+            {\"field\":{\"type\":\"keyword\",\"normalizer\":\"other_lowercase\",\"normalizer_skip_store_original_value\":true}}\"\"\";\n+        assertThat(keywordMapper.toString(), equalTo(expected));\n     }\n \n     public void testParsesKeywordNestedEmptyObjectStrict() throws IOException {\n",
  "additions": 42,
  "deletions": 1,
  "changed_files": 2,
  "url": "https://github.com/elastic/elasticsearch/pull/137085",
  "mined_at": "2025-10-25T13:20:11.811553"
}