{
  "id": 137125,
  "repository": "elastic/elasticsearch",
  "title": "add optional exception type prefix",
  "body": "I have no idea why ESQL only puts the `verification_exception:` prefix on this error message sometimes, but that's what regex match is for.  The goal of the test is to make sure that the message itself is correct.",
  "state": "closed",
  "merged": true,
  "merged_at": "2025-10-24T19:28:13+00:00",
  "created_at": "2025-10-24T18:09:12+00:00",
  "updated_at": "2025-10-24T19:29:20+00:00",
  "author": "not-napoleon",
  "reviewers": [
    "not-napoleon",
    "Kubik42"
  ],
  "base_sha": "bd94fd85d23e36f0b8a4db031e303182a14bcf3a",
  "head_sha": "9036a079c12fd5e0c580cd9c825601c160851c8b",
  "review_comments": [
    {
      "user": "not-napoleon",
      "state": "COMMENTED",
      "body": "",
      "submitted_at": "2025-10-24T18:09:52+00:00"
    },
    {
      "user": "Kubik42",
      "state": "APPROVED",
      "body": "Looks good!",
      "submitted_at": "2025-10-24T18:12:23+00:00"
    }
  ],
  "pr_comments": [
    {
      "user": "elasticsearchmachine",
      "body": "Pinging @elastic/es-storage-engine (Team:StorageEngine)",
      "created_at": "2025-10-24T18:09:37+00:00"
    },
    {
      "user": "elasticsearchmachine",
      "body": "## ðŸ’š Backport successful\n| Status | Branch | Result |\n|:------:|:------:|:------:|\n| âœ… |  [9.2](https://github.com/elastic/elasticsearch/pull/137131)  | [<img src=\"https://img.shields.io/github/pulls/detail/state/elastic/elasticsearch/137131\">](https://github.com/elastic/elasticsearch/pull/137131) |",
      "created_at": "2025-10-24T19:29:20+00:00"
    }
  ],
  "files_changed": [
    {
      "filename": "x-pack/plugin/src/yamlRestTest/resources/rest-api-spec/test/esql/40_tsdb.yml",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "patch": "@@ -860,5 +860,5 @@ error on rename timestamp:\n             | RENAME @timestamp AS newTs\n             | STATS max(rate(k8s.pod.network.tx))  BY tbucket = bucket(newTs, 1hour)\n \n-  - match: { error.reason: \"Found 1 problem\\nline 3:13: Rate aggregation requires @timestamp field, but @timestamp was renamed or dropped\" }\n+  - match: { error.reason: '/(verification_exception:\\ )?Found\\ 1\\ problem\\nline\\ 3:13:\\ Rate\\ aggregation\\ requires\\ @timestamp\\ field,\\ but\\ @timestamp\\ was\\ renamed\\ or\\ dropped/' }\n "
    }
  ],
  "diff": "diff --git a/x-pack/plugin/src/yamlRestTest/resources/rest-api-spec/test/esql/40_tsdb.yml b/x-pack/plugin/src/yamlRestTest/resources/rest-api-spec/test/esql/40_tsdb.yml\nindex 7f8ebb5b7f09d..c903a5f8312ea 100644\n--- a/x-pack/plugin/src/yamlRestTest/resources/rest-api-spec/test/esql/40_tsdb.yml\n+++ b/x-pack/plugin/src/yamlRestTest/resources/rest-api-spec/test/esql/40_tsdb.yml\n@@ -860,5 +860,5 @@ error on rename timestamp:\n             | RENAME @timestamp AS newTs\n             | STATS max(rate(k8s.pod.network.tx))  BY tbucket = bucket(newTs, 1hour)\n \n-  - match: { error.reason: \"Found 1 problem\\nline 3:13: Rate aggregation requires @timestamp field, but @timestamp was renamed or dropped\" }\n+  - match: { error.reason: '/(verification_exception:\\ )?Found\\ 1\\ problem\\nline\\ 3:13:\\ Rate\\ aggregation\\ requires\\ @timestamp\\ field,\\ but\\ @timestamp\\ was\\ renamed\\ or\\ dropped/' }\n \n",
  "additions": 1,
  "deletions": 1,
  "changed_files": 1,
  "url": "https://github.com/elastic/elasticsearch/pull/137125",
  "mined_at": "2025-10-25T13:13:42.194276"
}